var ys=Object.defineProperty;var xs=(e,t,i)=>t in e?ys(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Nt=(e,t,i)=>xs(e,typeof t!="symbol"?t+"":t,i);import{j as M,u as _s}from"./index-DvYeOwGz.js";import{r as we}from"./charts-DZfeYRUM.js";import{C as Rt}from"./Card-CxiP9uwG.js";import{M as ws,a as bs,R as ks,U as Ss,S as Ts,b as gi,c as Us,C as cr,V as vi,d as Ms,e as Jn,I as Cs,f as As,B as lo,g as Fs,T as Ds,L as ia,h as Es,i as aa,D as Ns,P as mi,u as Rs,j as fr,k as Ls,l as Os,m as Ee,n as Ps,o as Is,p as Gs}from"./useWebSocket-CZ3kHJZw.js";import"./react-vendor-BtP0CW_r.js";import"./state-B47AYDn3.js";const Bs=e=>typeof e=="object"&&typeof e.then=="function",On=[];function js(e,t,i=(o,r)=>o===r){if(e===t)return!0;if(!e||!t)return!1;const o=e.length;if(t.length!==o)return!1;for(let r=0;r<o;r++)if(!i(e[r],t[r]))return!1;return!0}function Ws(e,t=null,i=!1,o={}){t===null&&(t=[e]);for(const n of On)if(js(t,n.keys,n.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(n,"error"))throw n.error;if(Object.prototype.hasOwnProperty.call(n,"response"))return o.lifespan&&o.lifespan>0&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.remove,o.lifespan)),n.response;if(!i)throw n.promise}const r={keys:t,equal:o.equal,remove:()=>{const n=On.indexOf(r);n!==-1&&On.splice(n,1)},promise:(Bs(e)?e:e(...t)).then(n=>{r.response=n,o.lifespan&&o.lifespan>0&&(r.timeout=setTimeout(r.remove,o.lifespan))}).catch(n=>r.error=n)};if(On.push(r),!i)throw r.promise}const zs=(e,t,i)=>Ws(e,t,!1,i);function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},vn.apply(null,arguments)}function Hs(){var e=Object.create(null);function t(r,n){var a=r.id,l=r.name,s=r.dependencies;s===void 0&&(s=[]);var u=r.init;u===void 0&&(u=function(){});var c=r.getTransferables;if(c===void 0&&(c=null),!e[a])try{s=s.map(function(h){return h&&h.isWorkerModule&&(t(h,function(d){if(d instanceof Error)throw d}),h=e[h.id].value),h}),u=o("<"+l+">.init",u),c&&(c=o("<"+l+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:f,getTransferables:c},n(f)}catch(h){h&&h.noLog||console.error(h),n(h)}}function i(r,n){var a,l=r.id,s=r.args;(!e[l]||typeof e[l].value!="function")&&n(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var u=(a=e[l]).value.apply(a,s);u&&typeof u.then=="function"?u.then(c,function(f){return n(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){n(f)}function c(f){try{var h=e[l].getTransferables&&e[l].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),n(f,h)}catch(d){console.error(d),n(d)}}}function o(r,n){var a=void 0;self.troikaDefine=function(s){return a=s};var l=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+n+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(s){console.error(s)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(r){var n=r.data,a=n.messageId,l=n.action,s=n.data;try{l==="registerModule"&&t(s,function(u){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof u=="function"}})}),l==="callModule"&&i(s,function(u,c){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:a,success:!1,error:u.stack})}})}function Vs(e){var t=function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];return t._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,i);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var i=e.dependencies,o=e.init;i=Array.isArray(i)?i.map(function(n){return n&&(n=n.onMainThread||n,n._getInitResult&&(n=n._getInitResult())),n}):[];var r=Promise.all(i).then(function(n){return o.apply(null,n)});return t._getInitResult=function(){return r},r},t}var uo=function(){var e=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),e=!0}catch(i){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+i.message+"]")}return uo=function(){return e},e},Ys=0,Xs=0,Pr=!1,pn=Object.create(null),gn=Object.create(null),Zr=Object.create(null);function Yt(e){if((!e||typeof e.init!="function")&&!Pr)throw new Error("requires `options.init` function");var t=e.dependencies,i=e.init,o=e.getTransferables,r=e.workerId,n=Vs(e);r==null&&(r="#default");var a="workerModule"+ ++Ys,l=e.name||a,s=null;t=t&&t.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(Pr=!0,c=Yt({workerId:r,name:"<"+l+"> function dependency: "+c.name,init:`function(){return (
`+zn(c)+`
)}`}),Pr=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function u(){for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];if(!uo())return n.apply(void 0,c);if(!s){s=oa(r,"registerModule",u.workerModuleData);var h=function(){s=null,gn[r].delete(h)};(gn[r]||(gn[r]=new Set)).add(h)}return s.then(function(d){var p=d.isCallable;if(p)return oa(r,"callModule",{id:a,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:a,name:l,dependencies:t,init:zn(i),getTransferables:o&&zn(o)},u.onMainThread=n,u}function qs(e){gn[e]&&gn[e].forEach(function(t){t()}),pn[e]&&(pn[e].terminate(),delete pn[e])}function zn(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Js(e){var t=pn[e];if(!t){var i=zn(Hs);t=pn[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+` **/

;(`+i+")()"],{type:"application/javascript"}))),t.onmessage=function(o){var r=o.data,n=r.messageId,a=Zr[n];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Zr[n],a(r)}}return t}function oa(e,t,i){return new Promise(function(o,r){var n=++Xs;Zr[n]=function(a){a.success?o(a.result):r(new Error("Error in worker "+t+" call: "+a.error))},Js(e).postMessage({messageId:n,action:t,data:i})})}function co(){var e=function(t){function i(j,W,m,U,R,P,D,V){var G=1-D;V.x=G*G*j+2*G*D*m+D*D*R,V.y=G*G*W+2*G*D*U+D*D*P}function o(j,W,m,U,R,P,D,V,G,H){var E=1-G;H.x=E*E*E*j+3*E*E*G*m+3*E*G*G*R+G*G*G*D,H.y=E*E*E*W+3*E*E*G*U+3*E*G*G*P+G*G*G*V}function r(j,W){for(var m=/([MLQCZ])([^MLQCZ]*)/g,U,R,P,D,V;U=m.exec(j);){var G=U[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(H){return parseFloat(H)});switch(U[1]){case"M":D=R=G[0],V=P=G[1];break;case"L":(G[0]!==D||G[1]!==V)&&W("L",D,V,D=G[0],V=G[1]);break;case"Q":{W("Q",D,V,D=G[2],V=G[3],G[0],G[1]);break}case"C":{W("C",D,V,D=G[4],V=G[5],G[0],G[1],G[2],G[3]);break}case"Z":(D!==R||V!==P)&&W("L",D,V,R,P);break}}}function n(j,W,m){m===void 0&&(m=16);var U={x:0,y:0};r(j,function(R,P,D,V,G,H,E,X,B){switch(R){case"L":W(P,D,V,G);break;case"Q":{for(var x=P,se=D,Z=1;Z<m;Z++)i(P,D,H,E,V,G,Z/(m-1),U),W(x,se,U.x,U.y),x=U.x,se=U.y;break}case"C":{for(var K=P,Q=D,re=1;re<m;re++)o(P,D,H,E,X,B,V,G,re/(m-1),U),W(K,Q,U.x,U.y),K=U.x,Q=U.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",s=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(j,W){var m=j.getContext?j.getContext("webgl",u):j,U=s.get(m);if(!U){let E=function(K){var Q=P[K];if(!Q&&(Q=P[K]=m.getExtension(K),!Q))throw new Error(K+" not supported");return Q},X=function(K,Q){var re=m.createShader(Q);return m.shaderSource(re,K),m.compileShader(re),re},B=function(K,Q,re,q){if(!D[K]){var ae={},ie={},z=m.createProgram();m.attachShader(z,X(Q,m.VERTEX_SHADER)),m.attachShader(z,X(re,m.FRAGMENT_SHADER)),m.linkProgram(z),D[K]={program:z,transaction:function(te){m.useProgram(z),te({setUniform:function(ee,be){for(var oe=[],ue=arguments.length-2;ue-- >0;)oe[ue]=arguments[ue+2];var he=ie[be]||(ie[be]=m.getUniformLocation(z,be));m["uniform"+ee].apply(m,[he].concat(oe))},setAttribute:function(ee,be,oe,ue,he){var ge=ae[ee];ge||(ge=ae[ee]={buf:m.createBuffer(),loc:m.getAttribLocation(z,ee),data:null}),m.bindBuffer(m.ARRAY_BUFFER,ge.buf),m.vertexAttribPointer(ge.loc,be,m.FLOAT,!1,0,0),m.enableVertexAttribArray(ge.loc),R?m.vertexAttribDivisor(ge.loc,ue):E("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ge.loc,ue),he!==ge.data&&(m.bufferData(m.ARRAY_BUFFER,he,oe),ge.data=he)}})}}}D[K].transaction(q)},x=function(K,Q){G++;try{m.activeTexture(m.TEXTURE0+G);var re=V[K];re||(re=V[K]=m.createTexture(),m.bindTexture(m.TEXTURE_2D,re),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST)),m.bindTexture(m.TEXTURE_2D,re),Q(re,G)}finally{G--}},se=function(K,Q,re){var q=m.createFramebuffer();H.push(q),m.bindFramebuffer(m.FRAMEBUFFER,q),m.activeTexture(m.TEXTURE0+Q),m.bindTexture(m.TEXTURE_2D,K),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,K,0);try{re(q)}finally{m.deleteFramebuffer(q),m.bindFramebuffer(m.FRAMEBUFFER,H[--H.length-1]||null)}},Z=function(){P={},D={},V={},G=-1,H.length=0};var R=typeof WebGL2RenderingContext<"u"&&m instanceof WebGL2RenderingContext,P={},D={},V={},G=-1,H=[];m.canvas.addEventListener("webglcontextlost",function(K){Z(),K.preventDefault()},!1),s.set(m,U={gl:m,isWebGL2:R,getExtension:E,withProgram:B,withTexture:x,withTextureFramebuffer:se,handleContextLoss:Z})}W(U)}function f(j,W,m,U,R,P,D,V){D===void 0&&(D=15),V===void 0&&(V=null),c(j,function(G){var H=G.gl,E=G.withProgram,X=G.withTexture;X("copy",function(B,x){H.texImage2D(H.TEXTURE_2D,0,H.RGBA,R,P,0,H.RGBA,H.UNSIGNED_BYTE,W),E("copy",a,l,function(se){var Z=se.setUniform,K=se.setAttribute;K("aUV",2,H.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Z("1i","image",x),H.bindFramebuffer(H.FRAMEBUFFER,V||null),H.disable(H.BLEND),H.colorMask(D&8,D&4,D&2,D&1),H.viewport(m,U,R,P),H.scissor(m,U,R,P),H.drawArrays(H.TRIANGLES,0,3)})})})}function h(j,W,m){var U=j.width,R=j.height;c(j,function(P){var D=P.gl,V=new Uint8Array(U*R*4);D.readPixels(0,0,U,R,D.RGBA,D.UNSIGNED_BYTE,V),j.width=W,j.height=m,f(D,V,0,0,U,R)})}var d=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function p(j,W,m,U,R,P){P===void 0&&(P=1);var D=new Uint8Array(j*W),V=U[2]-U[0],G=U[3]-U[1],H=[];n(m,function(K,Q,re,q){H.push({x1:K,y1:Q,x2:re,y2:q,minX:Math.min(K,re),minY:Math.min(Q,q),maxX:Math.max(K,re),maxY:Math.max(Q,q)})}),H.sort(function(K,Q){return K.maxX-Q.maxX});for(var E=0;E<j;E++)for(var X=0;X<W;X++){var B=se(U[0]+V*(E+.5)/j,U[1]+G*(X+.5)/W),x=Math.pow(1-Math.abs(B)/R,P)/2;B<0&&(x=1-x),x=Math.max(0,Math.min(255,Math.round(x*255))),D[X*j+E]=x}return D;function se(K,Q){for(var re=1/0,q=1/0,ae=H.length;ae--;){var ie=H[ae];if(ie.maxX+q<=K)break;if(K+q>ie.minX&&Q-q<ie.maxY&&Q+q>ie.minY){var z=N(K,Q,ie.x1,ie.y1,ie.x2,ie.y2);z<re&&(re=z,q=Math.sqrt(re))}}return Z(K,Q)&&(q=-q),q}function Z(K,Q){for(var re=0,q=H.length;q--;){var ae=H[q];if(ae.maxX<=K)break;var ie=ae.y1>Q!=ae.y2>Q&&K<(ae.x2-ae.x1)*(Q-ae.y1)/(ae.y2-ae.y1)+ae.x1;ie&&(re+=ae.y1<ae.y2?1:-1)}return re!==0}}function g(j,W,m,U,R,P,D,V,G,H){P===void 0&&(P=1),V===void 0&&(V=0),G===void 0&&(G=0),H===void 0&&(H=0),v(j,W,m,U,R,P,D,null,V,G,H)}function v(j,W,m,U,R,P,D,V,G,H,E){P===void 0&&(P=1),G===void 0&&(G=0),H===void 0&&(H=0),E===void 0&&(E=0);for(var X=p(j,W,m,U,R,P),B=new Uint8Array(X.length*4),x=0;x<X.length;x++)B[x*4+E]=X[x];f(D,B,G,H,j,W,1<<3-E,V)}function N(j,W,m,U,R,P){var D=R-m,V=P-U,G=D*D+V*V,H=G?Math.max(0,Math.min(1,((j-m)*D+(W-U)*V)/G)):0,E=j-(m+H*D),X=W-(U+H*V);return E*E+X*X}var k=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:g,generateIntoFramebuffer:v}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",y="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",S=new Float32Array([0,0,2,0,0,2]),w=null,C=!1,L={},O=new WeakMap;function I(j){if(!C&&!J(j))throw new Error("WebGL generation not supported")}function _(j,W,m,U,R,P,D){if(P===void 0&&(P=1),D===void 0&&(D=null),!D&&(D=w,!D)){var V=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!V)throw new Error("OffscreenCanvas or DOM canvas not supported");D=w=V.getContext("webgl",{depth:!1})}I(D);var G=new Uint8Array(j*W*4);c(D,function(B){var x=B.gl,se=B.withTexture,Z=B.withTextureFramebuffer;se("readable",function(K,Q){x.texImage2D(x.TEXTURE_2D,0,x.RGBA,j,W,0,x.RGBA,x.UNSIGNED_BYTE,null),Z(K,Q,function(re){A(j,W,m,U,R,P,x,re,0,0,0),x.readPixels(0,0,j,W,x.RGBA,x.UNSIGNED_BYTE,G)})})});for(var H=new Uint8Array(j*W),E=0,X=0;E<G.length;E+=4)H[X++]=G[E];return H}function F(j,W,m,U,R,P,D,V,G,H){P===void 0&&(P=1),V===void 0&&(V=0),G===void 0&&(G=0),H===void 0&&(H=0),A(j,W,m,U,R,P,D,null,V,G,H)}function A(j,W,m,U,R,P,D,V,G,H,E){P===void 0&&(P=1),G===void 0&&(G=0),H===void 0&&(H=0),E===void 0&&(E=0),I(D);var X=[];n(m,function(B,x,se,Z){X.push(B,x,se,Z)}),X=new Float32Array(X),c(D,function(B){var x=B.gl,se=B.isWebGL2,Z=B.getExtension,K=B.withProgram,Q=B.withTexture,re=B.withTextureFramebuffer,q=B.handleContextLoss;if(Q("rawDistances",function(ae,ie){(j!==ae._lastWidth||W!==ae._lastHeight)&&x.texImage2D(x.TEXTURE_2D,0,x.RGBA,ae._lastWidth=j,ae._lastHeight=W,0,x.RGBA,x.UNSIGNED_BYTE,null),K("main",b,y,function(z){var pe=z.setAttribute,te=z.setUniform,le=!se&&Z("ANGLE_instanced_arrays"),ee=!se&&Z("EXT_blend_minmax");pe("aUV",2,x.STATIC_DRAW,0,S),pe("aLineSegment",4,x.DYNAMIC_DRAW,1,X),te.apply(void 0,["4f","uGlyphBounds"].concat(U)),te("1f","uMaxDistance",R),te("1f","uExponent",P),re(ae,ie,function(be){x.enable(x.BLEND),x.colorMask(!0,!0,!0,!0),x.viewport(0,0,j,W),x.scissor(0,0,j,W),x.blendFunc(x.ONE,x.ONE),x.blendEquationSeparate(x.FUNC_ADD,se?x.MAX:ee.MAX_EXT),x.clear(x.COLOR_BUFFER_BIT),se?x.drawArraysInstanced(x.TRIANGLES,0,3,X.length/4):le.drawArraysInstancedANGLE(x.TRIANGLES,0,3,X.length/4)})}),K("post",a,T,function(z){z.setAttribute("aUV",2,x.STATIC_DRAW,0,S),z.setUniform("1i","tex",ie),x.bindFramebuffer(x.FRAMEBUFFER,V),x.disable(x.BLEND),x.colorMask(E===0,E===1,E===2,E===3),x.viewport(G,H,j,W),x.scissor(G,H,j,W),x.drawArrays(x.TRIANGLES,0,3)})}),x.isContextLost())throw q(),new Error("webgl context lost")})}function J(j){var W=!j||j===w?L:j.canvas||j,m=O.get(W);if(m===void 0){C=!0;var U=null;try{var R=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],P=_(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,j);m=P&&R.length===P.length&&P.every(function(D,V){return D===R[V]}),m||(U="bad trial run results",console.info(R,P))}catch(D){m=!1,U=D.message}U&&console.warn("WebGL SDF generation not supported:",U),C=!1,O.set(W,m)}return m}var Y=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:F,generateIntoFramebuffer:A,isSupported:J});function $(j,W,m,U,R,P){R===void 0&&(R=Math.max(U[2]-U[0],U[3]-U[1])/2),P===void 0&&(P=1);try{return _.apply(Y,arguments)}catch(D){return console.info("WebGL SDF generation failed, falling back to JS",D),p.apply(k,arguments)}}function ne(j,W,m,U,R,P,D,V,G,H){R===void 0&&(R=Math.max(U[2]-U[0],U[3]-U[1])/2),P===void 0&&(P=1),V===void 0&&(V=0),G===void 0&&(G=0),H===void 0&&(H=0);try{return F.apply(Y,arguments)}catch(E){return console.info("WebGL SDF generation failed, falling back to JS",E),g.apply(k,arguments)}}return t.forEachPathCommand=r,t.generate=$,t.generateIntoCanvas=ne,t.javascript=k,t.pathToLineSegments=n,t.webgl=Y,t.webglUtils=d,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return e}function Ks(){var e=function(t){var i={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},o={},r={};o.L=1,r[1]="L",Object.keys(i).forEach(function(q,ae){o[q]=1<<ae+1,r[o[q]]=q}),Object.freeze(o);var n=o.LRI|o.RLI|o.FSI,a=o.L|o.R|o.AL,l=o.B|o.S|o.WS|o.ON|o.FSI|o.LRI|o.RLI|o.PDI,s=o.BN|o.RLE|o.LRE|o.RLO|o.LRO|o.PDF,u=o.S|o.WS|o.B|n|o.PDI|s,c=null;function f(){if(!c){c=new Map;var q=function(ie){if(i.hasOwnProperty(ie)){var z=0;i[ie].split(",").forEach(function(pe){var te=pe.split("+"),le=te[0],ee=te[1];le=parseInt(le,36),ee=ee?parseInt(ee,36):0,c.set(z+=le,o[ie]);for(var be=0;be<ee;be++)c.set(++z,o[ie])})}};for(var ae in i)q(ae)}}function h(q){return f(),c.get(q.codePointAt(0))||o.L}function d(q){return r[h(q)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(q,ae){var ie=36,z=0,pe=new Map,te=ae&&new Map,le;return q.split(",").forEach(function ee(be){if(be.indexOf("+")!==-1)for(var oe=+be;oe--;)ee(le);else{le=be;var ue=be.split(">"),he=ue[0],ge=ue[1];he=String.fromCodePoint(z+=parseInt(he,ie)),ge=String.fromCodePoint(z+=parseInt(ge,ie)),pe.set(he,ge),ae&&te.set(ge,he)}}),{map:pe,reverseMap:te}}var v,N,k;function b(){if(!v){var q=g(p.pairs,!0),ae=q.map,ie=q.reverseMap;v=ae,N=ie,k=g(p.canonical,!1).map}}function y(q){return b(),v.get(q)||null}function T(q){return b(),N.get(q)||null}function S(q){return b(),k.get(q)||null}var w=o.L,C=o.R,L=o.EN,O=o.ES,I=o.ET,_=o.AN,F=o.CS,A=o.B,J=o.S,Y=o.ON,$=o.BN,ne=o.NSM,j=o.AL,W=o.LRO,m=o.RLO,U=o.LRE,R=o.RLE,P=o.PDF,D=o.LRI,V=o.RLI,G=o.FSI,H=o.PDI;function E(q,ae){for(var ie=125,z=new Uint32Array(q.length),pe=0;pe<q.length;pe++)z[pe]=h(q[pe]);var te=new Map;function le(We,Ke){var ze=z[We];z[We]=Ke,te.set(ze,te.get(ze)-1),ze&l&&te.set(l,te.get(l)-1),te.set(Ke,(te.get(Ke)||0)+1),Ke&l&&te.set(l,(te.get(l)||0)+1)}for(var ee=new Uint8Array(q.length),be=new Map,oe=[],ue=null,he=0;he<q.length;he++)ue||oe.push(ue={start:he,end:q.length-1,level:ae==="rtl"?1:ae==="ltr"?0:na(he,!1)}),z[he]&A&&(ue.end=he,ue=null);for(var ge=R|U|m|W|n|H|P|A,Te=function(We){return We+(We&1?1:2)},Fe=function(We){return We+(We&1?2:1)},me=0;me<oe.length;me++){ue=oe[me];var ye=[{_level:ue.level,_override:0,_isolate:0}],fe=void 0,De=0,Me=0,je=0;te.clear();for(var Ue=ue.start;Ue<=ue.end;Ue++){var de=z[Ue];if(fe=ye[ye.length-1],te.set(de,(te.get(de)||0)+1),de&l&&te.set(l,(te.get(l)||0)+1),de&ge)if(de&(R|U)){ee[Ue]=fe._level;var ke=(de===R?Fe:Te)(fe._level);ke<=ie&&!De&&!Me?ye.push({_level:ke,_override:0,_isolate:0}):De||Me++}else if(de&(m|W)){ee[Ue]=fe._level;var ft=(de===m?Fe:Te)(fe._level);ft<=ie&&!De&&!Me?ye.push({_level:ft,_override:de&m?C:w,_isolate:0}):De||Me++}else if(de&n){de&G&&(de=na(Ue+1,!0)===1?V:D),ee[Ue]=fe._level,fe._override&&le(Ue,fe._override);var Se=(de===V?Fe:Te)(fe._level);Se<=ie&&De===0&&Me===0?(je++,ye.push({_level:Se,_override:0,_isolate:1,_isolInitIndex:Ue})):De++}else if(de&H){if(De>0)De--;else if(je>0){for(Me=0;!ye[ye.length-1]._isolate;)ye.pop();var xe=ye[ye.length-1]._isolInitIndex;xe!=null&&(be.set(xe,Ue),be.set(Ue,xe)),ye.pop(),je--}fe=ye[ye.length-1],ee[Ue]=fe._level,fe._override&&le(Ue,fe._override)}else de&P?(De===0&&(Me>0?Me--:!fe._isolate&&ye.length>1&&(ye.pop(),fe=ye[ye.length-1])),ee[Ue]=fe._level):de&A&&(ee[Ue]=ue.level);else ee[Ue]=fe._level,fe._override&&de!==$&&le(Ue,fe._override)}for(var Ne=[],Ce=null,ve=ue.start;ve<=ue.end;ve++){var Ae=z[ve];if(!(Ae&s)){var Ge=ee[ve],Ie=Ae&n,Re=Ae===H;Ce&&Ge===Ce._level?(Ce._end=ve,Ce._endsWithIsolInit=Ie):Ne.push(Ce={_start:ve,_end:ve,_level:Ge,_startsWithPDI:Re,_endsWithIsolInit:Ie})}}for(var qe=[],ht=0;ht<Ne.length;ht++){var rt=Ne[ht];if(!rt._startsWithPDI||rt._startsWithPDI&&!be.has(rt._start)){for(var dt=[Ce=rt],vt=void 0;Ce&&Ce._endsWithIsolInit&&(vt=be.get(Ce._end))!=null;)for(var it=ht+1;it<Ne.length;it++)if(Ne[it]._start===vt){dt.push(Ce=Ne[it]);break}for(var Be=[],mt=0;mt<dt.length;mt++)for(var Oi=dt[mt],mr=Oi._start;mr<=Oi._end;mr++)Be.push(mr);for(var hs=ee[Be[0]],Pi=ue.level,kn=Be[0]-1;kn>=0;kn--)if(!(z[kn]&s)){Pi=ee[kn];break}var yr=Be[Be.length-1],ds=ee[yr],Ii=ue.level;if(!(z[yr]&n)){for(var Sn=yr+1;Sn<=ue.end;Sn++)if(!(z[Sn]&s)){Ii=ee[Sn];break}}qe.push({_seqIndices:Be,_sosType:Math.max(Pi,hs)%2?C:w,_eosType:Math.max(Ii,ds)%2?C:w})}}for(var xr=0;xr<qe.length;xr++){var _r=qe[xr],ce=_r._seqIndices,Xt=_r._sosType,ps=_r._eosType,At=ee[ce[0]]&1?C:w;if(te.get(ne))for(var Tn=0;Tn<ce.length;Tn++){var Gi=ce[Tn];if(z[Gi]&ne){for(var wr=Xt,Un=Tn-1;Un>=0;Un--)if(!(z[ce[Un]]&s)){wr=z[ce[Un]];break}le(Gi,wr&(n|H)?Y:wr)}}if(te.get(L))for(var Mn=0;Mn<ce.length;Mn++){var Bi=ce[Mn];if(z[Bi]&L)for(var Cn=Mn-1;Cn>=-1;Cn--){var ji=Cn===-1?Xt:z[ce[Cn]];if(ji&a){ji===j&&le(Bi,_);break}}}if(te.get(j))for(var br=0;br<ce.length;br++){var Wi=ce[br];z[Wi]&j&&le(Wi,C)}if(te.get(O)||te.get(F))for(var qt=1;qt<ce.length-1;qt++){var kr=ce[qt];if(z[kr]&(O|F)){for(var Ft=0,Sr=0,Tr=qt-1;Tr>=0&&(Ft=z[ce[Tr]],!!(Ft&s));Tr--);for(var Ur=qt+1;Ur<ce.length&&(Sr=z[ce[Ur]],!!(Sr&s));Ur++);Ft===Sr&&(z[kr]===O?Ft===L:Ft&(L|_))&&le(kr,Ft)}}if(te.get(L))for(var et=0;et<ce.length;et++){var gs=ce[et];if(z[gs]&L){for(var An=et-1;An>=0&&z[ce[An]]&(I|s);An--)le(ce[An],L);for(et++;et<ce.length&&z[ce[et]]&(I|s|L);et++)z[ce[et]]!==L&&le(ce[et],L)}}if(te.get(I)||te.get(O)||te.get(F))for(var Jt=0;Jt<ce.length;Jt++){var zi=ce[Jt];if(z[zi]&(I|O|F)){le(zi,Y);for(var Fn=Jt-1;Fn>=0&&z[ce[Fn]]&s;Fn--)le(ce[Fn],Y);for(var Dn=Jt+1;Dn<ce.length&&z[ce[Dn]]&s;Dn++)le(ce[Dn],Y)}}if(te.get(L))for(var Mr=0,Hi=Xt;Mr<ce.length;Mr++){var Vi=ce[Mr],Cr=z[Vi];Cr&L?Hi===w&&le(Vi,w):Cr&a&&(Hi=Cr)}if(te.get(l)){var Kt=C|L|_,Yi=Kt|w,En=[];{for(var Dt=[],Et=0;Et<ce.length;Et++)if(z[ce[Et]]&l){var Zt=q[ce[Et]],Xi=void 0;if(y(Zt)!==null)if(Dt.length<63)Dt.push({char:Zt,seqIndex:Et});else break;else if((Xi=T(Zt))!==null)for(var Qt=Dt.length-1;Qt>=0;Qt--){var Ar=Dt[Qt].char;if(Ar===Xi||Ar===T(S(Zt))||y(S(Ar))===Zt){En.push([Dt[Qt].seqIndex,Et]),Dt.length=Qt;break}}}En.sort(function(We,Ke){return We[0]-Ke[0]})}for(var Fr=0;Fr<En.length;Fr++){for(var qi=En[Fr],Nn=qi[0],Dr=qi[1],Ji=!1,Je=0,Er=Nn+1;Er<Dr;Er++){var Ki=ce[Er];if(z[Ki]&Yi){Ji=!0;var Zi=z[Ki]&Kt?C:w;if(Zi===At){Je=Zi;break}}}if(Ji&&!Je){Je=Xt;for(var Nr=Nn-1;Nr>=0;Nr--){var Qi=ce[Nr];if(z[Qi]&Yi){var $i=z[Qi]&Kt?C:w;$i!==At?Je=$i:Je=At;break}}}if(Je){if(z[ce[Nn]]=z[ce[Dr]]=Je,Je!==At){for(var $t=Nn+1;$t<ce.length;$t++)if(!(z[ce[$t]]&s)){h(q[ce[$t]])&ne&&(z[ce[$t]]=Je);break}}if(Je!==At){for(var en=Dr+1;en<ce.length;en++)if(!(z[ce[en]]&s)){h(q[ce[en]])&ne&&(z[ce[en]]=Je);break}}}}for(var pt=0;pt<ce.length;pt++)if(z[ce[pt]]&l){for(var ea=pt,Rr=pt,Lr=Xt,tn=pt-1;tn>=0;tn--)if(z[ce[tn]]&s)ea=tn;else{Lr=z[ce[tn]]&Kt?C:w;break}for(var ta=ps,nn=pt+1;nn<ce.length;nn++)if(z[ce[nn]]&(l|s))Rr=nn;else{ta=z[ce[nn]]&Kt?C:w;break}for(var Or=ea;Or<=Rr;Or++)z[ce[Or]]=Lr===ta?Lr:At;pt=Rr}}}for(var Ve=ue.start;Ve<=ue.end;Ve++){var vs=ee[Ve],Rn=z[Ve];if(vs&1?Rn&(w|L|_)&&ee[Ve]++:Rn&C?ee[Ve]++:Rn&(_|L)&&(ee[Ve]+=2),Rn&s&&(ee[Ve]=Ve===0?ue.level:ee[Ve-1]),Ve===ue.end||h(q[Ve])&(J|A))for(var Ln=Ve;Ln>=0&&h(q[Ln])&u;Ln--)ee[Ln]=ue.level}}return{levels:ee,paragraphs:oe};function na(We,Ke){for(var ze=We;ze<q.length;ze++){var gt=z[ze];if(gt&(C|j))return 1;if(gt&(A|w)||Ke&&gt===H)return 0;if(gt&n){var ra=ms(ze);ze=ra===-1?q.length:ra}}return 0}function ms(We){for(var Ke=1,ze=We+1;ze<q.length;ze++){var gt=z[ze];if(gt&A)break;if(gt&H){if(--Ke===0)return ze}else gt&n&&Ke++}return-1}}var X="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",B;function x(){if(!B){var q=g(X,!0),ae=q.map,ie=q.reverseMap;ie.forEach(function(z,pe){ae.set(pe,z)}),B=ae}}function se(q){return x(),B.get(q)||null}function Z(q,ae,ie,z){var pe=q.length;ie=Math.max(0,ie==null?0:+ie),z=Math.min(pe-1,z==null?pe-1:+z);for(var te=new Map,le=ie;le<=z;le++)if(ae[le]&1){var ee=se(q[le]);ee!==null&&te.set(le,ee)}return te}function K(q,ae,ie,z){var pe=q.length;ie=Math.max(0,ie==null?0:+ie),z=Math.min(pe-1,z==null?pe-1:+z);var te=[];return ae.paragraphs.forEach(function(le){var ee=Math.max(ie,le.start),be=Math.min(z,le.end);if(ee<be){for(var oe=ae.levels.slice(ee,be+1),ue=be;ue>=ee&&h(q[ue])&u;ue--)oe[ue]=le.level;for(var he=le.level,ge=1/0,Te=0;Te<oe.length;Te++){var Fe=oe[Te];Fe>he&&(he=Fe),Fe<ge&&(ge=Fe|1)}for(var me=he;me>=ge;me--)for(var ye=0;ye<oe.length;ye++)if(oe[ye]>=me){for(var fe=ye;ye+1<oe.length&&oe[ye+1]>=me;)ye++;ye>fe&&te.push([fe+ee,ye+ee])}}}),te}function Q(q,ae,ie,z){var pe=re(q,ae,ie,z),te=[].concat(q);return pe.forEach(function(le,ee){te[ee]=(ae.levels[le]&1?se(q[le]):null)||q[le]}),te.join("")}function re(q,ae,ie,z){for(var pe=K(q,ae,ie,z),te=[],le=0;le<q.length;le++)te[le]=le;return pe.forEach(function(ee){for(var be=ee[0],oe=ee[1],ue=te.slice(be,oe+1),he=ue.length;he--;)te[oe-he]=ue[he]}),te}return t.closingToOpeningBracket=T,t.getBidiCharType=h,t.getBidiCharTypeName=d,t.getCanonicalBracket=S,t.getEmbeddingLevels=E,t.getMirroredCharacter=se,t.getMirroredCharactersMap=Z,t.getReorderSegments=K,t.getReorderedIndices=re,t.getReorderedString=Q,t.openingToClosingBracket=y,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return e}const fo=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Qr(e){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function i(o,r){let n=Ts[r];return n?Qr(n):o}return e.replace(t,i)}const Pe=[];for(let e=0;e<256;e++)Pe[e]=(e<16?"0":"")+e.toString(16);function Zs(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(Pe[e&255]+Pe[e>>8&255]+Pe[e>>16&255]+Pe[e>>24&255]+"-"+Pe[t&255]+Pe[t>>8&255]+"-"+Pe[t>>16&15|64]+Pe[t>>24&255]+"-"+Pe[i&63|128]+Pe[i>>8&255]+"-"+Pe[i>>16&255]+Pe[i>>24&255]+Pe[o&255]+Pe[o>>8&255]+Pe[o>>16&255]+Pe[o>>24&255]).toUpperCase()}const yt=Object.assign||function(){let e=arguments[0];for(let t=1,i=arguments.length;t<i;t++){let o=arguments[t];if(o)for(let r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Qs=Date.now(),sa=new WeakMap,la=new Map;let $s=1e10;function $r(e,t){const i=rl(t);let o=sa.get(e);if(o||sa.set(e,o=Object.create(null)),o[i])return new o[i];const r=`_onBeforeCompile${i}`,n=function(u,c){e.onBeforeCompile.call(this,u,c);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let h=la[f];if(!h){const d=el(this,u,t,i);h=la[f]=d}u.vertexShader=h.vertexShader,u.fragmentShader=h.fragmentShader,yt(u.uniforms,this.uniforms),t.timeUniform&&(u.uniforms[t.timeUniform]={get value(){return Date.now()-Qs}}),this[r]&&this[r](u)},a=function(){return l(t.chained?e:e.clone())},l=function(u){const c=Object.create(u,s);return Object.defineProperty(c,"baseMaterial",{value:e}),Object.defineProperty(c,"id",{value:$s++}),c.uuid=Zs(),c.uniforms=yt({},u.uniforms,t.uniforms),c.defines=yt({},u.defines,t.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${i}`]="",c.extensions=yt({},u.extensions,t.extensions),c._listeners=void 0,c},s={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:u=>{e.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const c=this.baseMaterial;return u===c||c.isDerivedMaterial&&c.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+i}},onBeforeCompile:{get(){return n},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return e.copy.call(this,u),!e.isShaderMaterial&&!e.isDerivedMaterial&&(yt(this.extensions,u.extensions),yt(this.defines,u.defines),yt(this.uniforms,Ss.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new e.constructor;return l(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=$r(e.isDerivedMaterial?e.getDepthMaterial():new bs({depthPacking:ks}),t),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=$r(e.isDerivedMaterial?e.getDistanceMaterial():new ws,t),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),e.dispose.call(this)}}};return o[i]=a,new a}function el(e,{vertexShader:t,fragmentShader:i},o,r){let{vertexDefs:n,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:s,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=o;if(n=n||"",a=a||"",l=l||"",u=u||"",c=c||"",f=f||"",(s||d)&&(t=Qr(t)),(h||d)&&(i=i.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),i=Qr(i)),d){let g=d({vertexShader:t,fragmentShader:i});t=g.vertexShader,i=g.fragmentShader}if(h){let g=[];i=i.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(g.push(v),"")),f=`${h}
${g.join(`
`)}
${f}`}if(p){const g=`
uniform float ${p};
`;n=g+n,u=g+u}return s&&(t=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${t}
`,n=`${n}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${s}
}
`,a=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${a}
`,t=t.replace(/\b(position|normal|uv)\b/g,(g,v,N,k)=>/\battribute\s+vec[23]\s+$/.test(k.substr(0,N))?v:`troika_${v}_${r}`),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),t=ua(t,r,n,a,l),i=ua(i,r,u,c,f),{vertexShader:t,fragmentShader:i}}function ua(e,t,i,o,r){return(o||r||i)&&(e=e.replace(fo,`
${i}
void troikaOrigMain${t}() {`),e+=`
void main() {
  ${o}
  troikaOrigMain${t}();
  ${r}
}`),e}function tl(e,t){return e==="uniforms"?void 0:typeof t=="function"?t.toString():t}let nl=0;const ca=new Map;function rl(e){const t=JSON.stringify(e,tl);let i=ca.get(t);return i==null&&ca.set(t,i=++nl),i}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function il(){return typeof window>"u"&&(self.window=self),function(e){var t={parse:function(r){var n=t._bin,a=new Uint8Array(r);if(n.readASCII(a,0,4)=="ttcf"){var l=4;n.readUshort(a,l),l+=2,n.readUshort(a,l),l+=2;var s=n.readUint(a,l);l+=4;for(var u=[],c=0;c<s;c++){var f=n.readUint(a,l);l+=4,u.push(t._readFont(a,f))}return u}return[t._readFont(a,0)]},_readFont:function(r,n){var a=t._bin,l=n;a.readFixed(r,n),n+=4;var s=a.readUshort(r,n);n+=2,a.readUshort(r,n),n+=2,a.readUshort(r,n),n+=2,a.readUshort(r,n),n+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],c={_data:r,_offset:l},f={},h=0;h<s;h++){var d=a.readASCII(r,n,4);n+=4,a.readUint(r,n),n+=4;var p=a.readUint(r,n);n+=4;var g=a.readUint(r,n);n+=4,f[d]={offset:p,length:g}}for(h=0;h<u.length;h++){var v=u[h];f[v]&&(c[v.trim()]=t[v.trim()].parse(r,f[v].offset,f[v].length,c))}return c},_tabOffset:function(r,n,a){for(var l=t._bin,s=l.readUshort(r,a+4),u=a+12,c=0;c<s;c++){var f=l.readASCII(r,u,4);u+=4,l.readUint(r,u),u+=4;var h=l.readUint(r,u);if(u+=4,l.readUint(r,u),u+=4,f==n)return h}return 0}};t._bin={readFixed:function(r,n){return(r[n]<<8|r[n+1])+(r[n+2]<<8|r[n+3])/65540},readF2dot14:function(r,n){return t._bin.readShort(r,n)/16384},readInt:function(r,n){return t._bin._view(r).getInt32(n)},readInt8:function(r,n){return t._bin._view(r).getInt8(n)},readShort:function(r,n){return t._bin._view(r).getInt16(n)},readUshort:function(r,n){return t._bin._view(r).getUint16(n)},readUshorts:function(r,n,a){for(var l=[],s=0;s<a;s++)l.push(t._bin.readUshort(r,n+2*s));return l},readUint:function(r,n){return t._bin._view(r).getUint32(n)},readUint64:function(r,n){return 4294967296*t._bin.readUint(r,n)+t._bin.readUint(r,n+4)},readASCII:function(r,n,a){for(var l="",s=0;s<a;s++)l+=String.fromCharCode(r[n+s]);return l},readUnicode:function(r,n,a){for(var l="",s=0;s<a;s++){var u=r[n++]<<8|r[n++];l+=String.fromCharCode(u)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,n,a){var l=t._bin._tdec;return l&&n==0&&a==r.length?l.decode(r):t._bin.readASCII(r,n,a)},readBytes:function(r,n,a){for(var l=[],s=0;s<a;s++)l.push(r[n+s]);return l},readASCIIArray:function(r,n,a){for(var l=[],s=0;s<a;s++)l.push(String.fromCharCode(r[n+s]));return l},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},t._lctf={},t._lctf.parse=function(r,n,a,l,s){var u=t._bin,c={},f=n;u.readFixed(r,n),n+=4;var h=u.readUshort(r,n);n+=2;var d=u.readUshort(r,n);n+=2;var p=u.readUshort(r,n);return n+=2,c.scriptList=t._lctf.readScriptList(r,f+h),c.featureList=t._lctf.readFeatureList(r,f+d),c.lookupList=t._lctf.readLookupList(r,f+p,s),c},t._lctf.readLookupList=function(r,n,a){var l=t._bin,s=n,u=[],c=l.readUshort(r,n);n+=2;for(var f=0;f<c;f++){var h=l.readUshort(r,n);n+=2;var d=t._lctf.readLookupTable(r,s+h,a);u.push(d)}return u},t._lctf.readLookupTable=function(r,n,a){var l=t._bin,s=n,u={tabs:[]};u.ltype=l.readUshort(r,n),n+=2,u.flag=l.readUshort(r,n),n+=2;var c=l.readUshort(r,n);n+=2;for(var f=u.ltype,h=0;h<c;h++){var d=l.readUshort(r,n);n+=2;var p=a(r,f,s+d,u);u.tabs.push(p)}return u},t._lctf.numOfOnes=function(r){for(var n=0,a=0;a<32;a++)(r>>>a&1)!=0&&n++;return n},t._lctf.readClassDef=function(r,n){var a=t._bin,l=[],s=a.readUshort(r,n);if(n+=2,s==1){var u=a.readUshort(r,n);n+=2;var c=a.readUshort(r,n);n+=2;for(var f=0;f<c;f++)l.push(u+f),l.push(u+f),l.push(a.readUshort(r,n)),n+=2}if(s==2){var h=a.readUshort(r,n);for(n+=2,f=0;f<h;f++)l.push(a.readUshort(r,n)),n+=2,l.push(a.readUshort(r,n)),n+=2,l.push(a.readUshort(r,n)),n+=2}return l},t._lctf.getInterval=function(r,n){for(var a=0;a<r.length;a+=3){var l=r[a],s=r[a+1];if(r[a+2],l<=n&&n<=s)return a}return-1},t._lctf.readCoverage=function(r,n){var a=t._bin,l={};l.fmt=a.readUshort(r,n),n+=2;var s=a.readUshort(r,n);return n+=2,l.fmt==1&&(l.tab=a.readUshorts(r,n,s)),l.fmt==2&&(l.tab=a.readUshorts(r,n,3*s)),l},t._lctf.coverageIndex=function(r,n){var a=r.tab;if(r.fmt==1)return a.indexOf(n);if(r.fmt==2){var l=t._lctf.getInterval(a,n);if(l!=-1)return a[l+2]+(n-a[l])}return-1},t._lctf.readFeatureList=function(r,n){var a=t._bin,l=n,s=[],u=a.readUshort(r,n);n+=2;for(var c=0;c<u;c++){var f=a.readASCII(r,n,4);n+=4;var h=a.readUshort(r,n);n+=2;var d=t._lctf.readFeatureTable(r,l+h);d.tag=f.trim(),s.push(d)}return s},t._lctf.readFeatureTable=function(r,n){var a=t._bin,l=n,s={},u=a.readUshort(r,n);n+=2,u>0&&(s.featureParams=l+u);var c=a.readUshort(r,n);n+=2,s.tab=[];for(var f=0;f<c;f++)s.tab.push(a.readUshort(r,n+2*f));return s},t._lctf.readScriptList=function(r,n){var a=t._bin,l=n,s={},u=a.readUshort(r,n);n+=2;for(var c=0;c<u;c++){var f=a.readASCII(r,n,4);n+=4;var h=a.readUshort(r,n);n+=2,s[f.trim()]=t._lctf.readScriptTable(r,l+h)}return s},t._lctf.readScriptTable=function(r,n){var a=t._bin,l=n,s={},u=a.readUshort(r,n);n+=2,u>0&&(s.default=t._lctf.readLangSysTable(r,l+u));var c=a.readUshort(r,n);n+=2;for(var f=0;f<c;f++){var h=a.readASCII(r,n,4);n+=4;var d=a.readUshort(r,n);n+=2,s[h.trim()]=t._lctf.readLangSysTable(r,l+d)}return s},t._lctf.readLangSysTable=function(r,n){var a=t._bin,l={};a.readUshort(r,n),n+=2,l.reqFeature=a.readUshort(r,n),n+=2;var s=a.readUshort(r,n);return n+=2,l.features=a.readUshorts(r,n,s),l},t.CFF={},t.CFF.parse=function(r,n,a){var l=t._bin;(r=new Uint8Array(r.buffer,n,a))[n=0],r[++n],r[++n],r[++n],n++;var s=[];n=t.CFF.readIndex(r,n,s);for(var u=[],c=0;c<s.length-1;c++)u.push(l.readASCII(r,n+s[c],s[c+1]-s[c]));n+=s[s.length-1];var f=[];n=t.CFF.readIndex(r,n,f);var h=[];for(c=0;c<f.length-1;c++)h.push(t.CFF.readDict(r,n+f[c],n+f[c+1]));n+=f[f.length-1];var d=h[0],p=[];n=t.CFF.readIndex(r,n,p);var g=[];for(c=0;c<p.length-1;c++)g.push(l.readASCII(r,n+p[c],p[c+1]-p[c]));if(n+=p[p.length-1],t.CFF.readSubrs(r,n,d),d.CharStrings){n=d.CharStrings,p=[],n=t.CFF.readIndex(r,n,p);var v=[];for(c=0;c<p.length-1;c++)v.push(l.readBytes(r,n+p[c],p[c+1]-p[c]));d.CharStrings=v}if(d.ROS){n=d.FDArray;var N=[];for(n=t.CFF.readIndex(r,n,N),d.FDArray=[],c=0;c<N.length-1;c++){var k=t.CFF.readDict(r,n+N[c],n+N[c+1]);t.CFF._readFDict(r,k,g),d.FDArray.push(k)}n+=N[N.length-1],n=d.FDSelect,d.FDSelect=[];var b=r[n];if(n++,b!=3)throw b;var y=l.readUshort(r,n);for(n+=2,c=0;c<y+1;c++)d.FDSelect.push(l.readUshort(r,n),r[n+2]),n+=3}return d.Encoding&&(d.Encoding=t.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=t.CFF.readCharset(r,d.charset,d.CharStrings.length)),t.CFF._readFDict(r,d,g),d},t.CFF._readFDict=function(r,n,a){var l;for(var s in n.Private&&(l=n.Private[1],n.Private=t.CFF.readDict(r,l,l+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(r,l+n.Private.Subrs,n.Private)),n)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(s)!=-1&&(n[s]=a[n[s]-426+35])},t.CFF.readSubrs=function(r,n,a){var l=t._bin,s=[];n=t.CFF.readIndex(r,n,s);var u,c=s.length;u=c<1240?107:c<33900?1131:32768,a.Bias=u,a.Subrs=[];for(var f=0;f<s.length-1;f++)a.Subrs.push(l.readBytes(r,n+s[f],s[f+1]-s[f]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(r,n){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==n)return a;return-1},t.CFF.glyphBySE=function(r,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(r,t.CFF.tableSE[n])},t.CFF.readEncoding=function(r,n,a){t._bin;var l=[".notdef"],s=r[n];if(n++,s!=0)throw"error: unknown encoding format: "+s;var u=r[n];n++;for(var c=0;c<u;c++)l.push(r[n+c]);return l},t.CFF.readCharset=function(r,n,a){var l=t._bin,s=[".notdef"],u=r[n];if(n++,u==0)for(var c=0;c<a;c++){var f=l.readUshort(r,n);n+=2,s.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;s.length<a;){f=l.readUshort(r,n),n+=2;var h=0;for(u==1?(h=r[n],n++):(h=l.readUshort(r,n),n+=2),c=0;c<=h;c++)s.push(f),f++}}return s},t.CFF.readIndex=function(r,n,a){var l=t._bin,s=l.readUshort(r,n)+1,u=r[n+=2];if(n++,u==1)for(var c=0;c<s;c++)a.push(r[n+c]);else if(u==2)for(c=0;c<s;c++)a.push(l.readUshort(r,n+2*c));else if(u==3)for(c=0;c<s;c++)a.push(16777215&l.readUint(r,n+3*c-1));else if(s!=1)throw"unsupported offset size: "+u+", count: "+s;return(n+=s*u)-1},t.CFF.getCharString=function(r,n,a){var l=t._bin,s=r[n],u=r[n+1];r[n+2],r[n+3],r[n+4];var c=1,f=null,h=null;s<=20&&(f=s,c=1),s==12&&(f=100*s+u,c=2),21<=s&&s<=27&&(f=s,c=1),s==28&&(h=l.readShort(r,n+1),c=3),29<=s&&s<=31&&(f=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+u+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-u-108,c=2),s==255&&(h=l.readInt(r,n+1)/65535,c=5),a.val=h??"o"+f,a.size=c},t.CFF.readCharString=function(r,n,a){for(var l=n+a,s=t._bin,u=[];n<l;){var c=r[n],f=r[n+1];r[n+2],r[n+3],r[n+4];var h=1,d=null,p=null;c<=20&&(d=c,h=1),c==12&&(d=100*c+f,h=2),c!=19&&c!=20||(d=c,h=2),21<=c&&c<=27&&(d=c,h=1),c==28&&(p=s.readShort(r,n+1),h=3),29<=c&&c<=31&&(d=c,h=1),32<=c&&c<=246&&(p=c-139,h=1),247<=c&&c<=250&&(p=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(p=256*-(c-251)-f-108,h=2),c==255&&(p=s.readInt(r,n+1)/65535,h=5),u.push(p??"o"+d),n+=h}return u},t.CFF.readDict=function(r,n,a){for(var l=t._bin,s={},u=[];n<a;){var c=r[n],f=r[n+1];r[n+2],r[n+3],r[n+4];var h=1,d=null,p=null;if(c==28&&(p=l.readShort(r,n+1),h=3),c==29&&(p=l.readInt(r,n+1),h=5),32<=c&&c<=246&&(p=c-139,h=1),247<=c&&c<=250&&(p=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(p=256*-(c-251)-f-108,h=2),c==255)throw p=l.readInt(r,n+1)/65535,h=5,"unknown number";if(c==30){var g=[];for(h=1;;){var v=r[n+h];h++;var N=v>>4,k=15&v;if(N!=15&&g.push(N),k!=15&&g.push(k),k==15)break}for(var b="",y=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<g.length;T++)b+=y[g[T]];p=parseFloat(b)}c<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],h=1,c==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(s[d]=u.length==1?u[0]:u,u=[]):u.push(p),n+=h}return s},t.cmap={},t.cmap.parse=function(r,n,a){r=new Uint8Array(r.buffer,n,a),n=0;var l=t._bin,s={};l.readUshort(r,n),n+=2;var u=l.readUshort(r,n);n+=2;var c=[];s.tables=[];for(var f=0;f<u;f++){var h=l.readUshort(r,n);n+=2;var d=l.readUshort(r,n);n+=2;var p=l.readUint(r,n);n+=4;var g="p"+h+"e"+d,v=c.indexOf(p);if(v==-1){var N;v=s.tables.length,c.push(p);var k=l.readUshort(r,p);k==0?N=t.cmap.parse0(r,p):k==4?N=t.cmap.parse4(r,p):k==6?N=t.cmap.parse6(r,p):k==12?N=t.cmap.parse12(r,p):console.debug("unknown format: "+k,h,d,p),s.tables.push(N)}if(s[g]!=null)throw"multiple tables for one platform+encoding";s[g]=v}return s},t.cmap.parse0=function(r,n){var a=t._bin,l={};l.format=a.readUshort(r,n),n+=2;var s=a.readUshort(r,n);n+=2,a.readUshort(r,n),n+=2,l.map=[];for(var u=0;u<s-6;u++)l.map.push(r[n+u]);return l},t.cmap.parse4=function(r,n){var a=t._bin,l=n,s={};s.format=a.readUshort(r,n),n+=2;var u=a.readUshort(r,n);n+=2,a.readUshort(r,n),n+=2;var c=a.readUshort(r,n);n+=2;var f=c/2;s.searchRange=a.readUshort(r,n),n+=2,s.entrySelector=a.readUshort(r,n),n+=2,s.rangeShift=a.readUshort(r,n),n+=2,s.endCount=a.readUshorts(r,n,f),n+=2*f,n+=2,s.startCount=a.readUshorts(r,n,f),n+=2*f,s.idDelta=[];for(var h=0;h<f;h++)s.idDelta.push(a.readShort(r,n)),n+=2;for(s.idRangeOffset=a.readUshorts(r,n,f),n+=2*f,s.glyphIdArray=[];n<l+u;)s.glyphIdArray.push(a.readUshort(r,n)),n+=2;return s},t.cmap.parse6=function(r,n){var a=t._bin,l={};l.format=a.readUshort(r,n),n+=2,a.readUshort(r,n),n+=2,a.readUshort(r,n),n+=2,l.firstCode=a.readUshort(r,n),n+=2;var s=a.readUshort(r,n);n+=2,l.glyphIdArray=[];for(var u=0;u<s;u++)l.glyphIdArray.push(a.readUshort(r,n)),n+=2;return l},t.cmap.parse12=function(r,n){var a=t._bin,l={};l.format=a.readUshort(r,n),n+=2,n+=2,a.readUint(r,n),n+=4,a.readUint(r,n),n+=4;var s=a.readUint(r,n);n+=4,l.groups=[];for(var u=0;u<s;u++){var c=n+12*u,f=a.readUint(r,c+0),h=a.readUint(r,c+4),d=a.readUint(r,c+8);l.groups.push([f,h,d])}return l},t.glyf={},t.glyf.parse=function(r,n,a,l){for(var s=[],u=0;u<l.maxp.numGlyphs;u++)s.push(null);return s},t.glyf._parseGlyf=function(r,n){var a=t._bin,l=r._data,s=t._tabOffset(l,"glyf",r._offset)+r.loca[n];if(r.loca[n]==r.loca[n+1])return null;var u={};if(u.noc=a.readShort(l,s),s+=2,u.xMin=a.readShort(l,s),s+=2,u.yMin=a.readShort(l,s),s+=2,u.xMax=a.readShort(l,s),s+=2,u.yMax=a.readShort(l,s),s+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(a.readUshort(l,s)),s+=2;var f=a.readUshort(l,s);if(s+=2,l.length-s<f)return null;u.instructions=a.readBytes(l,s,f),s+=f;var h=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<h;c++){var d=l[s];if(s++,u.flags.push(d),(8&d)!=0){var p=l[s];s++;for(var g=0;g<p;g++)u.flags.push(d),c++}}for(u.xs=[],c=0;c<h;c++){var v=(2&u.flags[c])!=0,N=(16&u.flags[c])!=0;v?(u.xs.push(N?l[s]:-l[s]),s++):N?u.xs.push(0):(u.xs.push(a.readShort(l,s)),s+=2)}for(u.ys=[],c=0;c<h;c++)v=(4&u.flags[c])!=0,N=(32&u.flags[c])!=0,v?(u.ys.push(N?l[s]:-l[s]),s++):N?u.ys.push(0):(u.ys.push(a.readShort(l,s)),s+=2);var k=0,b=0;for(c=0;c<h;c++)k+=u.xs[c],b+=u.ys[c],u.xs[c]=k,u.ys[c]=b}else{var y;u.parts=[];do{y=a.readUshort(l,s),s+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(T),T.glyphIndex=a.readUshort(l,s),s+=2,1&y){var S=a.readShort(l,s);s+=2;var w=a.readShort(l,s);s+=2}else S=a.readInt8(l,s),s++,w=a.readInt8(l,s),s++;2&y?(T.m.tx=S,T.m.ty=w):(T.p1=S,T.p2=w),8&y?(T.m.a=T.m.d=a.readF2dot14(l,s),s+=2):64&y?(T.m.a=a.readF2dot14(l,s),s+=2,T.m.d=a.readF2dot14(l,s),s+=2):128&y&&(T.m.a=a.readF2dot14(l,s),s+=2,T.m.b=a.readF2dot14(l,s),s+=2,T.m.c=a.readF2dot14(l,s),s+=2,T.m.d=a.readF2dot14(l,s),s+=2)}while(32&y);if(256&y){var C=a.readUshort(l,s);for(s+=2,u.instr=[],c=0;c<C;c++)u.instr.push(l[s]),s++}}return u},t.GDEF={},t.GDEF.parse=function(r,n,a,l){var s=n;n+=4;var u=t._bin.readUshort(r,n);return{glyphClassDef:u===0?null:t._lctf.readClassDef(r,s+u)}},t.GPOS={},t.GPOS.parse=function(r,n,a,l){return t._lctf.parse(r,n,a,l,t.GPOS.subt)},t.GPOS.subt=function(r,n,a,l){var s=t._bin,u=a,c={};if(c.fmt=s.readUshort(r,a),a+=2,n==1||n==2||n==3||n==7||n==8&&c.fmt<=2){var f=s.readUshort(r,a);a+=2,c.coverage=t._lctf.readCoverage(r,f+u)}if(n==1&&c.fmt==1){var h=s.readUshort(r,a);a+=2,h!=0&&(c.pos=t.GPOS.readValueRecord(r,a,h))}else if(n==2&&c.fmt>=1&&c.fmt<=2){h=s.readUshort(r,a),a+=2;var d=s.readUshort(r,a);a+=2;var p=t._lctf.numOfOnes(h),g=t._lctf.numOfOnes(d);if(c.fmt==1){c.pairsets=[];var v=s.readUshort(r,a);a+=2;for(var N=0;N<v;N++){var k=u+s.readUshort(r,a);a+=2;var b=s.readUshort(r,k);k+=2;for(var y=[],T=0;T<b;T++){var S=s.readUshort(r,k);k+=2,h!=0&&(_=t.GPOS.readValueRecord(r,k,h),k+=2*p),d!=0&&(F=t.GPOS.readValueRecord(r,k,d),k+=2*g),y.push({gid2:S,val1:_,val2:F})}c.pairsets.push(y)}}if(c.fmt==2){var w=s.readUshort(r,a);a+=2;var C=s.readUshort(r,a);a+=2;var L=s.readUshort(r,a);a+=2;var O=s.readUshort(r,a);for(a+=2,c.classDef1=t._lctf.readClassDef(r,u+w),c.classDef2=t._lctf.readClassDef(r,u+C),c.matrix=[],N=0;N<L;N++){var I=[];for(T=0;T<O;T++){var _=null,F=null;h!=0&&(_=t.GPOS.readValueRecord(r,a,h),a+=2*p),d!=0&&(F=t.GPOS.readValueRecord(r,a,d),a+=2*g),I.push({val1:_,val2:F})}c.matrix.push(I)}}}else if(n==4&&c.fmt==1)c.markCoverage=t._lctf.readCoverage(r,s.readUshort(r,a)+u),c.baseCoverage=t._lctf.readCoverage(r,s.readUshort(r,a+2)+u),c.markClassCount=s.readUshort(r,a+4),c.markArray=t.GPOS.readMarkArray(r,s.readUshort(r,a+6)+u),c.baseArray=t.GPOS.readBaseArray(r,s.readUshort(r,a+8)+u,c.markClassCount);else if(n==6&&c.fmt==1)c.mark1Coverage=t._lctf.readCoverage(r,s.readUshort(r,a)+u),c.mark2Coverage=t._lctf.readCoverage(r,s.readUshort(r,a+2)+u),c.markClassCount=s.readUshort(r,a+4),c.mark1Array=t.GPOS.readMarkArray(r,s.readUshort(r,a+6)+u),c.mark2Array=t.GPOS.readBaseArray(r,s.readUshort(r,a+8)+u,c.markClassCount);else{if(n==9&&c.fmt==1){var A=s.readUshort(r,a);a+=2;var J=s.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=A;else if(l.ltype!=A)throw"invalid extension substitution";return t.GPOS.subt(r,l.ltype,u+J)}console.debug("unsupported GPOS table LookupType",n,"format",c.fmt)}return c},t.GPOS.readValueRecord=function(r,n,a){var l=t._bin,s=[];return s.push(1&a?l.readShort(r,n):0),n+=1&a?2:0,s.push(2&a?l.readShort(r,n):0),n+=2&a?2:0,s.push(4&a?l.readShort(r,n):0),n+=4&a?2:0,s.push(8&a?l.readShort(r,n):0),n+=8&a?2:0,s},t.GPOS.readBaseArray=function(r,n,a){var l=t._bin,s=[],u=n,c=l.readUshort(r,n);n+=2;for(var f=0;f<c;f++){for(var h=[],d=0;d<a;d++)h.push(t.GPOS.readAnchorRecord(r,u+l.readUshort(r,n))),n+=2;s.push(h)}return s},t.GPOS.readMarkArray=function(r,n){var a=t._bin,l=[],s=n,u=a.readUshort(r,n);n+=2;for(var c=0;c<u;c++){var f=t.GPOS.readAnchorRecord(r,a.readUshort(r,n+2)+s);f.markClass=a.readUshort(r,n),l.push(f),n+=4}return l},t.GPOS.readAnchorRecord=function(r,n){var a=t._bin,l={};return l.fmt=a.readUshort(r,n),l.x=a.readShort(r,n+2),l.y=a.readShort(r,n+4),l},t.GSUB={},t.GSUB.parse=function(r,n,a,l){return t._lctf.parse(r,n,a,l,t.GSUB.subt)},t.GSUB.subt=function(r,n,a,l){var s=t._bin,u=a,c={};if(c.fmt=s.readUshort(r,a),a+=2,n!=1&&n!=2&&n!=4&&n!=5&&n!=6)return null;if(n==1||n==2||n==4||n==5&&c.fmt<=2||n==6&&c.fmt<=2){var f=s.readUshort(r,a);a+=2,c.coverage=t._lctf.readCoverage(r,u+f)}if(n==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=s.readShort(r,a),a+=2;else if(c.fmt==2){var h=s.readUshort(r,a);a+=2,c.newg=s.readUshorts(r,a,h),a+=2*c.newg.length}}else if(n==2&&c.fmt==1){h=s.readUshort(r,a),a+=2,c.seqs=[];for(var d=0;d<h;d++){var p=s.readUshort(r,a)+u;a+=2;var g=s.readUshort(r,p);c.seqs.push(s.readUshorts(r,p+2,g))}}else if(n==4)for(c.vals=[],h=s.readUshort(r,a),a+=2,d=0;d<h;d++){var v=s.readUshort(r,a);a+=2,c.vals.push(t.GSUB.readLigatureSet(r,u+v))}else if(n==5&&c.fmt==2){if(c.fmt==2){var N=s.readUshort(r,a);a+=2,c.cDef=t._lctf.readClassDef(r,u+N),c.scset=[];var k=s.readUshort(r,a);for(a+=2,d=0;d<k;d++){var b=s.readUshort(r,a);a+=2,c.scset.push(b==0?null:t.GSUB.readSubClassSet(r,u+b))}}}else if(n==6&&c.fmt==3){if(c.fmt==3){for(d=0;d<3;d++){h=s.readUshort(r,a),a+=2;for(var y=[],T=0;T<h;T++)y.push(t._lctf.readCoverage(r,u+s.readUshort(r,a+2*T)));a+=2*h,d==0&&(c.backCvg=y),d==1&&(c.inptCvg=y),d==2&&(c.ahedCvg=y)}h=s.readUshort(r,a),a+=2,c.lookupRec=t.GSUB.readSubstLookupRecords(r,a,h)}}else{if(n==7&&c.fmt==1){var S=s.readUshort(r,a);a+=2;var w=s.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=S;else if(l.ltype!=S)throw"invalid extension substitution";return t.GSUB.subt(r,l.ltype,u+w)}console.debug("unsupported GSUB table LookupType",n,"format",c.fmt)}return c},t.GSUB.readSubClassSet=function(r,n){var a=t._bin.readUshort,l=n,s=[],u=a(r,n);n+=2;for(var c=0;c<u;c++){var f=a(r,n);n+=2,s.push(t.GSUB.readSubClassRule(r,l+f))}return s},t.GSUB.readSubClassRule=function(r,n){var a=t._bin.readUshort,l={},s=a(r,n),u=a(r,n+=2);n+=2,l.input=[];for(var c=0;c<s-1;c++)l.input.push(a(r,n)),n+=2;return l.substLookupRecords=t.GSUB.readSubstLookupRecords(r,n,u),l},t.GSUB.readSubstLookupRecords=function(r,n,a){for(var l=t._bin.readUshort,s=[],u=0;u<a;u++)s.push(l(r,n),l(r,n+2)),n+=4;return s},t.GSUB.readChainSubClassSet=function(r,n){var a=t._bin,l=n,s=[],u=a.readUshort(r,n);n+=2;for(var c=0;c<u;c++){var f=a.readUshort(r,n);n+=2,s.push(t.GSUB.readChainSubClassRule(r,l+f))}return s},t.GSUB.readChainSubClassRule=function(r,n){for(var a=t._bin,l={},s=["backtrack","input","lookahead"],u=0;u<s.length;u++){var c=a.readUshort(r,n);n+=2,u==1&&c--,l[s[u]]=a.readUshorts(r,n,c),n+=2*l[s[u]].length}return c=a.readUshort(r,n),n+=2,l.subst=a.readUshorts(r,n,2*c),n+=2*l.subst.length,l},t.GSUB.readLigatureSet=function(r,n){var a=t._bin,l=n,s=[],u=a.readUshort(r,n);n+=2;for(var c=0;c<u;c++){var f=a.readUshort(r,n);n+=2,s.push(t.GSUB.readLigature(r,l+f))}return s},t.GSUB.readLigature=function(r,n){var a=t._bin,l={chain:[]};l.nglyph=a.readUshort(r,n),n+=2;var s=a.readUshort(r,n);n+=2;for(var u=0;u<s-1;u++)l.chain.push(a.readUshort(r,n)),n+=2;return l},t.head={},t.head.parse=function(r,n,a){var l=t._bin,s={};return l.readFixed(r,n),n+=4,s.fontRevision=l.readFixed(r,n),n+=4,l.readUint(r,n),n+=4,l.readUint(r,n),n+=4,s.flags=l.readUshort(r,n),n+=2,s.unitsPerEm=l.readUshort(r,n),n+=2,s.created=l.readUint64(r,n),n+=8,s.modified=l.readUint64(r,n),n+=8,s.xMin=l.readShort(r,n),n+=2,s.yMin=l.readShort(r,n),n+=2,s.xMax=l.readShort(r,n),n+=2,s.yMax=l.readShort(r,n),n+=2,s.macStyle=l.readUshort(r,n),n+=2,s.lowestRecPPEM=l.readUshort(r,n),n+=2,s.fontDirectionHint=l.readShort(r,n),n+=2,s.indexToLocFormat=l.readShort(r,n),n+=2,s.glyphDataFormat=l.readShort(r,n),n+=2,s},t.hhea={},t.hhea.parse=function(r,n,a){var l=t._bin,s={};return l.readFixed(r,n),n+=4,s.ascender=l.readShort(r,n),n+=2,s.descender=l.readShort(r,n),n+=2,s.lineGap=l.readShort(r,n),n+=2,s.advanceWidthMax=l.readUshort(r,n),n+=2,s.minLeftSideBearing=l.readShort(r,n),n+=2,s.minRightSideBearing=l.readShort(r,n),n+=2,s.xMaxExtent=l.readShort(r,n),n+=2,s.caretSlopeRise=l.readShort(r,n),n+=2,s.caretSlopeRun=l.readShort(r,n),n+=2,s.caretOffset=l.readShort(r,n),n+=2,n+=8,s.metricDataFormat=l.readShort(r,n),n+=2,s.numberOfHMetrics=l.readUshort(r,n),n+=2,s},t.hmtx={},t.hmtx.parse=function(r,n,a,l){for(var s=t._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,h=0;h<l.maxp.numGlyphs;h++)h<l.hhea.numberOfHMetrics&&(c=s.readUshort(r,n),n+=2,f=s.readShort(r,n),n+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},t.kern={},t.kern.parse=function(r,n,a,l){var s=t._bin,u=s.readUshort(r,n);if(n+=2,u==1)return t.kern.parseV1(r,n-2,a,l);var c=s.readUshort(r,n);n+=2;for(var f={glyph1:[],rval:[]},h=0;h<c;h++){n+=2,a=s.readUshort(r,n),n+=2;var d=s.readUshort(r,n);n+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;n=t.kern.readFormat0(r,n,f)}return f},t.kern.parseV1=function(r,n,a,l){var s=t._bin;s.readFixed(r,n),n+=4;var u=s.readUint(r,n);n+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){s.readUint(r,n),n+=4;var h=s.readUshort(r,n);n+=2,s.readUshort(r,n),n+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;n=t.kern.readFormat0(r,n,c)}return c},t.kern.readFormat0=function(r,n,a){var l=t._bin,s=-1,u=l.readUshort(r,n);n+=2,l.readUshort(r,n),n+=2,l.readUshort(r,n),n+=2,l.readUshort(r,n),n+=2;for(var c=0;c<u;c++){var f=l.readUshort(r,n);n+=2;var h=l.readUshort(r,n);n+=2;var d=l.readShort(r,n);n+=2,f!=s&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var p=a.rval[a.rval.length-1];p.glyph2.push(h),p.vals.push(d),s=f}return n},t.loca={},t.loca.parse=function(r,n,a,l){var s=t._bin,u=[],c=l.head.indexToLocFormat,f=l.maxp.numGlyphs+1;if(c==0)for(var h=0;h<f;h++)u.push(s.readUshort(r,n+(h<<1))<<1);if(c==1)for(h=0;h<f;h++)u.push(s.readUint(r,n+(h<<2)));return u},t.maxp={},t.maxp.parse=function(r,n,a){var l=t._bin,s={},u=l.readUint(r,n);return n+=4,s.numGlyphs=l.readUshort(r,n),n+=2,u==65536&&(s.maxPoints=l.readUshort(r,n),n+=2,s.maxContours=l.readUshort(r,n),n+=2,s.maxCompositePoints=l.readUshort(r,n),n+=2,s.maxCompositeContours=l.readUshort(r,n),n+=2,s.maxZones=l.readUshort(r,n),n+=2,s.maxTwilightPoints=l.readUshort(r,n),n+=2,s.maxStorage=l.readUshort(r,n),n+=2,s.maxFunctionDefs=l.readUshort(r,n),n+=2,s.maxInstructionDefs=l.readUshort(r,n),n+=2,s.maxStackElements=l.readUshort(r,n),n+=2,s.maxSizeOfInstructions=l.readUshort(r,n),n+=2,s.maxComponentElements=l.readUshort(r,n),n+=2,s.maxComponentDepth=l.readUshort(r,n),n+=2),s},t.name={},t.name.parse=function(r,n,a){var l=t._bin,s={};l.readUshort(r,n),n+=2;var u=l.readUshort(r,n);n+=2,l.readUshort(r,n);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=n+=2,d=0;d<u;d++){var p=l.readUshort(r,n);n+=2;var g=l.readUshort(r,n);n+=2;var v=l.readUshort(r,n);n+=2;var N=l.readUshort(r,n);n+=2;var k=l.readUshort(r,n);n+=2;var b=l.readUshort(r,n);n+=2;var y,T=f[N],S=h+12*u+b;if(p==0)y=l.readUnicode(r,S,k/2);else if(p==3&&g==0)y=l.readUnicode(r,S,k/2);else if(g==0)y=l.readASCII(r,S,k);else if(g==1)y=l.readUnicode(r,S,k/2);else if(g==3)y=l.readUnicode(r,S,k/2);else{if(p!=1)throw"unknown encoding "+g+", platformID: "+p;y=l.readASCII(r,S,k),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var w="p"+p+","+v.toString(16);s[w]==null&&(s[w]={}),s[w][T!==void 0?T:N]=y,s[w]._lang=v}for(var C in s)if(s[C].postScriptName!=null&&s[C]._lang==1033)return s[C];for(var C in s)if(s[C].postScriptName!=null&&s[C]._lang==0)return s[C];for(var C in s)if(s[C].postScriptName!=null&&s[C]._lang==3084)return s[C];for(var C in s)if(s[C].postScriptName!=null)return s[C];for(var C in s){c=C;break}return console.debug("returning name table with languageID "+s[c]._lang),s[c]},t["OS/2"]={},t["OS/2"].parse=function(r,n,a){var l=t._bin.readUshort(r,n);n+=2;var s={};if(l==0)t["OS/2"].version0(r,n,s);else if(l==1)t["OS/2"].version1(r,n,s);else if(l==2||l==3||l==4)t["OS/2"].version2(r,n,s);else{if(l!=5)throw"unknown OS/2 table version: "+l;t["OS/2"].version5(r,n,s)}return s},t["OS/2"].version0=function(r,n,a){var l=t._bin;return a.xAvgCharWidth=l.readShort(r,n),n+=2,a.usWeightClass=l.readUshort(r,n),n+=2,a.usWidthClass=l.readUshort(r,n),n+=2,a.fsType=l.readUshort(r,n),n+=2,a.ySubscriptXSize=l.readShort(r,n),n+=2,a.ySubscriptYSize=l.readShort(r,n),n+=2,a.ySubscriptXOffset=l.readShort(r,n),n+=2,a.ySubscriptYOffset=l.readShort(r,n),n+=2,a.ySuperscriptXSize=l.readShort(r,n),n+=2,a.ySuperscriptYSize=l.readShort(r,n),n+=2,a.ySuperscriptXOffset=l.readShort(r,n),n+=2,a.ySuperscriptYOffset=l.readShort(r,n),n+=2,a.yStrikeoutSize=l.readShort(r,n),n+=2,a.yStrikeoutPosition=l.readShort(r,n),n+=2,a.sFamilyClass=l.readShort(r,n),n+=2,a.panose=l.readBytes(r,n,10),n+=10,a.ulUnicodeRange1=l.readUint(r,n),n+=4,a.ulUnicodeRange2=l.readUint(r,n),n+=4,a.ulUnicodeRange3=l.readUint(r,n),n+=4,a.ulUnicodeRange4=l.readUint(r,n),n+=4,a.achVendID=[l.readInt8(r,n),l.readInt8(r,n+1),l.readInt8(r,n+2),l.readInt8(r,n+3)],n+=4,a.fsSelection=l.readUshort(r,n),n+=2,a.usFirstCharIndex=l.readUshort(r,n),n+=2,a.usLastCharIndex=l.readUshort(r,n),n+=2,a.sTypoAscender=l.readShort(r,n),n+=2,a.sTypoDescender=l.readShort(r,n),n+=2,a.sTypoLineGap=l.readShort(r,n),n+=2,a.usWinAscent=l.readUshort(r,n),n+=2,a.usWinDescent=l.readUshort(r,n),n+=2},t["OS/2"].version1=function(r,n,a){var l=t._bin;return n=t["OS/2"].version0(r,n,a),a.ulCodePageRange1=l.readUint(r,n),n+=4,a.ulCodePageRange2=l.readUint(r,n),n+=4},t["OS/2"].version2=function(r,n,a){var l=t._bin;return n=t["OS/2"].version1(r,n,a),a.sxHeight=l.readShort(r,n),n+=2,a.sCapHeight=l.readShort(r,n),n+=2,a.usDefault=l.readUshort(r,n),n+=2,a.usBreak=l.readUshort(r,n),n+=2,a.usMaxContext=l.readUshort(r,n),n+=2},t["OS/2"].version5=function(r,n,a){var l=t._bin;return n=t["OS/2"].version2(r,n,a),a.usLowerOpticalPointSize=l.readUshort(r,n),n+=2,a.usUpperOpticalPointSize=l.readUshort(r,n),n+=2},t.post={},t.post.parse=function(r,n,a){var l=t._bin,s={};return s.version=l.readFixed(r,n),n+=4,s.italicAngle=l.readFixed(r,n),n+=4,s.underlinePosition=l.readShort(r,n),n+=2,s.underlineThickness=l.readShort(r,n),n+=2,s},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(r,n){var a=r.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var s=a.tables[l];if(s.format==0)return n>=s.map.length?0:s.map[n];if(s.format==4){for(var u=-1,c=0;c<s.endCount.length;c++)if(n<=s.endCount[c]){u=c;break}return u==-1||s.startCount[u]>n?0:65535&(s.idRangeOffset[u]!=0?s.glyphIdArray[n-s.startCount[u]+(s.idRangeOffset[u]>>1)-(s.idRangeOffset.length-u)]:n+s.idDelta[u])}if(s.format==12){if(n>s.groups[s.groups.length-1][1])return 0;for(c=0;c<s.groups.length;c++){var f=s.groups[c];if(f[0]<=n&&n<=f[1])return f[2]+(n-f[0])}return 0}throw"unknown cmap table format "+s.format},t.U.glyphToPath=function(r,n){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[n]){var l=r.SVG.entries[n];return l==null?a:(typeof l=="string"&&(l=t.SVG.toPath(l),r.SVG.entries[n]=l),l)}if(r.CFF){var s={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,c=r.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=n;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}t.U._drawCFF(r.CFF.CharStrings[n],s,u,c,a)}else r.glyf&&t.U._drawGlyf(n,r,a);return a},t.U._drawGlyf=function(r,n,a){var l=n.glyf[r];l==null&&(l=n.glyf[r]=t.glyf._parseGlyf(n,r)),l!=null&&(l.noc>-1?t.U._simpleGlyph(l,a):t.U._compoGlyph(l,n,a))},t.U._simpleGlyph=function(r,n){for(var a=0;a<r.noc;a++){for(var l=a==0?0:r.endPts[a-1]+1,s=r.endPts[a],u=l;u<=s;u++){var c=u==l?s:u-1,f=u==s?l:u+1,h=1&r.flags[u],d=1&r.flags[c],p=1&r.flags[f],g=r.xs[u],v=r.ys[u];if(u==l)if(h){if(!d){t.U.P.moveTo(n,g,v);continue}t.U.P.moveTo(n,r.xs[c],r.ys[c])}else d?t.U.P.moveTo(n,r.xs[c],r.ys[c]):t.U.P.moveTo(n,(r.xs[c]+g)/2,(r.ys[c]+v)/2);h?d&&t.U.P.lineTo(n,g,v):p?t.U.P.qcurveTo(n,g,v,r.xs[f],r.ys[f]):t.U.P.qcurveTo(n,g,v,(g+r.xs[f])/2,(v+r.ys[f])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(r,n,a){for(var l=0;l<r.parts.length;l++){var s={cmds:[],crds:[]},u=r.parts[l];t.U._drawGlyf(u.glyphIndex,n,s);for(var c=u.m,f=0;f<s.crds.length;f+=2){var h=s.crds[f],d=s.crds[f+1];a.crds.push(h*c.a+d*c.b+c.tx),a.crds.push(h*c.c+d*c.d+c.ty)}for(f=0;f<s.cmds.length;f++)a.cmds.push(s.cmds[f])}},t.U._getGlyphClass=function(r,n){var a=t._lctf.getInterval(n,r);return a==-1?0:n[a+2]},t.U._applySubs=function(r,n,a,l){for(var s=r.length-n-1,u=0;u<a.tabs.length;u++)if(a.tabs[u]!=null){var c,f=a.tabs[u];if(!f.coverage||(c=t._lctf.coverageIndex(f.coverage,r[n]))!=-1){if(a.ltype==1)r[n],f.fmt==1?r[n]=r[n]+f.delta:r[n]=f.newg[c];else if(a.ltype==4)for(var h=f.vals[c],d=0;d<h.length;d++){var p=h[d],g=p.chain.length;if(!(g>s)){for(var v=!0,N=0,k=0;k<g;k++){for(;r[n+N+(1+k)]==-1;)N++;p.chain[k]!=r[n+N+(1+k)]&&(v=!1)}if(v){for(r[n]=p.nglyph,k=0;k<g+N;k++)r[n+k+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var b=t._lctf.getInterval(f.cDef,r[n]),y=f.cDef[b+2],T=f.scset[y],S=0;S<T.length;S++){var w=T[S],C=w.input;if(!(C.length>s)){for(v=!0,k=0;k<C.length;k++){var L=t._lctf.getInterval(f.cDef,r[n+1+k]);if(b==-1&&f.cDef[L+2]!=C[k]){v=!1;break}}if(v){var O=w.substLookupRecords;for(d=0;d<O.length;d+=2)O[d],O[d+1]}}}else if(a.ltype==6&&f.fmt==3){if(!t.U._glsCovered(r,f.backCvg,n-f.backCvg.length)||!t.U._glsCovered(r,f.inptCvg,n)||!t.U._glsCovered(r,f.ahedCvg,n+f.inptCvg.length))continue;var I=f.lookupRec;for(S=0;S<I.length;S+=2){b=I[S];var _=l[I[S+1]];t.U._applySubs(r,n+b,_,l)}}}}},t.U._glsCovered=function(r,n,a){for(var l=0;l<n.length;l++)if(t._lctf.coverageIndex(n[l],r[a+l])==-1)return!1;return!0},t.U.glyphsToPath=function(r,n,a){for(var l={cmds:[],crds:[]},s=0,u=0;u<n.length;u++){var c=n[u];if(c!=-1){for(var f=u<n.length-1&&n[u+1]!=-1?n[u+1]:0,h=t.U.glyphToPath(r,c),d=0;d<h.crds.length;d+=2)l.crds.push(h.crds[d]+s),l.crds.push(h.crds[d+1]);for(a&&l.cmds.push(a),d=0;d<h.cmds.length;d++)l.cmds.push(h.cmds[d]);a&&l.cmds.push("X"),s+=r.hmtx.aWidth[c],u<n.length-1&&(s+=t.U.getPairAdjustment(r,c,f))}}return l},t.U.P={},t.U.P.moveTo=function(r,n,a){r.cmds.push("M"),r.crds.push(n,a)},t.U.P.lineTo=function(r,n,a){r.cmds.push("L"),r.crds.push(n,a)},t.U.P.curveTo=function(r,n,a,l,s,u,c){r.cmds.push("C"),r.crds.push(n,a,l,s,u,c)},t.U.P.qcurveTo=function(r,n,a,l,s){r.cmds.push("Q"),r.crds.push(n,a,l,s)},t.U.P.closePath=function(r){r.cmds.push("Z")},t.U._drawCFF=function(r,n,a,l,s){for(var u=n.stack,c=n.nStems,f=n.haveWidth,h=n.width,d=n.open,p=0,g=n.x,v=n.y,N=0,k=0,b=0,y=0,T=0,S=0,w=0,C=0,L=0,O=0,I={val:0,size:0};p<r.length;){t.CFF.getCharString(r,p,I);var _=I.val;if(p+=I.size,_=="o1"||_=="o18")u.length%2!=0&&!f&&(h=u.shift()+l.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(_=="o3"||_=="o23")u.length%2!=0&&!f&&(h=u.shift()+l.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(_=="o4")u.length>1&&!f&&(h=u.shift()+l.nominalWidthX,f=!0),d&&t.U.P.closePath(s),v+=u.pop(),t.U.P.moveTo(s,g,v),d=!0;else if(_=="o5")for(;u.length>0;)g+=u.shift(),v+=u.shift(),t.U.P.lineTo(s,g,v);else if(_=="o6"||_=="o7")for(var F=u.length,A=_=="o6",J=0;J<F;J++){var Y=u.shift();A?g+=Y:v+=Y,A=!A,t.U.P.lineTo(s,g,v)}else if(_=="o8"||_=="o24"){F=u.length;for(var $=0;$+6<=F;)N=g+u.shift(),k=v+u.shift(),b=N+u.shift(),y=k+u.shift(),g=b+u.shift(),v=y+u.shift(),t.U.P.curveTo(s,N,k,b,y,g,v),$+=6;_=="o24"&&(g+=u.shift(),v+=u.shift(),t.U.P.lineTo(s,g,v))}else{if(_=="o11")break;if(_=="o1234"||_=="o1235"||_=="o1236"||_=="o1237")_=="o1234"&&(k=v,b=(N=g+u.shift())+u.shift(),O=y=k+u.shift(),S=y,C=v,g=(w=(T=(L=b+u.shift())+u.shift())+u.shift())+u.shift(),t.U.P.curveTo(s,N,k,b,y,L,O),t.U.P.curveTo(s,T,S,w,C,g,v)),_=="o1235"&&(N=g+u.shift(),k=v+u.shift(),b=N+u.shift(),y=k+u.shift(),L=b+u.shift(),O=y+u.shift(),T=L+u.shift(),S=O+u.shift(),w=T+u.shift(),C=S+u.shift(),g=w+u.shift(),v=C+u.shift(),u.shift(),t.U.P.curveTo(s,N,k,b,y,L,O),t.U.P.curveTo(s,T,S,w,C,g,v)),_=="o1236"&&(N=g+u.shift(),k=v+u.shift(),b=N+u.shift(),O=y=k+u.shift(),S=y,w=(T=(L=b+u.shift())+u.shift())+u.shift(),C=S+u.shift(),g=w+u.shift(),t.U.P.curveTo(s,N,k,b,y,L,O),t.U.P.curveTo(s,T,S,w,C,g,v)),_=="o1237"&&(N=g+u.shift(),k=v+u.shift(),b=N+u.shift(),y=k+u.shift(),L=b+u.shift(),O=y+u.shift(),T=L+u.shift(),S=O+u.shift(),w=T+u.shift(),C=S+u.shift(),Math.abs(w-g)>Math.abs(C-v)?g=w+u.shift():v=C+u.shift(),t.U.P.curveTo(s,N,k,b,y,L,O),t.U.P.curveTo(s,T,S,w,C,g,v));else if(_=="o14"){if(u.length>0&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),u.length==4){var ne=u.shift(),j=u.shift(),W=u.shift(),m=u.shift(),U=t.CFF.glyphBySE(a,W),R=t.CFF.glyphBySE(a,m);t.U._drawCFF(a.CharStrings[U],n,a,l,s),n.x=ne,n.y=j,t.U._drawCFF(a.CharStrings[R],n,a,l,s)}d&&(t.U.P.closePath(s),d=!1)}else if(_=="o19"||_=="o20")u.length%2!=0&&!f&&(h=u.shift()+l.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,p+=c+7>>3;else if(_=="o21")u.length>2&&!f&&(h=u.shift()+l.nominalWidthX,f=!0),v+=u.pop(),g+=u.pop(),d&&t.U.P.closePath(s),t.U.P.moveTo(s,g,v),d=!0;else if(_=="o22")u.length>1&&!f&&(h=u.shift()+l.nominalWidthX,f=!0),g+=u.pop(),d&&t.U.P.closePath(s),t.U.P.moveTo(s,g,v),d=!0;else if(_=="o25"){for(;u.length>6;)g+=u.shift(),v+=u.shift(),t.U.P.lineTo(s,g,v);N=g+u.shift(),k=v+u.shift(),b=N+u.shift(),y=k+u.shift(),g=b+u.shift(),v=y+u.shift(),t.U.P.curveTo(s,N,k,b,y,g,v)}else if(_=="o26")for(u.length%2&&(g+=u.shift());u.length>0;)N=g,k=v+u.shift(),g=b=N+u.shift(),v=(y=k+u.shift())+u.shift(),t.U.P.curveTo(s,N,k,b,y,g,v);else if(_=="o27")for(u.length%2&&(v+=u.shift());u.length>0;)k=v,b=(N=g+u.shift())+u.shift(),y=k+u.shift(),g=b+u.shift(),v=y,t.U.P.curveTo(s,N,k,b,y,g,v);else if(_=="o10"||_=="o29"){var P=_=="o10"?l:a;if(u.length==0)console.debug("error: empty stack");else{var D=u.pop(),V=P.Subrs[D+P.Bias];n.x=g,n.y=v,n.nStems=c,n.haveWidth=f,n.width=h,n.open=d,t.U._drawCFF(V,n,a,l,s),g=n.x,v=n.y,c=n.nStems,f=n.haveWidth,h=n.width,d=n.open}}else if(_=="o30"||_=="o31"){var G=u.length,H=($=0,_=="o31");for($+=G-(F=-3&G);$<F;)H?(k=v,b=(N=g+u.shift())+u.shift(),v=(y=k+u.shift())+u.shift(),F-$==5?(g=b+u.shift(),$++):g=b,H=!1):(N=g,k=v+u.shift(),b=N+u.shift(),y=k+u.shift(),g=b+u.shift(),F-$==5?(v=y+u.shift(),$++):v=y,H=!0),t.U.P.curveTo(s,N,k,b,y,g,v),$+=4}else{if((_+"").charAt(0)=="o")throw console.debug("Unknown operation: "+_,r),_;u.push(_)}}}n.x=g,n.y=v,n.nStems=c,n.haveWidth=f,n.width=h,n.open=d};var i=t,o={Typr:i};return e.Typr=i,e.default=o,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function al(){return function(e){var t=Uint8Array,i=Uint16Array,o=Uint32Array,r=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(_,F){for(var A=new i(31),J=0;J<31;++J)A[J]=F+=1<<_[J-1];var Y=new o(A[30]);for(J=1;J<30;++J)for(var $=A[J];$<A[J+1];++$)Y[$]=$-A[J]<<5|J;return[A,Y]},s=l(r,2),u=s[0],c=s[1];u[28]=258,c[258]=28;for(var f=l(n,0)[0],h=new i(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(_,F,A){for(var J=_.length,Y=0,$=new i(F);Y<J;++Y)++$[_[Y]-1];var ne,j=new i(F);for(Y=0;Y<F;++Y)j[Y]=j[Y-1]+$[Y-1]<<1;{ne=new i(1<<F);var W=15-F;for(Y=0;Y<J;++Y)if(_[Y])for(var m=Y<<4|_[Y],U=F-_[Y],R=j[_[Y]-1]++<<U,P=R|(1<<U)-1;R<=P;++R)ne[h[R]>>>W]=m}return ne},v=new t(288);for(d=0;d<144;++d)v[d]=8;for(d=144;d<256;++d)v[d]=9;for(d=256;d<280;++d)v[d]=7;for(d=280;d<288;++d)v[d]=8;var N=new t(32);for(d=0;d<32;++d)N[d]=5;var k=g(v,9),b=g(N,5),y=function(_){for(var F=_[0],A=1;A<_.length;++A)_[A]>F&&(F=_[A]);return F},T=function(_,F,A){var J=F/8|0;return(_[J]|_[J+1]<<8)>>(7&F)&A},S=function(_,F){var A=F/8|0;return(_[A]|_[A+1]<<8|_[A+2]<<16)>>(7&F)},w=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],C=function(_,F,A){var J=new Error(F||w[_]);if(J.code=_,Error.captureStackTrace&&Error.captureStackTrace(J,C),!A)throw J;return J},L=function(_,F,A){var J=_.length;if(!J||A&&!A.l&&J<5)return F||new t(0);var Y=!F||A,$=!A||A.i;A||(A={}),F||(F=new t(3*J));var ne,j=function(fe){var De=F.length;if(fe>De){var Me=new t(Math.max(2*De,fe));Me.set(F),F=Me}},W=A.f||0,m=A.p||0,U=A.b||0,R=A.l,P=A.d,D=A.m,V=A.n,G=8*J;do{if(!R){A.f=W=T(_,m,1);var H=T(_,m+1,3);if(m+=3,!H){var E=_[(ie=((ne=m)/8|0)+(7&ne&&1)+4)-4]|_[ie-3]<<8,X=ie+E;if(X>J){$&&C(0);break}Y&&j(U+E),F.set(_.subarray(ie,X),U),A.b=U+=E,A.p=m=8*X;continue}if(H==1)R=k,P=b,D=9,V=5;else if(H==2){var B=T(_,m,31)+257,x=T(_,m+10,15)+4,se=B+T(_,m+5,31)+1;m+=14;for(var Z=new t(se),K=new t(19),Q=0;Q<x;++Q)K[a[Q]]=T(_,m+3*Q,7);m+=3*x;var re=y(K),q=(1<<re)-1,ae=g(K,re);for(Q=0;Q<se;){var ie,z=ae[T(_,m,q)];if(m+=15&z,(ie=z>>>4)<16)Z[Q++]=ie;else{var pe=0,te=0;for(ie==16?(te=3+T(_,m,3),m+=2,pe=Z[Q-1]):ie==17?(te=3+T(_,m,7),m+=3):ie==18&&(te=11+T(_,m,127),m+=7);te--;)Z[Q++]=pe}}var le=Z.subarray(0,B),ee=Z.subarray(B);D=y(le),V=y(ee),R=g(le,D),P=g(ee,V)}else C(1);if(m>G){$&&C(0);break}}Y&&j(U+131072);for(var be=(1<<D)-1,oe=(1<<V)-1,ue=m;;ue=m){var he=(pe=R[S(_,m)&be])>>>4;if((m+=15&pe)>G){$&&C(0);break}if(pe||C(2),he<256)F[U++]=he;else{if(he==256){ue=m,R=null;break}var ge=he-254;if(he>264){var Te=r[Q=he-257];ge=T(_,m,(1<<Te)-1)+u[Q],m+=Te}var Fe=P[S(_,m)&oe],me=Fe>>>4;if(Fe||C(3),m+=15&Fe,ee=f[me],me>3&&(Te=n[me],ee+=S(_,m)&(1<<Te)-1,m+=Te),m>G){$&&C(0);break}Y&&j(U+131072);for(var ye=U+ge;U<ye;U+=4)F[U]=F[U-ee],F[U+1]=F[U+1-ee],F[U+2]=F[U+2-ee],F[U+3]=F[U+3-ee];U=ye}}A.l=R,A.p=ue,A.b=U,R&&(W=1,A.m=D,A.d=P,A.n=V)}while(!W);return U==F.length?F:function(fe,De,Me){(Me==null||Me>fe.length)&&(Me=fe.length);var je=new(fe instanceof i?i:fe instanceof o?o:t)(Me-De);return je.set(fe.subarray(De,Me)),je}(F,0,U)},O=new t(0),I=typeof TextDecoder<"u"&&new TextDecoder;try{I.decode(O,{stream:!0})}catch{}return e.convert_streams=function(_){var F=new DataView(_),A=0;function J(){var B=F.getUint16(A);return A+=2,B}function Y(){var B=F.getUint32(A);return A+=4,B}function $(B){E.setUint16(X,B),X+=2}function ne(B){E.setUint32(X,B),X+=4}for(var j={signature:Y(),flavor:Y(),length:Y(),numTables:J(),reserved:J(),totalSfntSize:Y(),majorVersion:J(),minorVersion:J(),metaOffset:Y(),metaLength:Y(),metaOrigLength:Y(),privOffset:Y(),privLength:Y()},W=0;Math.pow(2,W)<=j.numTables;)W++;W--;for(var m=16*Math.pow(2,W),U=16*j.numTables-m,R=12,P=[],D=0;D<j.numTables;D++)P.push({tag:Y(),offset:Y(),compLength:Y(),origLength:Y(),origChecksum:Y()}),R+=16;var V,G=new Uint8Array(12+16*P.length+P.reduce(function(B,x){return B+x.origLength+4},0)),H=G.buffer,E=new DataView(H),X=0;return ne(j.flavor),$(j.numTables),$(m),$(W),$(U),P.forEach(function(B){ne(B.tag),ne(B.origChecksum),ne(R),ne(B.origLength),B.outOffset=R,(R+=B.origLength)%4!=0&&(R+=4-R%4)}),P.forEach(function(B){var x,se=_.slice(B.offset,B.offset+B.compLength);if(B.compLength!=B.origLength){var Z=new Uint8Array(B.origLength);x=new Uint8Array(se,2),L(x,Z)}else Z=new Uint8Array(se);G.set(Z,B.outOffset);var K=0;(R=B.outOffset+B.origLength)%4!=0&&(K=4-R%4),G.set(new Uint8Array(K).buffer,B.outOffset+B.origLength),V=R+K}),H.slice(0,V)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams}function ol(e,t){const i={M:2,L:2,Q:4,C:6,Z:0},o={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,n=2,a=4,l=8,s=16,u=32;let c;function f(w){if(!c){const C={R:n,L:r,D:a,C:s,U:u,T:l};c=new Map;for(let L in o){let O=0;o[L].split(",").forEach(I=>{let[_,F]=I.split("+");_=parseInt(_,36),F=F?parseInt(F,36):0,c.set(O+=_,C[L]);for(let A=F;A--;)c.set(++O,C[L])})}}return c.get(w)||u}const h=1,d=2,p=3,g=4,v=[null,"isol","init","fina","medi"];function N(w){const C=new Uint8Array(w.length);let L=u,O=h,I=-1;for(let _=0;_<w.length;_++){const F=w.codePointAt(_);let A=f(F)|0,J=h;A&l||(L&(r|a|s)?A&(n|a|s)?(J=p,(O===h||O===p)&&C[I]++):A&(r|u)&&(O===d||O===g)&&C[I]--:L&(n|u)&&(O===d||O===g)&&C[I]--,O=C[_]=J,L=A,I=_,F>65535&&_++)}return C}function k(w,C){const L=[];for(let I=0;I<C.length;I++){const _=C.codePointAt(I);_>65535&&I++,L.push(e.U.codeToGlyph(w,_))}const O=w.GSUB;if(O){const{lookupList:I,featureList:_}=O;let F;const A=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,J=[];_.forEach(Y=>{if(A.test(Y.tag))for(let $=0;$<Y.tab.length;$++){if(J[Y.tab[$]])continue;J[Y.tab[$]]=!0;const ne=I[Y.tab[$]],j=/^(isol|init|fina|medi)$/.test(Y.tag);j&&!F&&(F=N(C));for(let W=0;W<L.length;W++)(!F||!j||v[F[W]]===Y.tag)&&e.U._applySubs(L,W,ne,I)}})}return L}function b(w,C){const L=new Int16Array(C.length*3);let O=0;for(;O<C.length;O++){const A=C[O];if(A===-1)continue;L[O*3+2]=w.hmtx.aWidth[A];const J=w.GPOS;if(J){const Y=J.lookupList;for(let $=0;$<Y.length;$++){const ne=Y[$];for(let j=0;j<ne.tabs.length;j++){const W=ne.tabs[j];if(ne.ltype===1){if(e._lctf.coverageIndex(W.coverage,A)!==-1&&W.pos){F(W.pos,O);break}}else if(ne.ltype===2){let m=null,U=I();if(U!==-1){const R=e._lctf.coverageIndex(W.coverage,C[U]);if(R!==-1){if(W.fmt===1){const P=W.pairsets[R];for(let D=0;D<P.length;D++)P[D].gid2===A&&(m=P[D])}else if(W.fmt===2){const P=e.U._getGlyphClass(C[U],W.classDef1),D=e.U._getGlyphClass(A,W.classDef2);m=W.matrix[P][D]}if(m){m.val1&&F(m.val1,U),m.val2&&F(m.val2,O);break}}}}else if(ne.ltype===4){const m=e._lctf.coverageIndex(W.markCoverage,A);if(m!==-1){const U=I(_),R=U===-1?-1:e._lctf.coverageIndex(W.baseCoverage,C[U]);if(R!==-1){const P=W.markArray[m],D=W.baseArray[R][P.markClass];L[O*3]=D.x-P.x+L[U*3]-L[U*3+2],L[O*3+1]=D.y-P.y+L[U*3+1];break}}}else if(ne.ltype===6){const m=e._lctf.coverageIndex(W.mark1Coverage,A);if(m!==-1){const U=I();if(U!==-1){const R=C[U];if(y(w,R)===3){const P=e._lctf.coverageIndex(W.mark2Coverage,R);if(P!==-1){const D=W.mark1Array[m],V=W.mark2Array[P][D.markClass];L[O*3]=V.x-D.x+L[U*3]-L[U*3+2],L[O*3+1]=V.y-D.y+L[U*3+1];break}}}}}}}}else if(w.kern&&!w.cff){const Y=I();if(Y!==-1){const $=w.kern.glyph1.indexOf(C[Y]);if($!==-1){const ne=w.kern.rval[$].glyph2.indexOf(A);ne!==-1&&(L[Y*3+2]+=w.kern.rval[$].vals[ne])}}}}return L;function I(A){for(let J=O-1;J>=0;J--)if(C[J]!==-1&&(!A||A(C[J])))return J;return-1}function _(A){return y(w,A)===1}function F(A,J){for(let Y=0;Y<3;Y++)L[J*3+Y]+=A[Y]||0}}function y(w,C){const L=w.GDEF&&w.GDEF.glyphClassDef;return L?e.U._getGlyphClass(C,L):0}function T(...w){for(let C=0;C<w.length;C++)if(typeof w[C]=="number")return w[C]}function S(w){const C=Object.create(null),L=w["OS/2"],O=w.hhea,I=w.head.unitsPerEm,_=T(L&&L.sTypoAscender,O&&O.ascender,I),F={unitsPerEm:I,ascender:_,descender:T(L&&L.sTypoDescender,O&&O.descender,0),capHeight:T(L&&L.sCapHeight,_),xHeight:T(L&&L.sxHeight,_),lineGap:T(L&&L.sTypoLineGap,O&&O.lineGap),supportsCodePoint(A){return e.U.codeToGlyph(w,A)>0},forEachGlyph(A,J,Y,$){let ne=0;const j=1/F.unitsPerEm*J,W=k(w,A);let m=0;const U=b(w,W);return W.forEach((R,P)=>{if(R!==-1){let D=C[R];if(!D){const{cmds:V,crds:G}=e.U.glyphToPath(w,R);let H="",E=0;for(let Z=0,K=V.length;Z<K;Z++){const Q=i[V[Z]];H+=V[Z];for(let re=1;re<=Q;re++)H+=(re>1?",":"")+G[E++]}let X,B,x,se;if(G.length){X=B=1/0,x=se=-1/0;for(let Z=0,K=G.length;Z<K;Z+=2){let Q=G[Z],re=G[Z+1];Q<X&&(X=Q),re<B&&(B=re),Q>x&&(x=Q),re>se&&(se=re)}}else X=x=B=se=0;D=C[R]={index:R,advanceWidth:w.hmtx.aWidth[R],xMin:X,yMin:B,xMax:x,yMax:se,path:H}}$.call(null,D,ne+U[P*3]*j,U[P*3+1]*j,m),ne+=U[P*3+2]*j,Y&&(ne+=Y*J)}m+=A.codePointAt(m)>65535?2:1}),ne}};return F}return function(C){const L=new Uint8Array(C,0,4),O=e._bin.readASCII(L,0,4);if(O==="wOFF")C=t(C);else if(O==="wOF2")throw new Error("woff2 fonts not supported");return S(e.parse(C)[0])}}const sl=Yt({name:"Typr Font Parser",dependencies:[il,al,ol],init(e,t,i){const o=e(),r=t();return i(o,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function ll(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(b){var y=b>>5;this.buckets.set(y,(this.buckets.get(y)||0)|1<<(31&b))},t.prototype.has=function(b){var y=this.buckets.get(b>>5);return y!==void 0&&(y&1<<(31&b))!=0},t.prototype.serialize=function(){var b=[];return this.buckets.forEach(function(y,T){b.push((+T).toString(36)+":"+y.toString(36))}),b.join(",")},t.prototype.deserialize=function(b){var y=this;this.buckets.clear(),b.split(",").forEach(function(T){var S=T.split(":");y.buckets.set(parseInt(S[0],36),parseInt(S[1],36))})};var i=Math.pow(2,8),o=i-1,r=~o;function n(b){var y=function(S){return S&r}(b).toString(16),T=function(S){return(S&r)+i-1}(b).toString(16);return"codepoint-index/plane"+(b>>16)+"/"+y+"-"+T+".json"}function a(b,y){var T=b&o,S=y.codePointAt(T/6|0);return((S=(S||48)-48)&1<<T%6)!=0}function l(b,y){var T;(T=b,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(S){return S.split("-").map(function(w){return parseInt(w.trim(),16)})})).forEach(function(S){var w=S[0],C=S[1];C===void 0&&(C=w),y(w,C)})}function s(b,y){l(b,function(T,S){for(var w=T;w<=S;w++)y(w)})}var u={},c={},f=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(b){var y=f.get(b);return y||(y=new t,s(b.ranges,function(T){return y.add(T)}),f.set(b,y)),y}var p,g=new Map;function v(b,y,T){return b[y]?y:b[T]?T:function(S){for(var w in S)return w}(b)}function N(b,y){var T=y;if(!b.includes(T)){T=1/0;for(var S=0;S<b.length;S++)Math.abs(b[S]-y)<Math.abs(T-y)&&(T=b[S])}return T}function k(b){return p||(p=new Set,s("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(y){p.add(y)})),p.has(b)}return e.CodePointSet=t,e.clearCache=function(){u={},c={}},e.getFontsForString=function(b,y){y===void 0&&(y={});var T,S=y.lang;S===void 0&&(S=new RegExp("\\p{Script=Hangul}","u").test(T=b)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(T)?"ja":"en");var w=y.category;w===void 0&&(w="sans-serif");var C=y.style;C===void 0&&(C="normal");var L=y.weight;L===void 0&&(L=400);var O=(y.dataUrl||h).replace(/\/$/g,""),I=new Map,_=new Uint8Array(b.length),F={},A={},J=new Array(b.length),Y=new Map,$=!1;function ne(m){var U=g.get(m);return U||(U=fetch(O+"/"+m).then(function(R){if(!R.ok)throw new Error(R.statusText);return R.json().then(function(P){if(!Array.isArray(P)||P[0]!==1)throw new Error("Incorrect schema version; need 1, got "+P[0]);return P[1]})}).catch(function(R){if(O!==h)return $||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+O+'", trying default CDN. '+R.message),$=!0),O=h,g.delete(m),ne(m);throw R}),g.set(m,U)),U}for(var j=function(m){var U=b.codePointAt(m),R=n(U);J[m]=R,u[R]||Y.has(R)||Y.set(R,ne(R).then(function(P){u[R]=P})),U>65535&&(m++,W=m)},W=0;W<b.length;W++)j(W);return Promise.all(Y.values()).then(function(){Y.clear();for(var m=function(R){var P=b.codePointAt(R),D=null,V=u[J[R]],G=void 0;for(var H in V){var E=A[H];if(E===void 0&&(E=A[H]=new RegExp(H).test(S||"en")),E){for(var X in G=H,V[H])if(a(P,V[H][X])){D=X;break}break}}if(!D){e:for(var B in V)if(B!==G){for(var x in V[B])if(a(P,V[B][x])){D=x;break e}}}D||(console.debug("No font coverage for U+"+P.toString(16)),D="latin"),J[R]=D,c[D]||Y.has(D)||Y.set(D,ne("font-meta/"+D+".json").then(function(se){c[D]=se})),P>65535&&(R++,U=R)},U=0;U<b.length;U++)m(U);return Promise.all(Y.values())}).then(function(){for(var m,U=null,R=0;R<b.length;R++){var P=b.codePointAt(R);if(U&&(k(P)||d(U).has(P)))_[R]=_[R-1];else{U=c[J[R]];var D=F[U.id];if(!D){var V=U.typeforms,G=v(V,w,"sans-serif"),H=v(V[G],C,"normal"),E=N((m=V[G])===null||m===void 0?void 0:m[H],L);D=F[U.id]=O+"/font-files/"+U.id+"/"+G+"."+H+"."+E+".woff"}var X=I.get(D);X==null&&(X=I.size,I.set(D,X)),_[R]=X}P>65535&&(R++,_[R]=_[R-1])}return{fontUrls:Array.from(I.keys()),chars:_}})},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}function ul(e,t){const i=Object.create(null),o=Object.create(null);function r(a,l){const s=u=>{console.error(`Failure loading font ${a}`,u)};try{const u=new XMLHttpRequest;u.open("get",a,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)s(new Error(u.statusText));else if(u.status>0)try{const c=e(u.response);c.src=a,l(c)}catch(c){s(c)}},u.onerror=s,u.send()}catch(u){s(u)}}function n(a,l){let s=i[a];s?l(s):o[a]?o[a].push(l):(o[a]=[l],r(a,u=>{u.src=a,i[a]=u,o[a].forEach(c=>c(u)),delete o[a]}))}return function(a,l,{lang:s,fonts:u=[],style:c="normal",weight:f="normal",unicodeFontsURL:h}={}){const d=new Uint8Array(a.length),p=[];a.length||k();const g=new Map,v=[];if(c!=="italic"&&(c="normal"),typeof f!="number"&&(f=f==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(y=>!y.lang||y.lang.test(s)).reverse(),u.length){let w=0;(function C(L=0){for(let O=L,I=a.length;O<I;O++){const _=a.codePointAt(O);if(w===1&&p[d[O-1]].supportsCodePoint(_)||O>0&&/\s/.test(a[O]))d[O]=d[O-1],w===2&&(v[v.length-1][1]=O);else for(let F=d[O],A=u.length;F<=A;F++)if(F===A){const J=w===2?v[v.length-1]:v[v.length]=[O,O];J[1]=O,w=2}else{d[O]=F;const{src:J,unicodeRange:Y}=u[F];if(!Y||b(_,Y)){const $=i[J];if(!$){n(J,()=>{C(O)});return}if($.supportsCodePoint(_)){let ne=g.get($);typeof ne!="number"&&(ne=p.length,p.push($),g.set($,ne)),d[O]=ne,w=1;break}}}_>65535&&O+1<I&&(d[O+1]=d[O],O++,w===2&&(v[v.length-1][1]=O))}N()})()}else v.push([0,a.length-1]),N();function N(){if(v.length){const y=v.map(T=>a.substring(T[0],T[1]+1)).join(`
`);t.getFontsForString(y,{lang:s||void 0,style:c,weight:f,dataUrl:h}).then(({fontUrls:T,chars:S})=>{const w=p.length;let C=0;v.forEach(O=>{for(let I=0,_=O[1]-O[0];I<=_;I++)d[O[0]+I]=S[C++]+w;C++});let L=0;T.forEach((O,I)=>{n(O,_=>{p[I+w]=_,++L===T.length&&k()})})})}else k()}function k(){l({chars:d,fonts:p})}function b(y,T){for(let S=0;S<T.length;S++){const[w,C=w]=T[S];if(w<=y&&y<=C)return!0}return!1}}}const cl=Yt({name:"FontResolver",dependencies:[ul,sl,ll],init(e,t,i){return e(t,i())}});function fl(e,t){const o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",n=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:p,lang:g,fonts:v,style:N,weight:k,preResolvedFonts:b,unicodeFontsURL:y},T){const S=({chars:w,fonts:C})=>{let L,O;const I=[];for(let _=0;_<w.length;_++)w[_]!==O?(O=w[_],I.push(L={start:_,end:_,fontObj:C[w[_]]})):L.end=_;T(I)};b?S(b):e(p,S,{lang:g,fonts:v,style:N,weight:k,unicodeFontsURL:y})}function l({text:p="",font:g,lang:v,sdfGlyphSize:N=64,fontSize:k=400,fontWeight:b=1,fontStyle:y="normal",letterSpacing:T=0,lineHeight:S="normal",maxWidth:w=1/0,direction:C,textAlign:L="left",textIndent:O=0,whiteSpace:I="normal",overflowWrap:_="normal",anchorX:F=0,anchorY:A=0,metricsOnly:J=!1,unicodeFontsURL:Y,preResolvedFonts:$=null,includeCaretPositions:ne=!1,chunkedBoundsSize:j=8192,colorRanges:W=null},m){const U=f(),R={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),k=+k,T=+T,w=+w,S=S||"normal",O=+O,a({text:p,lang:v,style:y,weight:b,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:Y,preResolvedFonts:$},P=>{R.fontLoad=f()-U;const D=isFinite(w);let V=null,G=null,H=null,E=null,X=null,B=null,x=null,se=null,Z=0,K=0,Q=I!=="nowrap";const re=new Map,q=f();let ae=O,ie=0,z=new h;const pe=[z];P.forEach(oe=>{const{fontObj:ue}=oe,{ascender:he,descender:ge,unitsPerEm:Te,lineGap:Fe,capHeight:me,xHeight:ye}=ue;let fe=re.get(ue);if(!fe){const de=k/Te,ke=S==="normal"?(he-ge+Fe)*de:S*k,ft=(ke-(he-ge)*de)/2,Se=Math.min(ke,(he-ge)*de),xe=(he+ge)/2*de+Se/2;fe={index:re.size,src:ue.src,fontObj:ue,fontSizeMult:de,unitsPerEm:Te,ascender:he*de,descender:ge*de,capHeight:me*de,xHeight:ye*de,lineHeight:ke,baseline:-ft-he*de,caretTop:xe,caretBottom:xe-Se},re.set(ue,fe)}const{fontSizeMult:De}=fe,Me=p.slice(oe.start,oe.end+1);let je,Ue;ue.forEachGlyph(Me,k,T,(de,ke,ft,Se)=>{ke+=ie,Se+=oe.start,je=ke,Ue=de;const xe=p.charAt(Se),Ne=de.advanceWidth*De,Ce=z.count;let ve;if("isEmpty"in de||(de.isWhitespace=!!xe&&new RegExp(r).test(xe),de.canBreakAfter=!!xe&&n.test(xe),de.isEmpty=de.xMin===de.xMax||de.yMin===de.yMax||o.test(xe)),!de.isWhitespace&&!de.isEmpty&&K++,Q&&D&&!de.isWhitespace&&ke+Ne+ae>w&&Ce){if(z.glyphAt(Ce-1).glyphObj.canBreakAfter)ve=new h,ae=-ke;else for(let Ge=Ce;Ge--;)if(Ge===0&&_==="break-word"){ve=new h,ae=-ke;break}else if(z.glyphAt(Ge).glyphObj.canBreakAfter){ve=z.splitAt(Ge+1);const Ie=ve.glyphAt(0).x;ae-=Ie;for(let Re=ve.count;Re--;)ve.glyphAt(Re).x-=Ie;break}ve&&(z.isSoftWrapped=!0,z=ve,pe.push(z),Z=w)}let Ae=z.glyphAt(z.count);Ae.glyphObj=de,Ae.x=ke+ae,Ae.y=ft,Ae.width=Ne,Ae.charIndex=Se,Ae.fontData=fe,xe===`
`&&(z=new h,pe.push(z),ae=-(ke+Ne+T*k)+O)}),ie=je+Ue.advanceWidth*De+T*k});let te=0;pe.forEach(oe=>{let ue=!0;for(let he=oe.count;he--;){const ge=oe.glyphAt(he);ue&&!ge.glyphObj.isWhitespace&&(oe.width=ge.x+ge.width,oe.width>Z&&(Z=oe.width),ue=!1);let{lineHeight:Te,capHeight:Fe,xHeight:me,baseline:ye}=ge.fontData;Te>oe.lineHeight&&(oe.lineHeight=Te);const fe=ye-oe.baseline;fe<0&&(oe.baseline+=fe,oe.cap+=fe,oe.ex+=fe),oe.cap=Math.max(oe.cap,oe.baseline+Fe),oe.ex=Math.max(oe.ex,oe.baseline+me)}oe.baseline-=te,oe.cap-=te,oe.ex-=te,te+=oe.lineHeight});let le=0,ee=0;if(F&&(typeof F=="number"?le=-F:typeof F=="string"&&(le=-Z*(F==="left"?0:F==="center"?.5:F==="right"?1:u(F)))),A&&(typeof A=="number"?ee=-A:typeof A=="string"&&(ee=A==="top"?0:A==="top-baseline"?-pe[0].baseline:A==="top-cap"?-pe[0].cap:A==="top-ex"?-pe[0].ex:A==="middle"?te/2:A==="bottom"?te:A==="bottom-baseline"?-pe[pe.length-1].baseline:u(A)*te)),!J){const oe=t.getEmbeddingLevels(p,C);V=new Uint16Array(K),G=new Uint8Array(K),H=new Float32Array(K*2),E={},x=[1/0,1/0,-1/0,-1/0],se=[],ne&&(B=new Float32Array(p.length*4)),W&&(X=new Uint8Array(K*3));let ue=0,he=-1,ge=-1,Te,Fe;if(pe.forEach((me,ye)=>{let{count:fe,width:De}=me;if(fe>0){let Me=0;for(let Se=fe;Se--&&me.glyphAt(Se).glyphObj.isWhitespace;)Me++;let je=0,Ue=0;if(L==="center")je=(Z-De)/2;else if(L==="right")je=Z-De;else if(L==="justify"&&me.isSoftWrapped){let Se=0;for(let xe=fe-Me;xe--;)me.glyphAt(xe).glyphObj.isWhitespace&&Se++;Ue=(Z-De)/Se}if(Ue||je){let Se=0;for(let xe=0;xe<fe;xe++){let Ne=me.glyphAt(xe);const Ce=Ne.glyphObj;Ne.x+=je+Se,Ue!==0&&Ce.isWhitespace&&xe<fe-Me&&(Se+=Ue,Ne.width+=Ue)}}const de=t.getReorderSegments(p,oe,me.glyphAt(0).charIndex,me.glyphAt(me.count-1).charIndex);for(let Se=0;Se<de.length;Se++){const[xe,Ne]=de[Se];let Ce=1/0,ve=-1/0;for(let Ae=0;Ae<fe;Ae++)if(me.glyphAt(Ae).charIndex>=xe){let Ge=Ae,Ie=Ae;for(;Ie<fe;Ie++){let Re=me.glyphAt(Ie);if(Re.charIndex>Ne)break;Ie<fe-Me&&(Ce=Math.min(Ce,Re.x),ve=Math.max(ve,Re.x+Re.width))}for(let Re=Ge;Re<Ie;Re++){const qe=me.glyphAt(Re);qe.x=ve-(qe.x+qe.width-Ce)}break}}let ke;const ft=Se=>ke=Se;for(let Se=0;Se<fe;Se++){const xe=me.glyphAt(Se);ke=xe.glyphObj;const Ne=ke.index,Ce=oe.levels[xe.charIndex]&1;if(Ce){const ve=t.getMirroredCharacter(p[xe.charIndex]);ve&&xe.fontData.fontObj.forEachGlyph(ve,0,0,ft)}if(ne){const{charIndex:ve,fontData:Ae}=xe,Ge=xe.x+le,Ie=xe.x+xe.width+le;B[ve*4]=Ce?Ie:Ge,B[ve*4+1]=Ce?Ge:Ie,B[ve*4+2]=me.baseline+Ae.caretBottom+ee,B[ve*4+3]=me.baseline+Ae.caretTop+ee;const Re=ve-he;Re>1&&c(B,he,Re),he=ve}if(W){const{charIndex:ve}=xe;for(;ve>ge;)ge++,W.hasOwnProperty(ge)&&(Fe=W[ge])}if(!ke.isWhitespace&&!ke.isEmpty){const ve=ue++,{fontSizeMult:Ae,src:Ge,index:Ie}=xe.fontData,Re=E[Ge]||(E[Ge]={});Re[Ne]||(Re[Ne]={path:ke.path,pathBounds:[ke.xMin,ke.yMin,ke.xMax,ke.yMax]});const qe=xe.x+le,ht=xe.y+me.baseline+ee;H[ve*2]=qe,H[ve*2+1]=ht;const rt=qe+ke.xMin*Ae,dt=ht+ke.yMin*Ae,vt=qe+ke.xMax*Ae,it=ht+ke.yMax*Ae;rt<x[0]&&(x[0]=rt),dt<x[1]&&(x[1]=dt),vt>x[2]&&(x[2]=vt),it>x[3]&&(x[3]=it),ve%j===0&&(Te={start:ve,end:ve,rect:[1/0,1/0,-1/0,-1/0]},se.push(Te)),Te.end++;const Be=Te.rect;if(rt<Be[0]&&(Be[0]=rt),dt<Be[1]&&(Be[1]=dt),vt>Be[2]&&(Be[2]=vt),it>Be[3]&&(Be[3]=it),V[ve]=Ne,G[ve]=Ie,W){const mt=ve*3;X[mt]=Fe>>16&255,X[mt+1]=Fe>>8&255,X[mt+2]=Fe&255}}}}}),B){const me=p.length-he;me>1&&c(B,he,me)}}const be=[];re.forEach(({index:oe,src:ue,unitsPerEm:he,ascender:ge,descender:Te,lineHeight:Fe,capHeight:me,xHeight:ye})=>{be[oe]={src:ue,unitsPerEm:he,ascender:ge,descender:Te,lineHeight:Fe,capHeight:me,xHeight:ye}}),R.typesetting=f()-q,m({glyphIds:V,glyphFontIndices:G,glyphPositions:H,glyphData:E,fontData:be,caretPositions:B,glyphColors:X,chunkedBounds:se,fontSize:k,topBaseline:ee+pe[0].baseline,blockBounds:[le,ee-te,le+Z,ee],visibleBounds:x,timings:R})})}function s(p,g){l({...p,metricsOnly:!0},v=>{const[N,k,b,y]=v.blockBounds;g({width:b-N,height:y-k})})}function u(p){let g=p.match(/^([\d.]+)%$/),v=g?parseFloat(g[1]):NaN;return isNaN(v)?0:v/100}function c(p,g,v){const N=p[g*4],k=p[g*4+1],b=p[g*4+2],y=p[g*4+3],T=(k-N)/v;for(let S=0;S<v;S++){const w=(g+S)*4;p[w]=N+T*S,p[w+1]=N+T*(S+1),p[w+2]=b,p[w+3]=y}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(p){let g=h.flyweight;return g.data=this.data,g.index=p,g},splitAt(p){let g=new h;return g.data=this.data.splice(p*d.length),g}},h.flyweight=d.reduce((p,g,v,N)=>(Object.defineProperty(p,g,{get(){return this.data[this.index*d.length+v]},set(k){this.data[this.index*d.length+v]=k}}),p),{data:null,index:0}),{typeset:l,measure:s}}const bt=()=>(self.performance||Date).now(),hr=co();let fa;function hl(e,t,i,o,r,n,a,l,s,u,c=!0){return c?pl(e,t,i,o,r,n,a,l,s,u).then(null,f=>(fa||(console.warn("WebGL SDF generation failed, falling back to JS",f),fa=!0),da(e,t,i,o,r,n,a,l,s,u))):da(e,t,i,o,r,n,a,l,s,u)}const Hn=[],dl=5;let ei=0;function ho(){const e=bt();for(;Hn.length&&bt()-e<dl;)Hn.shift()();ei=Hn.length?setTimeout(ho,0):0}const pl=(...e)=>new Promise((t,i)=>{Hn.push(()=>{const o=bt();try{hr.webgl.generateIntoCanvas(...e),t({timing:bt()-o})}catch(r){i(r)}}),ei||(ei=setTimeout(ho,0))}),gl=4,vl=2e3,ha={};let ml=0;function da(e,t,i,o,r,n,a,l,s,u){const c="TroikaTextSDFGenerator_JS_"+ml++%gl;let f=ha[c];return f||(f=ha[c]={workerModule:Yt({name:c,workerId:c,dependencies:[co,bt],init(h,d){const p=h().javascript.generate;return function(...g){const v=d();return{textureData:p(...g),timing:d()-v}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(e,t,i,o,r,n).then(({textureData:h,timing:d})=>{const p=bt(),g=new Uint8Array(h.length*4);for(let v=0;v<h.length;v++)g[v*4+u]=h[v];return hr.webglUtils.renderImageData(a,g,l,s,e,t,1<<3-u),d+=bt()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{qs(c)},vl)),{timing:d}})}function yl(e){e._warm||(hr.webgl.isSupported(e),e._warm=!0)}const xl=hr.webglUtils.resizeWebGLCanvasWithoutClearing,un={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},_l=new cr;function Lt(){return(self.performance||Date).now()}const pa=Object.create(null);function po(e,t){e=kl({},e);const i=Lt(),o=[];if(e.font&&o.push({label:"user",src:Sl(e.font)}),e.font=o,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||un.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||un.unicodeFontsURL,e.colorRanges!=null){let h={};for(let d in e.colorRanges)if(e.colorRanges.hasOwnProperty(d)){let p=e.colorRanges[d];typeof p!="number"&&(p=_l.set(p).getHex()),h[d]=p}e.colorRanges=h}Object.freeze(e);const{textureWidth:r,sdfExponent:n}=un,{sdfGlyphSize:a}=e,l=r/a*4;let s=pa[a];if(!s){const h=document.createElement("canvas");h.width=r,h.height=a*256/l,s=pa[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:h,sdfTexture:new Ds(h,void 0,void 0,void 0,ia,ia),contextLost:!1,glyphsByFont:new Map},s.sdfTexture.generateMipmaps=!1,wl(s)}const{sdfTexture:u,sdfCanvas:c}=s;mo(e).then(h=>{const{glyphIds:d,glyphFontIndices:p,fontData:g,glyphPositions:v,fontSize:N,timings:k}=h,b=[],y=new Float32Array(d.length*4);let T=0,S=0;const w=Lt(),C=g.map(F=>{let A=s.glyphsByFont.get(F.src);return A||s.glyphsByFont.set(F.src,A=new Map),A});d.forEach((F,A)=>{const J=p[A],{src:Y,unitsPerEm:$}=g[J];let ne=C[J].get(F);if(!ne){const{path:R,pathBounds:P}=h.glyphData[Y][F],D=Math.max(P[2]-P[0],P[3]-P[1])/a*(un.sdfMargin*a+.5),V=s.glyphCount++,G=[P[0]-D,P[1]-D,P[2]+D,P[3]+D];C[J].set(F,ne={path:R,atlasIndex:V,sdfViewBox:G}),b.push(ne)}const{sdfViewBox:j}=ne,W=v[S++],m=v[S++],U=N/$;y[T++]=W+j[0]*U,y[T++]=m+j[1]*U,y[T++]=W+j[2]*U,y[T++]=m+j[3]*U,d[A]=ne.atlasIndex}),k.quads=(k.quads||0)+(Lt()-w);const L=Lt();k.sdf={};const O=c.height,I=Math.ceil(s.glyphCount/l),_=Math.pow(2,Math.ceil(Math.log2(I*a)));_>O&&(console.info(`Increasing SDF texture size ${O}->${_}`),xl(c,r,_),u.dispose()),Promise.all(b.map(F=>go(F,s,e.gpuAccelerateSDF).then(({timing:A})=>{k.sdf[F.atlasIndex]=A}))).then(()=>{b.length&&!s.contextLost&&(vo(s),u.needsUpdate=!0),k.sdfTotal=Lt()-L,k.total=Lt()-i,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:a,sdfExponent:n,glyphBounds:y,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{s.contextLost||yl(c)})}function go({path:e,atlasIndex:t,sdfViewBox:i},{sdfGlyphSize:o,sdfCanvas:r,contextLost:n},a){if(n)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:s}=un,u=Math.max(i[2]-i[0],i[3]-i[1]),c=Math.floor(t/4),f=c%(l/o)*o,h=Math.floor(c/(l/o))*o,d=t%4;return hl(o,o,e,i,u,s,r,f,h,d,a)}function wl(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",i=>{console.log("Context Lost",i),i.preventDefault(),e.contextLost=!0}),t.addEventListener("webglcontextrestored",i=>{console.log("Context Restored",i),e.contextLost=!1;const o=[];e.glyphsByFont.forEach(r=>{r.forEach(n=>{o.push(go(n,e,!0))})}),Promise.all(o).then(()=>{vo(e),e.sdfTexture.needsUpdate=!0})})}function bl({font:e,characters:t,sdfGlyphSize:i},o){let r=Array.isArray(t)?t.join(`
`):""+t;po({font:e,sdfGlyphSize:i,text:r},o)}function kl(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}let Pn;function Sl(e){return Pn||(Pn=typeof document>"u"?{}:document.createElement("a")),Pn.href=e,Pn.href}function vo(e){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:i}=e,{width:o,height:r}=t,n=e.sdfCanvas.getContext("webgl");let a=i.image.data;(!a||a.length!==o*r*4)&&(a=new Uint8Array(o*r*4),i.image={width:o,height:r,data:a},i.flipY=!1,i.isDataTexture=!0),n.readPixels(0,0,o,r,n.RGBA,n.UNSIGNED_BYTE,a)}}const Tl=Yt({name:"Typesetter",dependencies:[fl,cl,Ks],init(e,t,i){return e(t,i())}}),mo=Yt({name:"Typesetter",dependencies:[Tl],init(e){return function(t){return new Promise(i=>{e.typeset(t,i)})}},getTransferables(e){const t=[];for(let i in e)e[i]&&e[i].buffer&&t.push(e[i].buffer);return t}});mo.onMainThread;const ga={};function Ul(e){let t=ga[e];return t||(t=ga[e]=new mi(1,1,e,e).translate(.5,.5,0)),t}const Ml="aTroikaGlyphBounds",va="aTroikaGlyphIndex",Cl="aTroikaGlyphColor";class Al extends Cs{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new As,this.boundingBox=new lo}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let i=Ul(t);["position","normal","uv"].forEach(o=>{this.attributes[o]=i.attributes[o].clone()}),this.setIndex(i.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,i,o,r,n){this.updateAttributeData(Ml,t,4),this.updateAttributeData(va,i,1),this.updateAttributeData(Cl,n,3),this._blockBounds=o,this._chunkedBounds=r,this.instanceCount=i.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:i,boundingBox:o}=this;if(i){const{PI:r,floor:n,min:a,max:l,sin:s,cos:u}=Math,c=r/2,f=r*2,h=Math.abs(i),d=t[0]/h,p=t[2]/h,g=n((d+c)/f)!==n((p+c)/f)?-h:a(s(d)*h,s(p)*h),v=n((d-c)/f)!==n((p-c)/f)?h:l(s(d)*h,s(p)*h),N=n((d+r)/f)!==n((p+r)/f)?h*2:l(h-u(d)*h,h-u(p)*h);o.min.set(g,t[1],i<0?-N:0),o.max.set(v,t[3],i<0?0:N)}else o.min.set(t[0],t[1],0),o.max.set(t[2],t[3],0);o.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let i=this.getAttribute(va).count,o=this._chunkedBounds;if(o)for(let r=o.length;r--;){i=o[r].end;let n=o[r].rect;if(n[1]<t.w&&n[3]>t.y&&n[0]<t.z&&n[2]>t.x)break}this.instanceCount=i}updateAttributeData(t,i,o){const r=this.getAttribute(t);i?r&&r.array.length===i.length?(r.array.set(i),r.needsUpdate=!0):(this.setAttribute(t,new Fs(i,o)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(t)}}const Fl=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Dl=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,El=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Nl=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Rl(e){const t=$r(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Jn},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new aa(0,0,0,0)},uTroikaClipRect:{value:new aa(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Jn},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new cr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Es},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Fl,vertexTransform:Dl,fragmentDefs:El,fragmentColorTransform:Nl,customRewriter({vertexShader:i,fragmentShader:o}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(o)&&(o=o.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(i)||(i=i.replace(fo,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:i,fragmentShader:o}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const yi=new Us({color:16777215,side:Ns,transparent:!0}),ma=8421504,ya=new Ms,In=new vi,Ir=new vi,rn=[],Ll=new vi,Gr="+x+y";function xa(e){return Array.isArray(e)?e[0]:e}let yo=()=>{const e=new gi(new mi(1,1),yi);return yo=()=>e,e},xo=()=>{const e=new gi(new mi(1,1,32,1),yi);return xo=()=>e,e};const Ol={type:"syncstart"},Pl={type:"synccomplete"},_o=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Il=_o.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let wo=class extends gi{constructor(){const t=new Al;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=ma,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Gr,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(Ol),po({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},i=>{this._isSyncing=!1,this._textRenderInfo=i,this.geometry.updateGlyphs(i.glyphBounds,i.glyphAtlasIndices,i.blockBounds,i.chunkedBounds,i.glyphColors);const o=this._queuedSyncs;o&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{o.forEach(r=>r&&r())})),this.dispatchEvent(Pl),t&&t()})))}onBeforeRender(t,i,o,r,n,a){this.sync(),n.isTroikaTextMaterial&&this._prepareForRender(n)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return Rl(t)}get material(){let t=this._derivedMaterial;const i=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=yi.clone());if((!t||!t.isDerivedFrom(i))&&(t=this._derivedMaterial=this.createDerivedMaterial(i),i.addEventListener("dispose",function o(){i.removeEventListener("dispose",o),t.dispose()})),this.hasOutline()){let o=t._outlineMtl;return o||(o=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),o.isTextOutlineMaterial=!0,o.depthWrite=!1,o.map=null,t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),o.dispose()})),[o,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return xa(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return xa(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){const i=t.isTextOutlineMaterial,o=t.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:l,blockBounds:s}=r;o.uTroikaSDFTexture.value=l,o.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),o.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,o.uTroikaSDFExponent.value=r.sdfExponent,o.uTroikaTotalBounds.value.fromArray(s),o.uTroikaUseGlyphColors.value=!i&&!!r.glyphColors;let u=0,c=0,f=0,h,d,p,g=0,v=0;if(i){let{outlineWidth:k,outlineOffsetX:b,outlineOffsetY:y,outlineBlur:T,outlineOpacity:S}=this;u=this._parsePercent(k)||0,c=Math.max(0,this._parsePercent(T)||0),h=S,g=this._parsePercent(b)||0,v=this._parsePercent(y)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,o.uTroikaStrokeColor.value.set(p??ma),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;o.uTroikaEdgeOffset.value=u,o.uTroikaPositionOffset.value.set(g,v),o.uTroikaBlurRadius.value=c,o.uTroikaStrokeWidth.value=f,o.uTroikaStrokeOpacity.value=d,o.uTroikaFillOpacity.value=h??1,o.uTroikaCurveRadius.value=this.curveRadius||0;let N=this.clipRect;if(N&&Array.isArray(N)&&N.length===4)o.uTroikaClipRect.value.fromArray(N);else{const k=(this.fontSize||.1)*100;o.uTroikaClipRect.value.set(s[0]-k,s[1]-k,s[2]+k,s[3]+k)}this.geometry.applyClipRect(o.uTroikaClipRect.value)}o.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const n=i?this.outlineColor||0:this.color;if(n==null)delete t.color;else{const l=t.hasOwnProperty("color")?t.color:t.color=new cr;(n!==l._input||typeof n=="object")&&l.set(l._input=n)}let a=this.orientation||Gr;if(a!==t._orientation){let l=o.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let s=a!==Gr&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(s){let[,u,c,f,h]=s;In.set(0,0,0)[c]=u==="-"?1:-1,Ir.set(0,0,0)[h]=f==="-"?-1:1,ya.lookAt(Ll,In.cross(Ir),Ir),l.setFromMatrix4(ya)}else l.identity();t._orientation=a}}_parsePercent(t){if(typeof t=="string"){let i=t.match(/^(-?[\d.]+)%$/),o=i?parseFloat(i[1]):NaN;t=(isNaN(o)?0:o/100)*this.fontSize}return t}localPositionToTextCoords(t,i=new Jn){i.copy(t);const o=this.curveRadius;return o&&(i.x=Math.atan2(t.x,Math.abs(o)-Math.abs(t.z))*Math.abs(o)),i}worldPositionToTextCoords(t,i=new Jn){return In.copy(t),this.localPositionToTextCoords(this.worldToLocal(In),i)}raycast(t,i){const{textRenderInfo:o,curveRadius:r}=this;if(o){const n=o.blockBounds,a=r?xo():yo(),l=a.geometry,{position:s,uv:u}=l.attributes;for(let c=0;c<u.count;c++){let f=n[0]+u.getX(c)*(n[2]-n[0]);const h=n[1]+u.getY(c)*(n[3]-n[1]);let d=0;r&&(d=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),s.setXYZ(c,f,h,d)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,rn.length=0,a.raycast(t,rn);for(let c=0;c<rn.length;c++)rn[c].object=this,i.push(rn[c])}}copy(t){const i=this.geometry;return super.copy(t),this.geometry=i,Il.forEach(o=>{this[o]=t[o]}),this}clone(){return new this.constructor().copy(this)}};_o.forEach(e=>{const t="_private_"+e;Object.defineProperty(wo.prototype,e,{get(){return this[t]},set(i){i!==this[t]&&(this[t]=i,this._needsSync=!0)}})});new lo;new cr;const Br=we.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:i="middle",font:o,fontSize:r=1,children:n,characters:a,onSync:l,...s},u)=>{const c=Rs(({invalidate:p})=>p),[f]=we.useState(()=>new wo),[h,d]=we.useMemo(()=>{const p=[];let g="";return we.Children.forEach(n,v=>{typeof v=="string"||typeof v=="number"?g+=v:p.push(v)}),[p,g]},[n]);return zs(()=>new Promise(p=>bl({font:o,characters:a},p)),["troika-text",o,a]),we.useLayoutEffect(()=>void f.sync(()=>{c(),l&&l(f)})),we.useEffect(()=>()=>f.dispose(),[f]),we.createElement("primitive",vn({object:f,ref:u,font:o,text:d,anchorX:t,anchorY:i,fontSize:r,sdfGlyphSize:e},s),h)});var Gl=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Bl extends Ls{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${Gl}
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}const jl=we.forwardRef(({speed:e=1,...t},i)=>{const[o]=we.useState(()=>new Bl);return fr(r=>o&&(o.time=r.clock.elapsedTime*e)),we.createElement("primitive",vn({object:o,ref:i,attach:"material"},t))});function bo(e,t){const i=e+"Geometry";return we.forwardRef(({args:o,children:r,...n},a)=>{const l=we.useRef(null);return we.useImperativeHandle(a,()=>l.current),we.useLayoutEffect(()=>void(t==null?void 0:t(l.current))),we.createElement("mesh",vn({ref:l},n),we.createElement(i,{attach:"geometry",args:o}),r)})}const ko=bo("sphere"),Wl=bo("ring");function zl({systemStatus:e}){const t=we.useRef(null);fr(o=>{t.current&&(t.current.rotation.x=o.clock.elapsedTime*.3,t.current.rotation.y=o.clock.elapsedTime*.2)});const i=e==="operational"?"#00ffff":e==="warning"?"#ffaa00":"#ff4444";return M.jsx(ko,{ref:t,args:[1,64,64],position:[0,0,0],children:M.jsx(jl,{color:i,transparent:!0,opacity:.6,distort:.3,speed:2,roughness:.1})})}function Hl({activeAgents:e}){const t=we.useMemo(()=>Array.from({length:Math.min(e,6)},(i,o)=>({id:o,radius:2+o*.5,speed:.5+o*.1,color:`hsl(${180+o*60}, 70%, 50%)`})),[e]);return M.jsx("group",{children:t.map(i=>M.jsx(Vl,{radius:i.radius,speed:i.speed,color:i.color},i.id))})}function Vl({radius:e,speed:t,color:i}){const o=we.useRef(null);return fr(r=>{o.current&&(o.current.rotation.z=r.clock.elapsedTime*t)}),M.jsxs("group",{ref:o,children:[M.jsx(Wl,{args:[e-.05,e+.05,64],position:[0,0,0],children:M.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.6})}),M.jsx(ko,{args:[.1,16,16],position:[e,0,0],children:M.jsx("meshBasicMaterial",{color:i})})]})}function Yl({systemLoad:e}){const t=we.useRef(null),i=we.useMemo(()=>{const o=Math.floor(e*1e3),r=new Float32Array(o*3);for(let n=0;n<o;n++)r[n*3]=(Math.random()-.5)*10,r[n*3+1]=(Math.random()-.5)*10,r[n*3+2]=(Math.random()-.5)*10;return r},[e]);return fr(o=>{if(t.current){const r=t.current.geometry.attributes.position.array;for(let n=0;n<r.length;n+=3)r[n+1]-=.01,r[n+1]<-5&&(r[n+1]=5);t.current.geometry.attributes.position.needsUpdate=!0}}),M.jsxs("points",{ref:t,children:[M.jsx("bufferGeometry",{children:M.jsx("bufferAttribute",{attach:"attributes-position",count:i.length/3,array:i,itemSize:3})}),M.jsx("pointsMaterial",{color:"#00ffff",size:.02,transparent:!0,opacity:.6})]})}function Xl({systemStatus:e,activeAgents:t,systemLoad:i}){const o=e==="operational"?"#00ff41":e==="warning"?"#ffaa00":"#ff4444";return M.jsxs("group",{position:[0,-3,0],children:[M.jsx(Br,{position:[0,0,0],fontSize:.3,color:o,anchorX:"center",anchorY:"middle",children:e.toUpperCase()}),M.jsxs(Br,{position:[0,-.5,0],fontSize:.2,color:"#00ffff",anchorX:"center",anchorY:"middle",children:[t," AGENTS ACTIVE"]}),M.jsxs(Br,{position:[0,-.8,0],fontSize:.2,color:"#ffffff",anchorX:"center",anchorY:"middle",children:["LOAD: ",(i*100).toFixed(1),"%"]})]})}const ql=({systemStatus:e,activeAgents:t,systemLoad:i})=>M.jsx("div",{style:{height:"400px",width:"100%"},children:M.jsxs(Os,{camera:{position:[0,0,8],fov:45},style:{background:"transparent"},children:[M.jsx("ambientLight",{intensity:.2}),M.jsx("pointLight",{position:[10,10,10],intensity:1}),M.jsx(zl,{systemStatus:e}),M.jsx(Hl,{activeAgents:t}),M.jsx(Yl,{systemLoad:i}),M.jsx(Xl,{systemStatus:e,activeAgents:t,systemLoad:i})]})});function Vn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xi(e){let t,i,o;e.length!==2?(t=Vn,i=(l,s)=>Vn(e(l),s),o=(l,s)=>e(l)-s):(t=e===Vn||e===Jl?e:Kl,i=e,o=e);function r(l,s,u=0,c=l.length){if(u<c){if(t(s,s)!==0)return c;do{const f=u+c>>>1;i(l[f],s)<0?u=f+1:c=f}while(u<c)}return u}function n(l,s,u=0,c=l.length){if(u<c){if(t(s,s)!==0)return c;do{const f=u+c>>>1;i(l[f],s)<=0?u=f+1:c=f}while(u<c)}return u}function a(l,s,u=0,c=l.length){const f=r(l,s,u,c-1);return f>u&&o(l[f-1],s)>-o(l[f],s)?f-1:f}return{left:r,center:a,right:n}}function Kl(){return 0}function Zl(e){return e===null?NaN:+e}const Ql=xi(Vn),$l=Ql.right;xi(Zl).center;function eu(e,t){let i,o;if(t===void 0)for(const r of e)r!=null&&(i===void 0?r>=r&&(i=o=r):(i>r&&(i=r),o<r&&(o=r)));else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(i===void 0?n>=n&&(i=o=n):(i>n&&(i=n),o<n&&(o=n)))}return[i,o]}class ti extends Map{constructor(t,i=ru){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[o,r]of t)this.set(o,r)}get(t){return super.get(_a(this,t))}has(t){return super.has(_a(this,t))}set(t,i){return super.set(tu(this,t),i)}delete(t){return super.delete(nu(this,t))}}function _a({_intern:e,_key:t},i){const o=t(i);return e.has(o)?e.get(o):i}function tu({_intern:e,_key:t},i){const o=t(i);return e.has(o)?e.get(o):(e.set(o,i),i)}function nu({_intern:e,_key:t},i){const o=t(i);return e.has(o)&&(i=e.get(o),e.delete(o)),i}function ru(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wa(e){return e}function iu(e,...t){return au(e,wa,wa,t)}function au(e,t,i,o){return function r(n,a){if(a>=o.length)return i(n);const l=new ti,s=o[a++];let u=-1;for(const c of n){const f=s(c,++u,n),h=l.get(f);h?h.push(c):l.set(f,[c])}for(const[c,f]of l)l.set(c,r(f,a));return t(l)}(e,0)}const ou=Math.sqrt(50),su=Math.sqrt(10),lu=Math.sqrt(2);function Kn(e,t,i){const o=(t-e)/Math.max(0,i),r=Math.floor(Math.log10(o)),n=o/Math.pow(10,r),a=n>=ou?10:n>=su?5:n>=lu?2:1;let l,s,u;return r<0?(u=Math.pow(10,-r)/a,l=Math.round(e*u),s=Math.round(t*u),l/u<e&&++l,s/u>t&&--s,u=-u):(u=Math.pow(10,r)*a,l=Math.round(e/u),s=Math.round(t/u),l*u<e&&++l,s*u>t&&--s),s<l&&.5<=i&&i<2?Kn(e,t,i*2):[l,s,u]}function uu(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const o=t<e,[r,n,a]=o?Kn(t,e,i):Kn(e,t,i);if(!(n>=r))return[];const l=n-r+1,s=new Array(l);if(o)if(a<0)for(let u=0;u<l;++u)s[u]=(n-u)/-a;else for(let u=0;u<l;++u)s[u]=(n-u)*a;else if(a<0)for(let u=0;u<l;++u)s[u]=(r+u)/-a;else for(let u=0;u<l;++u)s[u]=(r+u)*a;return s}function ni(e,t,i){return t=+t,e=+e,i=+i,Kn(e,t,i)[2]}function ri(e,t,i){t=+t,e=+e,i=+i;const o=t<e,r=o?ni(t,e,i):ni(e,t,i);return(o?-1:1)*(r<0?1/-r:r)}function cu(e,t){let i;if(t===void 0)for(const o of e)o!=null&&(i<o||i===void 0&&o>=o)&&(i=o);else{let o=-1;for(let r of e)(r=t(r,++o,e))!=null&&(i<r||i===void 0&&r>=r)&&(i=r)}return i}function fu(e){return e}var jr=1,Wr=2,ii=3,cn=4,ba=1e-6;function hu(e){return"translate("+e+",0)"}function du(e){return"translate(0,"+e+")"}function pu(e){return t=>+e(t)}function gu(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),i=>+e(i)+t}function vu(){return!this.__axis}function So(e,t){var i=[],o=null,r=null,n=6,a=6,l=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===jr||e===cn?-1:1,c=e===cn||e===Wr?"x":"y",f=e===jr||e===ii?hu:du;function h(d){var p=o??(t.ticks?t.ticks.apply(t,i):t.domain()),g=r??(t.tickFormat?t.tickFormat.apply(t,i):fu),v=Math.max(n,0)+l,N=t.range(),k=+N[0]+s,b=+N[N.length-1]+s,y=(t.bandwidth?gu:pu)(t.copy(),s),T=d.selection?d.selection():d,S=T.selectAll(".domain").data([null]),w=T.selectAll(".tick").data(p,t).order(),C=w.exit(),L=w.enter().append("g").attr("class","tick"),O=w.select("line"),I=w.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(L),O=O.merge(L.append("line").attr("stroke","currentColor").attr(c+"2",u*n)),I=I.merge(L.append("text").attr("fill","currentColor").attr(c,u*v).attr("dy",e===jr?"0em":e===ii?"0.71em":"0.32em")),d!==T&&(S=S.transition(d),w=w.transition(d),O=O.transition(d),I=I.transition(d),C=C.transition(d).attr("opacity",ba).attr("transform",function(_){return isFinite(_=y(_))?f(_+s):this.getAttribute("transform")}),L.attr("opacity",ba).attr("transform",function(_){var F=this.parentNode.__axis;return f((F&&isFinite(F=F(_))?F:y(_))+s)})),C.remove(),S.attr("d",e===cn||e===Wr?a?"M"+u*a+","+k+"H"+s+"V"+b+"H"+u*a:"M"+s+","+k+"V"+b:a?"M"+k+","+u*a+"V"+s+"H"+b+"V"+u*a:"M"+k+","+s+"H"+b),w.attr("opacity",1).attr("transform",function(_){return f(y(_)+s)}),O.attr(c+"2",u*n),I.attr(c,u*v).text(g),T.filter(vu).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Wr?"start":e===cn?"end":"middle"),T.each(function(){this.__axis=y})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return i=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(i=d==null?[]:Array.from(d),h):i.slice()},h.tickValues=function(d){return arguments.length?(o=d==null?null:Array.from(d),h):o&&o.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(n=a=+d,h):n},h.tickSizeInner=function(d){return arguments.length?(n=+d,h):n},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(l=+d,h):l},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function ka(e){return So(ii,e)}function Sa(e){return So(cn,e)}var mu={value:()=>{}};function To(){for(var e=0,t=arguments.length,i={},o;e<t;++e){if(!(o=arguments[e]+"")||o in i||/[\s.]/.test(o))throw new Error("illegal type: "+o);i[o]=[]}return new Yn(i)}function Yn(e){this._=e}function yu(e,t){return e.trim().split(/^|\s+/).map(function(i){var o="",r=i.indexOf(".");if(r>=0&&(o=i.slice(r+1),i=i.slice(0,r)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:o}})}Yn.prototype=To.prototype={constructor:Yn,on:function(e,t){var i=this._,o=yu(e+"",i),r,n=-1,a=o.length;if(arguments.length<2){for(;++n<a;)if((r=(e=o[n]).type)&&(r=xu(i[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<a;)if(r=(e=o[n]).type)i[r]=Ta(i[r],e.name,t);else if(t==null)for(r in i)i[r]=Ta(i[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new Yn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var i=new Array(r),o=0,r,n;o<r;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],o=0,r=n.length;o<r;++o)n[o].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,n=o.length;r<n;++r)o[r].value.apply(t,i)}};function xu(e,t){for(var i=0,o=e.length,r;i<o;++i)if((r=e[i]).name===t)return r.value}function Ta(e,t,i){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=mu,e=e.slice(0,o).concat(e.slice(o+1));break}return i!=null&&e.push({name:t,value:i}),e}var ai="http://www.w3.org/1999/xhtml";const Ua={svg:"http://www.w3.org/2000/svg",xhtml:ai,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dr(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Ua.hasOwnProperty(t)?{space:Ua[t],local:e}:e}function _u(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===ai&&t.documentElement.namespaceURI===ai?t.createElement(e):t.createElementNS(i,e)}}function wu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uo(e){var t=dr(e);return(t.local?wu:_u)(t)}function bu(){}function _i(e){return e==null?bu:function(){return this.querySelector(e)}}function ku(e){typeof e!="function"&&(e=_i(e));for(var t=this._groups,i=t.length,o=new Array(i),r=0;r<i;++r)for(var n=t[r],a=n.length,l=o[r]=new Array(a),s,u,c=0;c<a;++c)(s=n[c])&&(u=e.call(s,s.__data__,c,n))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Ye(o,this._parents)}function Su(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Tu(){return[]}function Mo(e){return e==null?Tu:function(){return this.querySelectorAll(e)}}function Uu(e){return function(){return Su(e.apply(this,arguments))}}function Mu(e){typeof e=="function"?e=Uu(e):e=Mo(e);for(var t=this._groups,i=t.length,o=[],r=[],n=0;n<i;++n)for(var a=t[n],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),r.push(s));return new Ye(o,r)}function Co(e){return function(){return this.matches(e)}}function Ao(e){return function(t){return t.matches(e)}}var Cu=Array.prototype.find;function Au(e){return function(){return Cu.call(this.children,e)}}function Fu(){return this.firstElementChild}function Du(e){return this.select(e==null?Fu:Au(typeof e=="function"?e:Ao(e)))}var Eu=Array.prototype.filter;function Nu(){return Array.from(this.children)}function Ru(e){return function(){return Eu.call(this.children,e)}}function Lu(e){return this.selectAll(e==null?Nu:Ru(typeof e=="function"?e:Ao(e)))}function Ou(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,i=t.length,o=new Array(i),r=0;r<i;++r)for(var n=t[r],a=n.length,l=o[r]=[],s,u=0;u<a;++u)(s=n[u])&&e.call(s,s.__data__,u,n)&&l.push(s);return new Ye(o,this._parents)}function Fo(e){return new Array(e.length)}function Pu(){return new Ye(this._enter||this._groups.map(Fo),this._parents)}function Zn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zn.prototype={constructor:Zn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Iu(e){return function(){return e}}function Gu(e,t,i,o,r,n){for(var a=0,l,s=t.length,u=n.length;a<u;++a)(l=t[a])?(l.__data__=n[a],o[a]=l):i[a]=new Zn(e,n[a]);for(;a<s;++a)(l=t[a])&&(r[a]=l)}function Bu(e,t,i,o,r,n,a){var l,s,u=new Map,c=t.length,f=n.length,h=new Array(c),d;for(l=0;l<c;++l)(s=t[l])&&(h[l]=d=a.call(s,s.__data__,l,t)+"",u.has(d)?r[l]=s:u.set(d,s));for(l=0;l<f;++l)d=a.call(e,n[l],l,n)+"",(s=u.get(d))?(o[l]=s,s.__data__=n[l],u.delete(d)):i[l]=new Zn(e,n[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(h[l])===s&&(r[l]=s)}function ju(e){return e.__data__}function Wu(e,t){if(!arguments.length)return Array.from(this,ju);var i=t?Bu:Gu,o=this._parents,r=this._groups;typeof e!="function"&&(e=Iu(e));for(var n=r.length,a=new Array(n),l=new Array(n),s=new Array(n),u=0;u<n;++u){var c=o[u],f=r[u],h=f.length,d=zu(e.call(c,c&&c.__data__,u,o)),p=d.length,g=l[u]=new Array(p),v=a[u]=new Array(p),N=s[u]=new Array(h);i(c,f,g,v,N,d,t);for(var k=0,b=0,y,T;k<p;++k)if(y=g[k]){for(k>=b&&(b=k+1);!(T=v[b])&&++b<p;);y._next=T||null}}return a=new Ye(a,o),a._enter=l,a._exit=s,a}function zu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hu(){return new Ye(this._exit||this._groups.map(Fo),this._parents)}function Vu(e,t,i){var o=this.enter(),r=this,n=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),i==null?n.remove():i(n),o&&r?o.merge(r).order():r}function Yu(e){for(var t=e.selection?e.selection():e,i=this._groups,o=t._groups,r=i.length,n=o.length,a=Math.min(r,n),l=new Array(r),s=0;s<a;++s)for(var u=i[s],c=o[s],f=u.length,h=l[s]=new Array(f),d,p=0;p<f;++p)(d=u[p]||c[p])&&(h[p]=d);for(;s<r;++s)l[s]=i[s];return new Ye(l,this._parents)}function Xu(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var o=e[t],r=o.length-1,n=o[r],a;--r>=0;)(a=o[r])&&(n&&a.compareDocumentPosition(n)^4&&n.parentNode.insertBefore(a,n),n=a);return this}function qu(e){e||(e=Ju);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var i=this._groups,o=i.length,r=new Array(o),n=0;n<o;++n){for(var a=i[n],l=a.length,s=r[n]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(t)}return new Ye(r,this._parents).order()}function Ju(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ku(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zu(){return Array.from(this)}function Qu(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],r=0,n=o.length;r<n;++r){var a=o[r];if(a)return a}return null}function $u(){let e=0;for(const t of this)++e;return e}function ec(){return!this.node()}function tc(e){for(var t=this._groups,i=0,o=t.length;i<o;++i)for(var r=t[i],n=0,a=r.length,l;n<a;++n)(l=r[n])&&e.call(l,l.__data__,n,r);return this}function nc(e){return function(){this.removeAttribute(e)}}function rc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ic(e,t){return function(){this.setAttribute(e,t)}}function ac(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oc(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function sc(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function lc(e,t){var i=dr(e);if(arguments.length<2){var o=this.node();return i.local?o.getAttributeNS(i.space,i.local):o.getAttribute(i)}return this.each((t==null?i.local?rc:nc:typeof t=="function"?i.local?sc:oc:i.local?ac:ic)(i,t))}function Do(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uc(e){return function(){this.style.removeProperty(e)}}function cc(e,t,i){return function(){this.style.setProperty(e,t,i)}}function fc(e,t,i){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,i)}}function hc(e,t,i){return arguments.length>1?this.each((t==null?uc:typeof t=="function"?fc:cc)(e,t,i??"")):jt(this.node(),e)}function jt(e,t){return e.style.getPropertyValue(t)||Do(e).getComputedStyle(e,null).getPropertyValue(t)}function dc(e){return function(){delete this[e]}}function pc(e,t){return function(){this[e]=t}}function gc(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function vc(e,t){return arguments.length>1?this.each((t==null?dc:typeof t=="function"?gc:pc)(e,t)):this.node()[e]}function Eo(e){return e.trim().split(/^|\s+/)}function wi(e){return e.classList||new No(e)}function No(e){this._node=e,this._names=Eo(e.getAttribute("class")||"")}No.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ro(e,t){for(var i=wi(e),o=-1,r=t.length;++o<r;)i.add(t[o])}function Lo(e,t){for(var i=wi(e),o=-1,r=t.length;++o<r;)i.remove(t[o])}function mc(e){return function(){Ro(this,e)}}function yc(e){return function(){Lo(this,e)}}function xc(e,t){return function(){(t.apply(this,arguments)?Ro:Lo)(this,e)}}function _c(e,t){var i=Eo(e+"");if(arguments.length<2){for(var o=wi(this.node()),r=-1,n=i.length;++r<n;)if(!o.contains(i[r]))return!1;return!0}return this.each((typeof t=="function"?xc:t?mc:yc)(i,t))}function wc(){this.textContent=""}function bc(e){return function(){this.textContent=e}}function kc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Sc(e){return arguments.length?this.each(e==null?wc:(typeof e=="function"?kc:bc)(e)):this.node().textContent}function Tc(){this.innerHTML=""}function Uc(e){return function(){this.innerHTML=e}}function Mc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Cc(e){return arguments.length?this.each(e==null?Tc:(typeof e=="function"?Mc:Uc)(e)):this.node().innerHTML}function Ac(){this.nextSibling&&this.parentNode.appendChild(this)}function Fc(){return this.each(Ac)}function Dc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ec(){return this.each(Dc)}function Nc(e){var t=typeof e=="function"?e:Uo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Rc(){return null}function Lc(e,t){var i=typeof e=="function"?e:Uo(e),o=t==null?Rc:typeof t=="function"?t:_i(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)})}function Oc(){var e=this.parentNode;e&&e.removeChild(this)}function Pc(){return this.each(Oc)}function Ic(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bc(e){return this.select(e?Gc:Ic)}function jc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Wc(e){return function(t){e.call(this,t,this.__data__)}}function zc(e){return e.trim().split(/^|\s+/).map(function(t){var i="",o=t.indexOf(".");return o>=0&&(i=t.slice(o+1),t=t.slice(0,o)),{type:t,name:i}})}function Hc(e){return function(){var t=this.__on;if(t){for(var i=0,o=-1,r=t.length,n;i<r;++i)n=t[i],(!e.type||n.type===e.type)&&n.name===e.name?this.removeEventListener(n.type,n.listener,n.options):t[++o]=n;++o?t.length=o:delete this.__on}}}function Vc(e,t,i){return function(){var o=this.__on,r,n=Wc(t);if(o){for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=n,r.options=i),r.value=t;return}}this.addEventListener(e.type,n,i),r={type:e.type,name:e.name,value:t,listener:n,options:i},o?o.push(r):this.__on=[r]}}function Yc(e,t,i){var o=zc(e+""),r,n=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(r=0,c=l[s];r<n;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?Vc:Hc,r=0;r<n;++r)this.each(l(o[r],t,i));return this}function Oo(e,t,i){var o=Do(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,i):(r=o.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Xc(e,t){return function(){return Oo(this,e,t)}}function qc(e,t){return function(){return Oo(this,e,t.apply(this,arguments))}}function Jc(e,t){return this.each((typeof t=="function"?qc:Xc)(e,t))}function*Kc(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],r=0,n=o.length,a;r<n;++r)(a=o[r])&&(yield a)}var Po=[null];function Ye(e,t){this._groups=e,this._parents=t}function _n(){return new Ye([[document.documentElement]],Po)}function Zc(){return this}Ye.prototype=_n.prototype={constructor:Ye,select:ku,selectAll:Mu,selectChild:Du,selectChildren:Lu,filter:Ou,data:Wu,enter:Pu,exit:Hu,join:Vu,merge:Yu,selection:Zc,order:Xu,sort:qu,call:Ku,nodes:Zu,node:Qu,size:$u,empty:ec,each:tc,attr:lc,style:hc,property:vc,classed:_c,text:Sc,html:Cc,raise:Fc,lower:Ec,append:Nc,insert:Lc,remove:Pc,clone:Bc,datum:jc,on:Yc,dispatch:Jc,[Symbol.iterator]:Kc};function Qc(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],Po)}function bi(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function Io(e,t){var i=Object.create(e.prototype);for(var o in t)i[o]=t[o];return i}function wn(){}var mn=.7,Qn=1/mn,Bt="\\s*([+-]?\\d+)\\s*",yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$c=/^#([0-9a-f]{3,8})$/,ef=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),tf=new RegExp(`^rgb\\(${tt},${tt},${tt}\\)$`),nf=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${yn}\\)$`),rf=new RegExp(`^rgba\\(${tt},${tt},${tt},${yn}\\)$`),af=new RegExp(`^hsl\\(${yn},${tt},${tt}\\)$`),of=new RegExp(`^hsla\\(${yn},${tt},${tt},${yn}\\)$`),Ma={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bi(wn,St,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ca,formatHex:Ca,formatHex8:sf,formatHsl:lf,formatRgb:Aa,toString:Aa});function Ca(){return this.rgb().formatHex()}function sf(){return this.rgb().formatHex8()}function lf(){return Go(this).formatHsl()}function Aa(){return this.rgb().formatRgb()}function St(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=$c.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?Fa(t):i===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Gn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ef.exec(e))?new He(t[1],t[2],t[3],1):(t=tf.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nf.exec(e))?Gn(t[1],t[2],t[3],t[4]):(t=rf.exec(e))?Gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=af.exec(e))?Na(t[1],t[2]/100,t[3]/100,1):(t=of.exec(e))?Na(t[1],t[2]/100,t[3]/100,t[4]):Ma.hasOwnProperty(e)?Fa(Ma[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function Fa(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Gn(e,t,i,o){return o<=0&&(e=t=i=NaN),new He(e,t,i,o)}function uf(e){return e instanceof wn||(e=St(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function oi(e,t,i,o){return arguments.length===1?uf(e):new He(e,t,i,o??1)}function He(e,t,i,o){this.r=+e,this.g=+t,this.b=+i,this.opacity=+o}bi(He,oi,Io(wn,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mn:Math.pow(mn,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(kt(this.r),kt(this.g),kt(this.b),$n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Da,formatHex:Da,formatHex8:cf,formatRgb:Ea,toString:Ea}));function Da(){return`#${wt(this.r)}${wt(this.g)}${wt(this.b)}`}function cf(){return`#${wt(this.r)}${wt(this.g)}${wt(this.b)}${wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ea(){const e=$n(this.opacity);return`${e===1?"rgb(":"rgba("}${kt(this.r)}, ${kt(this.g)}, ${kt(this.b)}${e===1?")":`, ${e})`}`}function $n(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wt(e){return e=kt(e),(e<16?"0":"")+e.toString(16)}function Na(e,t,i,o){return o<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Qe(e,t,i,o)}function Go(e){if(e instanceof Qe)return new Qe(e.h,e.s,e.l,e.opacity);if(e instanceof wn||(e=St(e)),!e)return new Qe;if(e instanceof Qe)return e;e=e.rgb();var t=e.r/255,i=e.g/255,o=e.b/255,r=Math.min(t,i,o),n=Math.max(t,i,o),a=NaN,l=n-r,s=(n+r)/2;return l?(t===n?a=(i-o)/l+(i<o)*6:i===n?a=(o-t)/l+2:a=(t-i)/l+4,l/=s<.5?n+r:2-n-r,a*=60):l=s>0&&s<1?0:a,new Qe(a,l,s,e.opacity)}function ff(e,t,i,o){return arguments.length===1?Go(e):new Qe(e,t,i,o??1)}function Qe(e,t,i,o){this.h=+e,this.s=+t,this.l=+i,this.opacity=+o}bi(Qe,ff,Io(wn,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new Qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mn:Math.pow(mn,e),new Qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,o=i+(i<.5?i:1-i)*t,r=2*i-o;return new He(zr(e>=240?e-240:e+120,r,o),zr(e,r,o),zr(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Qe(Ra(this.h),Bn(this.s),Bn(this.l),$n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$n(this.opacity);return`${e===1?"hsl(":"hsla("}${Ra(this.h)}, ${Bn(this.s)*100}%, ${Bn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ra(e){return e=(e||0)%360,e<0?e+360:e}function Bn(e){return Math.max(0,Math.min(1,e||0))}function zr(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const ki=e=>()=>e;function hf(e,t){return function(i){return e+i*t}}function df(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(o){return Math.pow(e+o*t,i)}}function pf(e){return(e=+e)==1?Bo:function(t,i){return i-t?df(t,i,e):ki(isNaN(t)?i:t)}}function Bo(e,t){var i=t-e;return i?hf(e,i):ki(isNaN(e)?t:e)}const er=function e(t){var i=pf(t);function o(r,n){var a=i((r=oi(r)).r,(n=oi(n)).r),l=i(r.g,n.g),s=i(r.b,n.b),u=Bo(r.opacity,n.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=s(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function gf(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(n){for(r=0;r<i;++r)o[r]=e[r]*(1-n)+t[r]*n;return o}}function vf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mf(e,t){var i=t?t.length:0,o=e?Math.min(i,e.length):0,r=new Array(o),n=new Array(i),a;for(a=0;a<o;++a)r[a]=Si(e[a],t[a]);for(;a<i;++a)n[a]=t[a];return function(l){for(a=0;a<o;++a)n[a]=r[a](l);return n}}function yf(e,t){var i=new Date;return e=+e,t=+t,function(o){return i.setTime(e*(1-o)+t*o),i}}function Ze(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function xf(e,t){var i={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?i[r]=Si(e[r],t[r]):o[r]=t[r];return function(n){for(r in i)o[r]=i[r](n);return o}}var si=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hr=new RegExp(si.source,"g");function _f(e){return function(){return e}}function wf(e){return function(t){return e(t)+""}}function jo(e,t){var i=si.lastIndex=Hr.lastIndex=0,o,r,n,a=-1,l=[],s=[];for(e=e+"",t=t+"";(o=si.exec(e))&&(r=Hr.exec(t));)(n=r.index)>i&&(n=t.slice(i,n),l[a]?l[a]+=n:l[++a]=n),(o=o[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:Ze(o,r)})),i=Hr.lastIndex;return i<t.length&&(n=t.slice(i),l[a]?l[a]+=n:l[++a]=n),l.length<2?s[0]?wf(s[0].x):_f(t):(t=s.length,function(u){for(var c=0,f;c<t;++c)l[(f=s[c]).i]=f.x(u);return l.join("")})}function Si(e,t){var i=typeof t,o;return t==null||i==="boolean"?ki(t):(i==="number"?Ze:i==="string"?(o=St(t))?(t=o,er):jo:t instanceof St?er:t instanceof Date?yf:vf(t)?gf:Array.isArray(t)?mf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xf:Ze)(e,t)}function bf(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}var La=180/Math.PI,li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wo(e,t,i,o,r,n){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*i+t*o)&&(i-=e*s,o-=t*s),(l=Math.sqrt(i*i+o*o))&&(i/=l,o/=l,s/=l),e*o<t*i&&(e=-e,t=-t,s=-s,a=-a),{translateX:r,translateY:n,rotate:Math.atan2(t,e)*La,skewX:Math.atan(s)*La,scaleX:a,scaleY:l}}var jn;function kf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?li:Wo(t.a,t.b,t.c,t.d,t.e,t.f)}function Sf(e){return e==null||(jn||(jn=document.createElementNS("http://www.w3.org/2000/svg","g")),jn.setAttribute("transform",e),!(e=jn.transform.baseVal.consolidate()))?li:(e=e.matrix,Wo(e.a,e.b,e.c,e.d,e.e,e.f))}function zo(e,t,i,o){function r(u){return u.length?u.pop()+" ":""}function n(u,c,f,h,d,p){if(u!==f||c!==h){var g=d.push("translate(",null,t,null,i);p.push({i:g-4,x:Ze(u,f)},{i:g-2,x:Ze(c,h)})}else(f||h)&&d.push("translate("+f+t+h+i)}function a(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Ze(u,c)})):c&&f.push(r(f)+"rotate("+c+o)}function l(u,c,f,h){u!==c?h.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Ze(u,c)}):c&&f.push(r(f)+"skewX("+c+o)}function s(u,c,f,h,d,p){if(u!==f||c!==h){var g=d.push(r(d)+"scale(",null,",",null,")");p.push({i:g-4,x:Ze(u,f)},{i:g-2,x:Ze(c,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),n(u.translateX,u.translateY,c.translateX,c.translateY,f,h),a(u.rotate,c.rotate,f,h),l(u.skewX,c.skewX,f,h),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(d){for(var p=-1,g=h.length,v;++p<g;)f[(v=h[p]).i]=v.x(d);return f.join("")}}}var Tf=zo(kf,"px, ","px)","deg)"),Uf=zo(Sf,", ",")",")"),Wt=0,fn=0,an=0,Ho=1e3,tr,hn,nr=0,Tt=0,pr=0,xn=typeof performance=="object"&&performance.now?performance:Date,Vo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ti(){return Tt||(Vo(Mf),Tt=xn.now()+pr)}function Mf(){Tt=0}function rr(){this._call=this._time=this._next=null}rr.prototype=Yo.prototype={constructor:rr,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Ti():+i)+(t==null?0:+t),!this._next&&hn!==this&&(hn?hn._next=this:tr=this,hn=this),this._call=e,this._time=i,ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,ui())}};function Yo(e,t,i){var o=new rr;return o.restart(e,t,i),o}function Cf(){Ti(),++Wt;for(var e=tr,t;e;)(t=Tt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wt}function Oa(){Tt=(nr=xn.now())+pr,Wt=fn=0;try{Cf()}finally{Wt=0,Ff(),Tt=0}}function Af(){var e=xn.now(),t=e-nr;t>Ho&&(pr-=t,nr=e)}function Ff(){for(var e,t=tr,i,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:tr=i);hn=e,ui(o)}function ui(e){if(!Wt){fn&&(fn=clearTimeout(fn));var t=e-Tt;t>24?(e<1/0&&(fn=setTimeout(Oa,e-xn.now()-pr)),an&&(an=clearInterval(an))):(an||(nr=xn.now(),an=setInterval(Af,Ho)),Wt=1,Vo(Oa))}}function Pa(e,t,i){var o=new rr;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,i),o}var Df=To("start","end","cancel","interrupt"),Ef=[],Xo=0,Ia=1,ci=2,Xn=3,Ga=4,fi=5,qn=6;function gr(e,t,i,o,r,n){var a=e.__transition;if(!a)e.__transition={};else if(i in a)return;Nf(e,i,{name:t,index:o,group:r,on:Df,tween:Ef,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:Xo})}function Ui(e,t){var i=$e(e,t);if(i.state>Xo)throw new Error("too late; already scheduled");return i}function nt(e,t){var i=$e(e,t);if(i.state>Xn)throw new Error("too late; already running");return i}function $e(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function Nf(e,t,i){var o=e.__transition,r;o[t]=i,i.timer=Yo(n,0,i.time);function n(u){i.state=Ia,i.timer.restart(a,i.delay,i.time),i.delay<=u&&a(u-i.delay)}function a(u){var c,f,h,d;if(i.state!==Ia)return s();for(c in o)if(d=o[c],d.name===i.name){if(d.state===Xn)return Pa(a);d.state===Ga?(d.state=qn,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[c]):+c<t&&(d.state=qn,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[c])}if(Pa(function(){i.state===Xn&&(i.state=Ga,i.timer.restart(l,i.delay,i.time),l(u))}),i.state=ci,i.on.call("start",e,e.__data__,i.index,i.group),i.state===ci){for(i.state=Xn,r=new Array(h=i.tween.length),c=0,f=-1;c<h;++c)(d=i.tween[c].value.call(e,e.__data__,i.index,i.group))&&(r[++f]=d);r.length=f+1}}function l(u){for(var c=u<i.duration?i.ease.call(null,u/i.duration):(i.timer.restart(s),i.state=fi,1),f=-1,h=r.length;++f<h;)r[f].call(e,c);i.state===fi&&(i.on.call("end",e,e.__data__,i.index,i.group),s())}function s(){i.state=qn,i.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Rf(e,t){var i=e.__transition,o,r,n=!0,a;if(i){t=t==null?null:t+"";for(a in i){if((o=i[a]).name!==t){n=!1;continue}r=o.state>ci&&o.state<fi,o.state=qn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete i[a]}n&&delete e.__transition}}function Lf(e){return this.each(function(){Rf(this,e)})}function Of(e,t){var i,o;return function(){var r=nt(this,e),n=r.tween;if(n!==i){o=i=n;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Pf(e,t,i){var o,r;if(typeof i!="function")throw new Error;return function(){var n=nt(this,e),a=n.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:i},s=0,u=r.length;s<u;++s)if(r[s].name===t){r[s]=l;break}s===u&&r.push(l)}n.tween=r}}function If(e,t){var i=this._id;if(e+="",arguments.length<2){for(var o=$e(this.node(),i).tween,r=0,n=o.length,a;r<n;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?Of:Pf)(i,e,t))}function Mi(e,t,i){var o=e._id;return e.each(function(){var r=nt(this,o);(r.value||(r.value={}))[t]=i.apply(this,arguments)}),function(r){return $e(r,o).value[t]}}function qo(e,t){var i;return(typeof t=="number"?Ze:t instanceof St?er:(i=St(t))?(t=i,er):jo)(e,t)}function Gf(e){return function(){this.removeAttribute(e)}}function Bf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jf(e,t,i){var o,r=i+"",n;return function(){var a=this.getAttribute(e);return a===r?null:a===o?n:n=t(o=a,i)}}function Wf(e,t,i){var o,r=i+"",n;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?n:n=t(o=a,i)}}function zf(e,t,i){var o,r,n;return function(){var a,l=i(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===r?n:(r=s,n=t(o=a,l)))}}function Hf(e,t,i){var o,r,n;return function(){var a,l=i(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===r?n:(r=s,n=t(o=a,l)))}}function Vf(e,t){var i=dr(e),o=i==="transform"?Uf:qo;return this.attrTween(e,typeof t=="function"?(i.local?Hf:zf)(i,o,Mi(this,"attr."+e,t)):t==null?(i.local?Bf:Gf)(i):(i.local?Wf:jf)(i,o,t))}function Yf(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function Xf(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function qf(e,t){var i,o;function r(){var n=t.apply(this,arguments);return n!==o&&(i=(o=n)&&Xf(e,n)),i}return r._value=t,r}function Jf(e,t){var i,o;function r(){var n=t.apply(this,arguments);return n!==o&&(i=(o=n)&&Yf(e,n)),i}return r._value=t,r}function Kf(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var o=dr(e);return this.tween(i,(o.local?qf:Jf)(o,t))}function Zf(e,t){return function(){Ui(this,e).delay=+t.apply(this,arguments)}}function Qf(e,t){return t=+t,function(){Ui(this,e).delay=t}}function $f(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zf:Qf)(t,e)):$e(this.node(),t).delay}function eh(e,t){return function(){nt(this,e).duration=+t.apply(this,arguments)}}function th(e,t){return t=+t,function(){nt(this,e).duration=t}}function nh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eh:th)(t,e)):$e(this.node(),t).duration}function rh(e,t){if(typeof t!="function")throw new Error;return function(){nt(this,e).ease=t}}function ih(e){var t=this._id;return arguments.length?this.each(rh(t,e)):$e(this.node(),t).ease}function ah(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;nt(this,e).ease=i}}function oh(e){if(typeof e!="function")throw new Error;return this.each(ah(this._id,e))}function sh(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,i=t.length,o=new Array(i),r=0;r<i;++r)for(var n=t[r],a=n.length,l=o[r]=[],s,u=0;u<a;++u)(s=n[u])&&e.call(s,s.__data__,u,n)&&l.push(s);return new lt(o,this._parents,this._name,this._id)}function lh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,o=t.length,r=i.length,n=Math.min(o,r),a=new Array(o),l=0;l<n;++l)for(var s=t[l],u=i[l],c=s.length,f=a[l]=new Array(c),h,d=0;d<c;++d)(h=s[d]||u[d])&&(f[d]=h);for(;l<o;++l)a[l]=t[l];return new lt(a,this._parents,this._name,this._id)}function uh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function ch(e,t,i){var o,r,n=uh(t)?Ui:nt;return function(){var a=n(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,i),a.on=r}}function fh(e,t){var i=this._id;return arguments.length<2?$e(this.node(),i).on.on(e):this.each(ch(i,e,t))}function hh(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function dh(){return this.on("end.remove",hh(this._id))}function ph(e){var t=this._name,i=this._id;typeof e!="function"&&(e=_i(e));for(var o=this._groups,r=o.length,n=new Array(r),a=0;a<r;++a)for(var l=o[a],s=l.length,u=n[a]=new Array(s),c,f,h=0;h<s;++h)(c=l[h])&&(f=e.call(c,c.__data__,h,l))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,gr(u[h],t,i,h,u,$e(c,i)));return new lt(n,this._parents,t,i)}function gh(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Mo(e));for(var o=this._groups,r=o.length,n=[],a=[],l=0;l<r;++l)for(var s=o[l],u=s.length,c,f=0;f<u;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,p=$e(c,i),g=0,v=h.length;g<v;++g)(d=h[g])&&gr(d,t,i,g,h,p);n.push(h),a.push(c)}return new lt(n,a,t,i)}var vh=_n.prototype.constructor;function mh(){return new vh(this._groups,this._parents)}function yh(e,t){var i,o,r;return function(){var n=jt(this,e),a=(this.style.removeProperty(e),jt(this,e));return n===a?null:n===i&&a===o?r:r=t(i=n,o=a)}}function Jo(e){return function(){this.style.removeProperty(e)}}function xh(e,t,i){var o,r=i+"",n;return function(){var a=jt(this,e);return a===r?null:a===o?n:n=t(o=a,i)}}function _h(e,t,i){var o,r,n;return function(){var a=jt(this,e),l=i(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),jt(this,e))),a===s?null:a===o&&s===r?n:(r=s,n=t(o=a,l))}}function wh(e,t){var i,o,r,n="style."+t,a="end."+n,l;return function(){var s=nt(this,e),u=s.on,c=s.value[n]==null?l||(l=Jo(t)):void 0;(u!==i||r!==c)&&(o=(i=u).copy()).on(a,r=c),s.on=o}}function bh(e,t,i){var o=(e+="")=="transform"?Tf:qo;return t==null?this.styleTween(e,yh(e,o)).on("end.style."+e,Jo(e)):typeof t=="function"?this.styleTween(e,_h(e,o,Mi(this,"style."+e,t))).each(wh(this._id,e)):this.styleTween(e,xh(e,o,t),i).on("end.style."+e,null)}function kh(e,t,i){return function(o){this.style.setProperty(e,t.call(this,o),i)}}function Sh(e,t,i){var o,r;function n(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&kh(e,a,i)),o}return n._value=t,n}function Th(e,t,i){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Sh(e,t,i??""))}function Uh(e){return function(){this.textContent=e}}function Mh(e){return function(){var t=e(this);this.textContent=t??""}}function Ch(e){return this.tween("text",typeof e=="function"?Mh(Mi(this,"text",e)):Uh(e==null?"":e+""))}function Ah(e){return function(t){this.textContent=e.call(this,t)}}function Fh(e){var t,i;function o(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&Ah(r)),t}return o._value=e,o}function Dh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fh(e))}function Eh(){for(var e=this._name,t=this._id,i=Ko(),o=this._groups,r=o.length,n=0;n<r;++n)for(var a=o[n],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=$e(s,t);gr(s,e,i,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new lt(o,this._parents,e,i)}function Nh(){var e,t,i=this,o=i._id,r=i.size();return new Promise(function(n,a){var l={value:a},s={value:function(){--r===0&&n()}};i.each(function(){var u=nt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),r===0&&n()})}var Rh=0;function lt(e,t,i,o){this._groups=e,this._parents=t,this._name=i,this._id=o}function Ko(){return++Rh}var at=_n.prototype;lt.prototype={constructor:lt,select:ph,selectAll:gh,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:sh,merge:lh,selection:mh,transition:Eh,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:fh,attr:Vf,attrTween:Kf,style:bh,styleTween:Th,text:Ch,textTween:Dh,remove:dh,tween:If,delay:$f,duration:nh,ease:ih,easeVarying:oh,end:Nh,[Symbol.iterator]:at[Symbol.iterator]};function Lh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Oh={time:null,delay:0,duration:250,ease:Lh};function Ph(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function Ih(e){var t,i;e instanceof lt?(t=e._id,e=e._name):(t=Ko(),(i=Oh).time=Ti(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,n=0;n<r;++n)for(var a=o[n],l=a.length,s,u=0;u<l;++u)(s=a[u])&&gr(s,e,t,u,a,i||Ph(s,t));return new lt(o,this._parents,e,t)}_n.prototype.interrupt=Lf;_n.prototype.transition=Ih;const hi=Math.PI,di=2*hi,_t=1e-6,Gh=di-_t;function Zo(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function Bh(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Zo;const i=10**t;return function(o){this._+=o[0];for(let r=1,n=o.length;r<n;++r)this._+=Math.round(arguments[r]*i)/i+o[r]}}class jh{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Zo:Bh(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,o,r){this._append`Q${+t},${+i},${this._x1=+o},${this._y1=+r}`}bezierCurveTo(t,i,o,r,n,a){this._append`C${+t},${+i},${+o},${+r},${this._x1=+n},${this._y1=+a}`}arcTo(t,i,o,r,n){if(t=+t,i=+i,o=+o,r=+r,n=+n,n<0)throw new Error(`negative radius: ${n}`);let a=this._x1,l=this._y1,s=o-t,u=r-i,c=a-t,f=l-i,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(h>_t)if(!(Math.abs(f*s-u*c)>_t)||!n)this._append`L${this._x1=t},${this._y1=i}`;else{let d=o-a,p=r-l,g=s*s+u*u,v=d*d+p*p,N=Math.sqrt(g),k=Math.sqrt(h),b=n*Math.tan((hi-Math.acos((g+h-v)/(2*N*k)))/2),y=b/k,T=b/N;Math.abs(y-1)>_t&&this._append`L${t+y*c},${i+y*f}`,this._append`A${n},${n},0,0,${+(f*d>c*p)},${this._x1=t+T*s},${this._y1=i+T*u}`}}arc(t,i,o,r,n,a){if(t=+t,i=+i,o=+o,a=!!a,o<0)throw new Error(`negative radius: ${o}`);let l=o*Math.cos(r),s=o*Math.sin(r),u=t+l,c=i+s,f=1^a,h=a?r-n:n-r;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>_t||Math.abs(this._y1-c)>_t)&&this._append`L${u},${c}`,o&&(h<0&&(h=h%di+di),h>Gh?this._append`A${o},${o},0,1,${f},${t-l},${i-s}A${o},${o},0,1,${f},${this._x1=u},${this._y1=c}`:h>_t&&this._append`A${o},${o},0,${+(h>=hi)},${f},${this._x1=t+o*Math.cos(n)},${this._y1=i+o*Math.sin(n)}`)}rect(t,i,o,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${o=+o}v${+r}h${-o}Z`}toString(){return this._}}function Wh(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ir(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,o=e.slice(0,i);return[o.length>1?o[0]+o.slice(2):o,+e.slice(i+1)]}function zt(e){return e=ir(Math.abs(e)),e?e[1]:NaN}function zh(e,t){return function(i,o){for(var r=i.length,n=[],a=0,l=e[0],s=0;r>0&&l>0&&(s+l+1>o&&(l=Math.max(1,o-s)),n.push(i.substring(r-=l,r+l)),!((s+=l+1)>o));)l=e[a=(a+1)%e.length];return n.reverse().join(t)}}function Hh(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var Vh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ar(e){if(!(t=Vh.exec(e)))throw new Error("invalid format: "+e);var t;return new Ci({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ar.prototype=Ci.prototype;function Ci(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ci.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yh(e){e:for(var t=e.length,i=1,o=-1,r;i<t;++i)switch(e[i]){case".":o=r=i;break;case"0":o===0&&(o=i),r=i;break;default:if(!+e[i])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(r+1):e}var Qo;function Xh(e,t){var i=ir(e,t);if(!i)return e+"";var o=i[0],r=i[1],n=r-(Qo=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=o.length;return n===a?o:n>a?o+new Array(n-a+1).join("0"):n>0?o.slice(0,n)+"."+o.slice(n):"0."+new Array(1-n).join("0")+ir(e,Math.max(0,t+n-1))[0]}function Ba(e,t){var i=ir(e,t);if(!i)return e+"";var o=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}const ja={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Wh,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ba(e*100,t),r:Ba,s:Xh,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wa(e){return e}var za=Array.prototype.map,Ha=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qh(e){var t=e.grouping===void 0||e.thousands===void 0?Wa:zh(za.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",n=e.numerals===void 0?Wa:Hh(za.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ar(f);var h=f.fill,d=f.align,p=f.sign,g=f.symbol,v=f.zero,N=f.width,k=f.comma,b=f.precision,y=f.trim,T=f.type;T==="n"?(k=!0,T="g"):ja[T]||(b===void 0&&(b=12),y=!0,T="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var S=g==="$"?i:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",w=g==="$"?o:/[%p]/.test(T)?a:"",C=ja[T],L=/[defgprs%]/.test(T);b=b===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function O(I){var _=S,F=w,A,J,Y;if(T==="c")F=C(I)+F,I="";else{I=+I;var $=I<0||1/I<0;if(I=isNaN(I)?s:C(Math.abs(I),b),y&&(I=Yh(I)),$&&+I==0&&p!=="+"&&($=!1),_=($?p==="("?p:l:p==="-"||p==="("?"":p)+_,F=(T==="s"?Ha[8+Qo/3]:"")+F+($&&p==="("?")":""),L){for(A=-1,J=I.length;++A<J;)if(Y=I.charCodeAt(A),48>Y||Y>57){F=(Y===46?r+I.slice(A+1):I.slice(A))+F,I=I.slice(0,A);break}}}k&&!v&&(I=t(I,1/0));var ne=_.length+I.length+F.length,j=ne<N?new Array(N-ne+1).join(h):"";switch(k&&v&&(I=t(j+I,j.length?N-F.length:1/0),j=""),d){case"<":I=_+I+F+j;break;case"=":I=_+j+I+F;break;case"^":I=j.slice(0,ne=j.length>>1)+_+I+F+j.slice(ne);break;default:I=j+_+I+F;break}return n(I)}return O.toString=function(){return f+""},O}function c(f,h){var d=u((f=ar(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(zt(h)/3)))*3,g=Math.pow(10,-p),v=Ha[8+p/3];return function(N){return d(g*N)+v}}return{format:u,formatPrefix:c}}var Wn,$o,es;Jh({thousands:",",grouping:[3],currency:["$",""]});function Jh(e){return Wn=qh(e),$o=Wn.format,es=Wn.formatPrefix,Wn}function Kh(e){return Math.max(0,-zt(Math.abs(e)))}function Zh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zt(t)/3)))*3-zt(Math.abs(e)))}function Qh(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zt(t)-zt(e))+1}function Ai(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Va=Symbol("implicit");function ts(){var e=new ti,t=[],i=[],o=Va;function r(n){let a=e.get(n);if(a===void 0){if(o!==Va)return o;e.set(n,a=t.push(n)-1)}return i[a%i.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new ti;for(const a of n)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(n){return arguments.length?(i=Array.from(n),r):i.slice()},r.unknown=function(n){return arguments.length?(o=n,r):o},r.copy=function(){return ts(t,i).unknown(o)},Ai.apply(r,arguments),r}function $h(e){return function(){return e}}function ed(e){return+e}var Ya=[0,1];function It(e){return e}function pi(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:$h(isNaN(t)?NaN:.5)}function td(e,t){var i;return e>t&&(i=e,e=t,t=i),function(o){return Math.max(e,Math.min(t,o))}}function nd(e,t,i){var o=e[0],r=e[1],n=t[0],a=t[1];return r<o?(o=pi(r,o),n=i(a,n)):(o=pi(o,r),n=i(n,a)),function(l){return n(o(l))}}function rd(e,t,i){var o=Math.min(e.length,t.length)-1,r=new Array(o),n=new Array(o),a=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<o;)r[a]=pi(e[a],e[a+1]),n[a]=i(t[a],t[a+1]);return function(l){var s=$l(e,l,1,o)-1;return n[s](r[s](l))}}function ns(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function id(){var e=Ya,t=Ya,i=Si,o,r,n,a=It,l,s,u;function c(){var h=Math.min(e.length,t.length);return a!==It&&(a=td(e[0],e[h-1])),l=h>2?rd:nd,s=u=null,f}function f(h){return h==null||isNaN(h=+h)?n:(s||(s=l(e.map(o),t,i)))(o(a(h)))}return f.invert=function(h){return a(r((u||(u=l(t,e.map(o),Ze)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,ed),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),i=bf,c()},f.clamp=function(h){return arguments.length?(a=h?!0:It,c()):a!==It},f.interpolate=function(h){return arguments.length?(i=h,c()):i},f.unknown=function(h){return arguments.length?(n=h,f):n},function(h,d){return o=h,r=d,c()}}function rs(){return id()(It,It)}function ad(e,t,i,o){var r=ri(e,t,i),n;switch(o=ar(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return o.precision==null&&!isNaN(n=Zh(r,a))&&(o.precision=n),es(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(n=Qh(r,Math.max(Math.abs(e),Math.abs(t))))&&(o.precision=n-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(n=Kh(r))&&(o.precision=n-(o.type==="%")*2);break}}return $o(o)}function od(e){var t=e.domain;return e.ticks=function(i){var o=t();return uu(o[0],o[o.length-1],i??10)},e.tickFormat=function(i,o){var r=t();return ad(r[0],r[r.length-1],i??10,o)},e.nice=function(i){i==null&&(i=10);var o=t(),r=0,n=o.length-1,a=o[r],l=o[n],s,u,c=10;for(l<a&&(u=a,a=l,l=u,u=r,r=n,n=u);c-- >0;){if(u=ni(a,l,i),u===s)return o[r]=a,o[n]=l,t(o);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function is(){var e=rs();return e.copy=function(){return ns(e,is())},Ai.apply(e,arguments),od(e)}function sd(e,t){e=e.slice();var i=0,o=e.length-1,r=e[i],n=e[o],a;return n<r&&(a=i,i=o,o=a,a=r,r=n,n=a),e[i]=t.floor(r),e[o]=t.ceil(n),e}const Vr=new Date,Yr=new Date;function Le(e,t,i,o){function r(n){return e(n=arguments.length===0?new Date:new Date(+n)),n}return r.floor=n=>(e(n=new Date(+n)),n),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=n=>{const a=r(n),l=r.ceil(n);return n-a<l-n?a:l},r.offset=(n,a)=>(t(n=new Date(+n),a==null?1:Math.floor(a)),n),r.range=(n,a,l)=>{const s=[];if(n=r.ceil(n),l=l==null?1:Math.floor(l),!(n<a)||!(l>0))return s;let u;do s.push(u=new Date(+n)),t(n,l),e(n);while(u<n&&n<a);return s},r.filter=n=>Le(a=>{if(a>=a)for(;e(a),!n(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;t(a,-1),!n(a););else for(;--l>=0;)for(;t(a,1),!n(a););}),i&&(r.count=(n,a)=>(Vr.setTime(+n),Yr.setTime(+a),e(Vr),e(Yr),Math.floor(i(Vr,Yr))),r.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?r.filter(o?a=>o(a)%n===0:a=>r.count(0,a)%n===0):r)),r}const or=Le(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);or.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Le(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):or);or.range;const ot=1e3,Xe=ot*60,st=Xe*60,ut=st*24,Fi=ut*7,Xa=ut*30,Xr=ut*365,Gt=Le(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ot)},(e,t)=>(t-e)/ot,e=>e.getUTCSeconds());Gt.range;const Di=Le(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ot)},(e,t)=>{e.setTime(+e+t*Xe)},(e,t)=>(t-e)/Xe,e=>e.getMinutes());Di.range;const ld=Le(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xe)},(e,t)=>(t-e)/Xe,e=>e.getUTCMinutes());ld.range;const Ei=Le(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ot-e.getMinutes()*Xe)},(e,t)=>{e.setTime(+e+t*st)},(e,t)=>(t-e)/st,e=>e.getHours());Ei.range;const ud=Le(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*st)},(e,t)=>(t-e)/st,e=>e.getUTCHours());ud.range;const bn=Le(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xe)/ut,e=>e.getDate()-1);bn.range;const Ni=Le(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ut,e=>e.getUTCDate()-1);Ni.range;const cd=Le(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ut,e=>Math.floor(e/ut));cd.range;function Mt(e){return Le(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Xe)/Fi)}const vr=Mt(0),sr=Mt(1),fd=Mt(2),hd=Mt(3),Ht=Mt(4),dd=Mt(5),pd=Mt(6);vr.range;sr.range;fd.range;hd.range;Ht.range;dd.range;pd.range;function Ct(e){return Le(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/Fi)}const as=Ct(0),lr=Ct(1),gd=Ct(2),vd=Ct(3),Vt=Ct(4),md=Ct(5),yd=Ct(6);as.range;lr.range;gd.range;vd.range;Vt.range;md.range;yd.range;const Ri=Le(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ri.range;const xd=Le(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xd.range;const ct=Le(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ct.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Le(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});ct.range;const Ut=Le(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ut.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Le(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});Ut.range;function _d(e,t,i,o,r,n){const a=[[Gt,1,ot],[Gt,5,5*ot],[Gt,15,15*ot],[Gt,30,30*ot],[n,1,Xe],[n,5,5*Xe],[n,15,15*Xe],[n,30,30*Xe],[r,1,st],[r,3,3*st],[r,6,6*st],[r,12,12*st],[o,1,ut],[o,2,2*ut],[i,1,Fi],[t,1,Xa],[t,3,3*Xa],[e,1,Xr]];function l(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const d=f&&typeof f.range=="function"?f:s(u,c,f),p=d?d.range(u,+c+1):[];return h?p.reverse():p}function s(u,c,f){const h=Math.abs(c-u)/f,d=xi(([,,v])=>v).right(a,h);if(d===a.length)return e.every(ri(u/Xr,c/Xr,f));if(d===0)return or.every(Math.max(ri(u,c,f),1));const[p,g]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(g)}return[l,s]}const[wd,bd]=_d(ct,Ri,vr,bn,Ei,Di);function qr(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jr(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function on(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function kd(e){var t=e.dateTime,i=e.date,o=e.time,r=e.periods,n=e.days,a=e.shortDays,l=e.months,s=e.shortMonths,u=sn(r),c=ln(r),f=sn(n),h=ln(n),d=sn(a),p=ln(a),g=sn(l),v=ln(l),N=sn(s),k=ln(s),b={a:$,A:ne,b:j,B:W,c:null,d:$a,e:$a,f:Yd,g:n0,G:i0,H:zd,I:Hd,j:Vd,L:os,m:Xd,M:qd,p:m,q:U,Q:no,s:ro,S:Jd,u:Kd,U:Zd,V:Qd,w:$d,W:e0,x:null,X:null,y:t0,Y:r0,Z:a0,"%":to},y={a:R,A:P,b:D,B:V,c:null,d:eo,e:eo,f:u0,g:x0,G:w0,H:o0,I:s0,j:l0,L:ls,m:c0,M:f0,p:G,q:H,Q:no,s:ro,S:h0,u:d0,U:p0,V:g0,w:v0,W:m0,x:null,X:null,y:y0,Y:_0,Z:b0,"%":to},T={a:O,A:I,b:_,B:F,c:A,d:Za,e:Za,f:Gd,g:Ka,G:Ja,H:Qa,I:Qa,j:Ld,L:Id,m:Rd,M:Od,p:L,q:Nd,Q:jd,s:Wd,S:Pd,u:Cd,U:Ad,V:Fd,w:Md,W:Dd,x:J,X:Y,y:Ka,Y:Ja,Z:Ed,"%":Bd};b.x=S(i,b),b.X=S(o,b),b.c=S(t,b),y.x=S(i,y),y.X=S(o,y),y.c=S(t,y);function S(E,X){return function(B){var x=[],se=-1,Z=0,K=E.length,Q,re,q;for(B instanceof Date||(B=new Date(+B));++se<K;)E.charCodeAt(se)===37&&(x.push(E.slice(Z,se)),(re=qa[Q=E.charAt(++se)])!=null?Q=E.charAt(++se):re=Q==="e"?" ":"0",(q=X[Q])&&(Q=q(B,re)),x.push(Q),Z=se+1);return x.push(E.slice(Z,se)),x.join("")}}function w(E,X){return function(B){var x=on(1900,void 0,1),se=C(x,E,B+="",0),Z,K;if(se!=B.length)return null;if("Q"in x)return new Date(x.Q);if("s"in x)return new Date(x.s*1e3+("L"in x?x.L:0));if(X&&!("Z"in x)&&(x.Z=0),"p"in x&&(x.H=x.H%12+x.p*12),x.m===void 0&&(x.m="q"in x?x.q:0),"V"in x){if(x.V<1||x.V>53)return null;"w"in x||(x.w=1),"Z"in x?(Z=Jr(on(x.y,0,1)),K=Z.getUTCDay(),Z=K>4||K===0?lr.ceil(Z):lr(Z),Z=Ni.offset(Z,(x.V-1)*7),x.y=Z.getUTCFullYear(),x.m=Z.getUTCMonth(),x.d=Z.getUTCDate()+(x.w+6)%7):(Z=qr(on(x.y,0,1)),K=Z.getDay(),Z=K>4||K===0?sr.ceil(Z):sr(Z),Z=bn.offset(Z,(x.V-1)*7),x.y=Z.getFullYear(),x.m=Z.getMonth(),x.d=Z.getDate()+(x.w+6)%7)}else("W"in x||"U"in x)&&("w"in x||(x.w="u"in x?x.u%7:"W"in x?1:0),K="Z"in x?Jr(on(x.y,0,1)).getUTCDay():qr(on(x.y,0,1)).getDay(),x.m=0,x.d="W"in x?(x.w+6)%7+x.W*7-(K+5)%7:x.w+x.U*7-(K+6)%7);return"Z"in x?(x.H+=x.Z/100|0,x.M+=x.Z%100,Jr(x)):qr(x)}}function C(E,X,B,x){for(var se=0,Z=X.length,K=B.length,Q,re;se<Z;){if(x>=K)return-1;if(Q=X.charCodeAt(se++),Q===37){if(Q=X.charAt(se++),re=T[Q in qa?X.charAt(se++):Q],!re||(x=re(E,B,x))<0)return-1}else if(Q!=B.charCodeAt(x++))return-1}return x}function L(E,X,B){var x=u.exec(X.slice(B));return x?(E.p=c.get(x[0].toLowerCase()),B+x[0].length):-1}function O(E,X,B){var x=d.exec(X.slice(B));return x?(E.w=p.get(x[0].toLowerCase()),B+x[0].length):-1}function I(E,X,B){var x=f.exec(X.slice(B));return x?(E.w=h.get(x[0].toLowerCase()),B+x[0].length):-1}function _(E,X,B){var x=N.exec(X.slice(B));return x?(E.m=k.get(x[0].toLowerCase()),B+x[0].length):-1}function F(E,X,B){var x=g.exec(X.slice(B));return x?(E.m=v.get(x[0].toLowerCase()),B+x[0].length):-1}function A(E,X,B){return C(E,t,X,B)}function J(E,X,B){return C(E,i,X,B)}function Y(E,X,B){return C(E,o,X,B)}function $(E){return a[E.getDay()]}function ne(E){return n[E.getDay()]}function j(E){return s[E.getMonth()]}function W(E){return l[E.getMonth()]}function m(E){return r[+(E.getHours()>=12)]}function U(E){return 1+~~(E.getMonth()/3)}function R(E){return a[E.getUTCDay()]}function P(E){return n[E.getUTCDay()]}function D(E){return s[E.getUTCMonth()]}function V(E){return l[E.getUTCMonth()]}function G(E){return r[+(E.getUTCHours()>=12)]}function H(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var X=S(E+="",b);return X.toString=function(){return E},X},parse:function(E){var X=w(E+="",!1);return X.toString=function(){return E},X},utcFormat:function(E){var X=S(E+="",y);return X.toString=function(){return E},X},utcParse:function(E){var X=w(E+="",!0);return X.toString=function(){return E},X}}}var qa={"-":"",_:" ",0:"0"},Oe=/^\s*\d+/,Sd=/^%/,Td=/[\\^$*+?|[\]().{}]/g;function _e(e,t,i){var o=e<0?"-":"",r=(o?-e:e)+"",n=r.length;return o+(n<i?new Array(i-n+1).join(t)+r:r)}function Ud(e){return e.replace(Td,"\\$&")}function sn(e){return new RegExp("^(?:"+e.map(Ud).join("|")+")","i")}function ln(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function Md(e,t,i){var o=Oe.exec(t.slice(i,i+1));return o?(e.w=+o[0],i+o[0].length):-1}function Cd(e,t,i){var o=Oe.exec(t.slice(i,i+1));return o?(e.u=+o[0],i+o[0].length):-1}function Ad(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.U=+o[0],i+o[0].length):-1}function Fd(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.V=+o[0],i+o[0].length):-1}function Dd(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.W=+o[0],i+o[0].length):-1}function Ja(e,t,i){var o=Oe.exec(t.slice(i,i+4));return o?(e.y=+o[0],i+o[0].length):-1}function Ka(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),i+o[0].length):-1}function Ed(e,t,i){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),i+o[0].length):-1}function Nd(e,t,i){var o=Oe.exec(t.slice(i,i+1));return o?(e.q=o[0]*3-3,i+o[0].length):-1}function Rd(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.m=o[0]-1,i+o[0].length):-1}function Za(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.d=+o[0],i+o[0].length):-1}function Ld(e,t,i){var o=Oe.exec(t.slice(i,i+3));return o?(e.m=0,e.d=+o[0],i+o[0].length):-1}function Qa(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.H=+o[0],i+o[0].length):-1}function Od(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.M=+o[0],i+o[0].length):-1}function Pd(e,t,i){var o=Oe.exec(t.slice(i,i+2));return o?(e.S=+o[0],i+o[0].length):-1}function Id(e,t,i){var o=Oe.exec(t.slice(i,i+3));return o?(e.L=+o[0],i+o[0].length):-1}function Gd(e,t,i){var o=Oe.exec(t.slice(i,i+6));return o?(e.L=Math.floor(o[0]/1e3),i+o[0].length):-1}function Bd(e,t,i){var o=Sd.exec(t.slice(i,i+1));return o?i+o[0].length:-1}function jd(e,t,i){var o=Oe.exec(t.slice(i));return o?(e.Q=+o[0],i+o[0].length):-1}function Wd(e,t,i){var o=Oe.exec(t.slice(i));return o?(e.s=+o[0],i+o[0].length):-1}function $a(e,t){return _e(e.getDate(),t,2)}function zd(e,t){return _e(e.getHours(),t,2)}function Hd(e,t){return _e(e.getHours()%12||12,t,2)}function Vd(e,t){return _e(1+bn.count(ct(e),e),t,3)}function os(e,t){return _e(e.getMilliseconds(),t,3)}function Yd(e,t){return os(e,t)+"000"}function Xd(e,t){return _e(e.getMonth()+1,t,2)}function qd(e,t){return _e(e.getMinutes(),t,2)}function Jd(e,t){return _e(e.getSeconds(),t,2)}function Kd(e){var t=e.getDay();return t===0?7:t}function Zd(e,t){return _e(vr.count(ct(e)-1,e),t,2)}function ss(e){var t=e.getDay();return t>=4||t===0?Ht(e):Ht.ceil(e)}function Qd(e,t){return e=ss(e),_e(Ht.count(ct(e),e)+(ct(e).getDay()===4),t,2)}function $d(e){return e.getDay()}function e0(e,t){return _e(sr.count(ct(e)-1,e),t,2)}function t0(e,t){return _e(e.getFullYear()%100,t,2)}function n0(e,t){return e=ss(e),_e(e.getFullYear()%100,t,2)}function r0(e,t){return _e(e.getFullYear()%1e4,t,4)}function i0(e,t){var i=e.getDay();return e=i>=4||i===0?Ht(e):Ht.ceil(e),_e(e.getFullYear()%1e4,t,4)}function a0(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_e(t/60|0,"0",2)+_e(t%60,"0",2)}function eo(e,t){return _e(e.getUTCDate(),t,2)}function o0(e,t){return _e(e.getUTCHours(),t,2)}function s0(e,t){return _e(e.getUTCHours()%12||12,t,2)}function l0(e,t){return _e(1+Ni.count(Ut(e),e),t,3)}function ls(e,t){return _e(e.getUTCMilliseconds(),t,3)}function u0(e,t){return ls(e,t)+"000"}function c0(e,t){return _e(e.getUTCMonth()+1,t,2)}function f0(e,t){return _e(e.getUTCMinutes(),t,2)}function h0(e,t){return _e(e.getUTCSeconds(),t,2)}function d0(e){var t=e.getUTCDay();return t===0?7:t}function p0(e,t){return _e(as.count(Ut(e)-1,e),t,2)}function us(e){var t=e.getUTCDay();return t>=4||t===0?Vt(e):Vt.ceil(e)}function g0(e,t){return e=us(e),_e(Vt.count(Ut(e),e)+(Ut(e).getUTCDay()===4),t,2)}function v0(e){return e.getUTCDay()}function m0(e,t){return _e(lr.count(Ut(e)-1,e),t,2)}function y0(e,t){return _e(e.getUTCFullYear()%100,t,2)}function x0(e,t){return e=us(e),_e(e.getUTCFullYear()%100,t,2)}function _0(e,t){return _e(e.getUTCFullYear()%1e4,t,4)}function w0(e,t){var i=e.getUTCDay();return e=i>=4||i===0?Vt(e):Vt.ceil(e),_e(e.getUTCFullYear()%1e4,t,4)}function b0(){return"+0000"}function to(){return"%"}function no(e){return+e}function ro(e){return Math.floor(+e/1e3)}var Ot,Li;k0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k0(e){return Ot=kd(e),Li=Ot.format,Ot.parse,Ot.utcFormat,Ot.utcParse,Ot}function S0(e){return new Date(e)}function T0(e){return e instanceof Date?+e:+new Date(+e)}function cs(e,t,i,o,r,n,a,l,s,u){var c=rs(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),g=u("%I:%M"),v=u("%I %p"),N=u("%a %d"),k=u("%b %d"),b=u("%B"),y=u("%Y");function T(S){return(s(S)<S?d:l(S)<S?p:a(S)<S?g:n(S)<S?v:o(S)<S?r(S)<S?N:k:i(S)<S?b:y)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?h(Array.from(S,T0)):h().map(S0)},c.ticks=function(S){var w=h();return e(w[0],w[w.length-1],S??10)},c.tickFormat=function(S,w){return w==null?T:u(w)},c.nice=function(S){var w=h();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?h(sd(w,S)):c},c.copy=function(){return ns(c,cs(e,t,i,o,r,n,a,l,s,u))},c}function U0(){return Ai.apply(cs(wd,bd,ct,Ri,vr,bn,Ei,Di,Gt,Li).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Pt(e){return function(){return e}}function M0(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const o=Math.floor(i);if(!(o>=0))throw new RangeError(`invalid digits: ${i}`);t=o}return e},()=>new jh(t)}function C0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fs(e){this._context=e}fs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function A0(e){return new fs(e)}function F0(e){return e[0]}function D0(e){return e[1]}function E0(e,t){var i=Pt(!0),o=null,r=A0,n=null,a=M0(l);e=typeof e=="function"?e:e===void 0?F0:Pt(e),t=typeof t=="function"?t:t===void 0?D0:Pt(t);function l(s){var u,c=(s=C0(s)).length,f,h=!1,d;for(o==null&&(n=r(d=a())),u=0;u<=c;++u)!(u<c&&i(f=s[u],u,s))===h&&((h=!h)?n.lineStart():n.lineEnd()),h&&n.point(+e(f,u,s),+t(f,u,s));if(d)return n=null,d+""||null}return l.x=function(s){return arguments.length?(e=typeof s=="function"?s:Pt(+s),l):e},l.y=function(s){return arguments.length?(t=typeof s=="function"?s:Pt(+s),l):t},l.defined=function(s){return arguments.length?(i=typeof s=="function"?s:Pt(!!s),l):i},l.curve=function(s){return arguments.length?(r=s,o!=null&&(n=r(o)),l):r},l.context=function(s){return arguments.length?(s==null?o=n=null:n=r(o=s),l):o},l}function io(e){return e<0?-1:1}function ao(e,t,i){var o=e._x1-e._x0,r=t-e._x1,n=(e._y1-e._y0)/(o||r<0&&-0),a=(i-e._y1)/(r||o<0&&-0),l=(n*r+a*o)/(o+r);return(io(n)+io(a))*Math.min(Math.abs(n),Math.abs(a),.5*Math.abs(l))||0}function oo(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function Kr(e,t,i){var o=e._x0,r=e._y0,n=e._x1,a=e._y1,l=(n-o)/3;e._context.bezierCurveTo(o+l,r+l*t,n-l,a-l*i,n,a)}function ur(e){this._context=e}ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kr(this,this._t0,oo(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Kr(this,oo(this,i=ao(this,e,t)),i);break;default:Kr(this,this._t0,i=ao(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};Object.create(ur.prototype).point=function(e,t){ur.prototype.point.call(this,t,e)};function N0(e){return new ur(e)}function dn(e,t,i){this.k=e,this.x=t,this.y=i}dn.prototype={constructor:dn,scale:function(e){return e===1?this:new dn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new dn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};dn.prototype;const R0=({data:e,width:t=400,height:i=200})=>{const o=we.useRef(null);return we.useEffect(()=>{if(!o.current||e.length===0)return;const r=Qc(o.current);r.selectAll("*").remove();const n={top:20,right:30,bottom:30,left:40},a=t-n.left-n.right,l=i-n.top-n.bottom,s=r.append("g").attr("transform",`translate(${n.left},${n.top})`),u=iu(e,v=>v.category),c=Array.from(u.keys()),f=U0().domain(eu(e,v=>v.timestamp)).range([0,a]),h=is().domain([0,cu(e,v=>v.value)||100]).range([l,0]),d=ts().domain(c).range(["#00ffff","#ff00ff","#00ff41","#ffaa00"]),p=E0().x(v=>f(v.timestamp)).y(v=>h(v.value)).curve(N0);s.append("g").attr("class","grid").attr("transform",`translate(0,${l})`).call(ka(f).tickSize(-l).tickFormat(()=>"")).selectAll("line").style("stroke","#1a1a2e").style("opacity",.3),s.append("g").attr("class","grid").call(Sa(h).tickSize(-a).tickFormat(()=>"")).selectAll("line").style("stroke","#1a1a2e").style("opacity",.3),c.forEach(v=>{const N=u.get(v)||[];s.append("path").datum(N).attr("fill","none").attr("stroke",d(v)).attr("stroke-width",2).attr("stroke-opacity",.8).attr("d",p),s.append("path").datum(N).attr("fill","none").attr("stroke",d(v)).attr("stroke-width",6).attr("stroke-opacity",.2).attr("d",p).style("filter","blur(3px)"),s.selectAll(`.dot-${v}`).data(N).enter().append("circle").attr("class",`dot-${v}`).attr("cx",k=>f(k.timestamp)).attr("cy",k=>h(k.value)).attr("r",3).attr("fill",d(v)).style("opacity",.8)}),s.append("g").attr("transform",`translate(0,${l})`).call(ka(f).tickFormat(Li("%H:%M"))).selectAll("text").style("fill","#ffffff").style("font-size","12px"),s.append("g").call(Sa(h)).selectAll("text").style("fill","#ffffff").style("font-size","12px"),s.selectAll(".domain, .tick line").style("stroke","#ffffff").style("opacity",.3);const g=s.append("g").attr("transform",`translate(${a-100}, 20)`);c.forEach((v,N)=>{const k=g.append("g").attr("transform",`translate(0, ${N*20})`);k.append("rect").attr("width",12).attr("height",12).attr("fill",d(v)).attr("opacity",.8),k.append("text").attr("x",16).attr("y",9).attr("dy","0.35em").style("fill","#ffffff").style("font-size","12px").text(v.toUpperCase())})},[e,t,i]),M.jsx("div",{style:{background:"rgba(26, 26, 46, 0.8)",borderRadius:"8px",padding:"16px",border:"1px solid rgba(0, 255, 255, 0.2)"},children:M.jsx("svg",{ref:o,width:t,height:i,style:{display:"block"}})})},L0=({className:e})=>{var r,n;const[t,i]=we.useState("production"),o=[{id:"production",name:"Production",color:"#00FF94"},{id:"staging",name:"Staging",color:"#FFB800"},{id:"development",name:"Development",color:"#FF4757"}];return M.jsxs(Ee.div,{className:`workspace-switcher ${e}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[M.jsxs("div",{style:{backgroundColor:"#0A0A0F",border:"1px solid #00FFFF",borderRadius:"8px",padding:"16px",color:"#00FFFF"},children:[M.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"12px"},children:"Workspace"}),M.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:o.map(a=>M.jsx(Ee.button,{onClick:()=>i(a.id),whileHover:{scale:1.05},whileTap:{scale:.95},style:{backgroundColor:t===a.id?a.color:"#1A1A2E",color:t===a.id?"#0A0A0F":"#CCCCCC",border:`1px solid ${a.color}`,borderRadius:"4px",padding:"8px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},children:a.name},a.id))}),M.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"#CCCCCC",display:"flex",alignItems:"center",gap:"8px"},children:[M.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:((r=o.find(a=>a.id===t))==null?void 0:r.color)||"#00FFFF",animation:"pulse 2s infinite"}}),"Active: ",(n=o.find(a=>a.id===t))==null?void 0:n.name]})]}),M.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.5; }
          100% { opacity: 1; }
        }
      `})]})},O0=({className:e})=>{const[t,i]=we.useState(!1);return M.jsxs(Ee.div,{className:`ai-assistant ${e}`,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[M.jsxs("div",{className:"ai-assistant-header",onClick:()=>i(!t),style:{backgroundColor:"#0A0A0F",border:"1px solid #00FFFF",borderRadius:"8px",padding:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",color:"#00FFFF"},children:[M.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#00FF94",animation:"pulse 2s infinite"}}),M.jsx("span",{children:"AI Assistant"}),M.jsx("span",{style:{marginLeft:"auto",fontSize:"12px"},children:t?"▼":"▶"})]}),t&&M.jsxs(Ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{backgroundColor:"#0A0A0F",border:"1px solid #00FFFF",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"16px",color:"#CCCCCC"},children:[M.jsx("div",{style:{fontSize:"14px",marginBottom:"12px"},children:"AI Assistant is ready to help with:"}),M.jsxs("ul",{style:{fontSize:"12px",listStyle:"none",padding:0,margin:0},children:[M.jsx("li",{style:{marginBottom:"4px"},children:"• System optimization"}),M.jsx("li",{style:{marginBottom:"4px"},children:"• Error diagnosis"}),M.jsx("li",{style:{marginBottom:"4px"},children:"• Performance analysis"}),M.jsx("li",{style:{marginBottom:"4px"},children:"• Task automation"})]}),M.jsx("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#1A1A2E",borderRadius:"4px",fontSize:"12px",color:"#00FFFF"},children:"Status: Available"})]}),M.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.5; }
          100% { opacity: 1; }
        }
      `})]})};class P0{constructor(){Nt(this,"baseURL");this.baseURL=window.location.origin}async request(t,i){const o=`${this.baseURL}${t}`,r=await fetch(o,{headers:{"Content-Type":"application/json",...i==null?void 0:i.headers},...i});if(!r.ok)throw new Error(`API request failed: ${r.status} ${r.statusText}`);return r.json()}async getHealth(){return this.request("/healthz")}async getMetrics(){return this.request("/metrics")}async getReadiness(){return this.request("/readyz")}async getAgents(){return this.request("/agents")}async createAgentSession(){return this.request("/agents/session",{method:"POST"})}async getJobs(){return this.request("/jobs")}async getControlStatus(){return this.request("/api/control/status")}async toggleGodMode(){return this.request("/api/control/god-mode",{method:"POST"})}async emergencyStop(){return this.request("/api/control/emergency-stop",{method:"POST"})}async resetEmergency(){return this.request("/api/control/reset-emergency",{method:"POST"})}async getGitHubStatus(){return this.request("/github/status")}async getGitHubCommits(){return this.request("/github/commits")}async getShopifyStatus(){return this.request("/shopify/status")}async syncShopifyProducts(){return this.request("/shopify/sync/products",{method:"POST"})}async syncShopifyInventory(){return this.request("/shopify/sync/inventory",{method:"POST"})}}const xt=new P0;class I0{constructor(){Nt(this,"socket",null);Nt(this,"wsURL");Nt(this,"reconnectAttempts",0);Nt(this,"maxReconnectAttempts",5);this.wsURL=window.location.origin}connect(){var t;return(t=this.socket)!=null&&t.connected?this.socket:(this.socket=Ps(this.wsURL,{transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0}),this.setupEventHandlers(),this.socket)}setupEventHandlers(){this.socket&&(this.socket.on("connect",()=>{console.log("WebSocket connected"),this.reconnectAttempts=0}),this.socket.on("disconnect",()=>{console.log("WebSocket disconnected")}),this.socket.on("connect_error",t=>{console.error("WebSocket connection error:",t),this.handleReconnect()}),this.socket.on("error",t=>{console.error("WebSocket error:",t)}))}handleReconnect(){this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},1e3*this.reconnectAttempts))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}subscribeToSystemMetrics(t){var i;this.socket||this.connect(),(i=this.socket)==null||i.on("system_metrics",t)}subscribeToShopifyEvents(t){var i;this.socket||this.connect(),(i=this.socket)==null||i.on("shopify_event",t)}subscribeToLogs(t){var i;this.socket||this.connect(),(i=this.socket)==null||i.on("log_entry",t)}subscribeToAgentStatus(t){var i;this.socket||this.connect(),(i=this.socket)==null||i.on("agent_status",t)}subscribeToJobUpdates(t){var i;this.socket||this.connect(),(i=this.socket)==null||i.on("job_update",t)}subscribeToAlerts(t){var i;this.socket||this.connect(),(i=this.socket)==null||i.on("alert",t)}on(t,i){var o;this.socket||this.connect(),(o=this.socket)==null||o.on(t,i)}off(t,i){var o;(o=this.socket)==null||o.off(t,i)}emit(t,i){var o;(o=this.socket)==null||o.emit(t,i)}get connected(){var t;return((t=this.socket)==null?void 0:t.connected)||!1}getSocket(){return this.socket}}const so=new I0,G0=()=>{const e=new Date,t=[];for(let i=0;i<50;i++){const o=new Date(e.getTime()-i*3e4);t.push({timestamp:o,value:Math.random()*100,category:"cpu"},{timestamp:o,value:Math.random()*100,category:"memory"},{timestamp:o,value:Math.random()*1e3,category:"network"},{timestamp:o,value:Math.random()*8+1,category:"agents"})}return t.reverse()},q0=()=>{const{setGitHubStatus:e,setAssistantStatus:t,setWorkspaces:i,setActiveWorkspace:o,godMode:r,emergencyStop:n,setGodMode:a,setEmergencyStop:l,eliteMode:s}=_s(),[u,c]=we.useState({worker_status:"unknown",backend_status:"unknown",api_calls_today:0,active_sessions:0,uptime_hours:0}),[f,h]=we.useState(!0),[d,p]=we.useState(G0()),{metrics:g,connected:v}=Is();we.useEffect(()=>(so.connect({onSystemHeartbeat:y=>{console.log("System heartbeat:",y)},onSystemMetrics:y=>{console.log("System metrics update:",y)},onControlEvent:y=>{y.event_type==="god_mode"?a(y.data.enabled):y.event_type==="emergency_stop"?l(!0):y.event_type==="emergency_reset"&&l(!1)},onGitHubEvent:y=>{console.log("GitHub event:",y)},onAssistantEvent:y=>{console.log("Assistant event:",y)},onWorkspaceEvent:y=>{console.log("Workspace event:",y)}}),()=>{so.disconnect()}),[a,l]),we.useEffect(()=>{const y=async()=>{try{const w=await(await fetch(window.location.origin+"/health")).json().catch(()=>({ok:!1}));let C="offline";try{await xt.getSystemHealth(),C="online"}catch{C="offline"}try{const L=await xt.getGitHubStatus();e(L)}catch(L){console.log("GitHub not configured:",L)}try{const L=await xt.getAssistantStatus();t(L)}catch(L){console.log("AI Assistant not configured:",L)}try{const L=await xt.listWorkspaces();i(L.workspaces);const O=L.workspaces.find(I=>I.is_active);O&&o(O)}catch(L){console.log("Failed to load workspaces:",L)}try{const L=await xt.getControlStatus();a(L.controls.god_mode),l(L.controls.emergency_stop)}catch(L){console.log("Failed to load control status:",L)}c({worker_status:w.ok?"online":"offline",backend_status:C,api_calls_today:g.apiCalls||Math.floor(Math.random()*1500)+200,active_sessions:g.activeAgents||Math.floor(Math.random()*10)+3,uptime_hours:Math.floor(Math.random()*720)+24})}catch(S){console.error("Failed to load system stats:",S)}finally{h(!1)}};y();const T=setInterval(y,3e4);return()=>clearInterval(T)},[g,e,t,i,o,a,l]),we.useEffect(()=>{const y=setInterval(()=>{p(T=>{const S=[...T],w=new Date;S.push({timestamp:w,value:g.cpu||Math.random()*100,category:"cpu"},{timestamp:w,value:g.memory||Math.random()*100,category:"memory"},{timestamp:w,value:g.network||Math.random()*1e3,category:"network"},{timestamp:w,value:g.activeAgents||Math.random()*8+1,category:"agents"});const C=50,L=new Map;S.forEach(I=>{L.has(I.category)||L.set(I.category,[]),L.get(I.category).push(I)});const O=[];return L.forEach(I=>{const _=I.sort((F,A)=>A.timestamp.getTime()-F.timestamp.getTime());O.push(..._.slice(0,C))}),O.sort((I,_)=>I.timestamp.getTime()-_.timestamp.getTime())})},v?5e3:3e3);return()=>clearInterval(y)},[g,v]);const N=async()=>{try{await xt.triggerEmergencyStop("Manual emergency stop from overview")}catch(y){console.error("Failed to trigger emergency stop:",y)}},k=async()=>{try{await xt.toggleGodMode(!r)}catch(y){console.error("Failed to toggle god mode:",y)}};if(f)return M.jsxs(Ee.div,{className:"overview-loading",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Initializing Elite Command Center..."})]});const b=u.worker_status==="online"&&u.backend_status==="online"?"operational":u.worker_status==="offline"&&u.backend_status==="offline"?"critical":"warning";return M.jsxs(M.Fragment,{children:[M.jsx(Gs,{particleCount:s?2e3:1500,speed:.3,color:s?"#00FFE0":"#00ffff"}),M.jsxs(Ee.div,{className:`overview ${s?"elite-mode":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[M.jsxs("div",{className:"overview-header",children:[M.jsx(Ee.h1,{className:"page-title",initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},children:s?"Elite Command Center":"Command Center"}),M.jsx(Ee.p,{className:"page-subtitle",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:s?"Royal Equips Elite Operations Command":"2050 Elite operational command center"}),M.jsxs("div",{className:"status-indicators",children:[v&&M.jsx(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"status-indicator live",children:"⚡ REAL-TIME ACTIVE"}),r&&M.jsx(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4},className:"status-indicator god-mode",children:"👑 GOD MODE ACTIVE"}),n&&M.jsx(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},className:"status-indicator emergency",children:"🚨 EMERGENCY STOP"})]})]}),M.jsx(Ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"elite-controls",children:M.jsxs("div",{className:"control-panel",children:[M.jsxs("button",{className:`control-btn god-mode ${r?"active":""}`,onClick:k,title:"Toggle God Mode",children:[M.jsx("span",{className:"control-icon",children:"👑"}),M.jsx("span",{className:"control-label",children:"God Mode"})]}),M.jsxs("button",{className:"control-btn emergency",onClick:N,title:"Emergency Stop",children:[M.jsx("span",{className:"control-icon",children:"🚨"}),M.jsx("span",{className:"control-label",children:"Emergency"})]}),M.jsxs("div",{className:"system-status-mini",children:[M.jsx("span",{className:`status-dot ${b}`}),M.jsx("span",{className:"status-text",children:b.toUpperCase()})]})]})}),M.jsxs("div",{className:"overview-content",children:[M.jsx(Ee.div,{className:"overview-sidebar",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.5},children:M.jsx(L0,{})}),M.jsxs("div",{className:"overview-main",children:[M.jsx(Ee.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:1,delay:.5},style:{marginBottom:"2rem"},children:M.jsx(ql,{systemStatus:b,activeAgents:g.activeAgents,systemLoad:g.systemLoad})}),M.jsxs("div",{className:"overview-grid",children:[M.jsx(Ee.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},children:M.jsx(Rt,{title:"System Status Matrix",className:b==="operational"?"success":b==="warning"?"warning":"danger",children:M.jsx("div",{className:"system-matrix",children:M.jsxs("div",{className:"status-grid",children:[M.jsxs("div",{className:`status-cell ${u.worker_status}`,children:[M.jsxs("div",{className:"status-indicator",children:[M.jsx("div",{className:"status-dot"}),M.jsx("span",{children:"WORKER"})]}),M.jsx("span",{className:"status-value",children:u.worker_status.toUpperCase()})]}),M.jsxs("div",{className:`status-cell ${u.backend_status}`,children:[M.jsxs("div",{className:"status-indicator",children:[M.jsx("div",{className:"status-dot"}),M.jsx("span",{children:"BACKEND"})]}),M.jsx("span",{className:"status-value",children:u.backend_status.toUpperCase()})]})]})})})}),M.jsx(Ee.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:M.jsx(Rt,{title:"Real-Time Performance Analytics",className:"info",children:M.jsx(R0,{data:d,width:350,height:200})})}),M.jsx(Ee.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.8},children:M.jsx(Rt,{title:"Live System Metrics",className:"info",children:M.jsxs("div",{className:"metrics-matrix",children:[M.jsxs("div",{className:"metric-row",children:[M.jsx("span",{className:"metric-label",children:"CPU Load"}),M.jsxs("span",{className:"metric-value",children:[g.cpu.toFixed(1),"%"]}),M.jsx("div",{className:"metric-bar",children:M.jsx("div",{className:"metric-fill",style:{width:`${g.cpu}%`,backgroundColor:s?"#00FFE0":"#00ffff"}})})]}),M.jsxs("div",{className:"metric-row",children:[M.jsx("span",{className:"metric-label",children:"Memory"}),M.jsxs("span",{className:"metric-value",children:[g.memory.toFixed(1),"%"]}),M.jsx("div",{className:"metric-bar",children:M.jsx("div",{className:"metric-fill",style:{width:`${g.memory}%`,backgroundColor:"#ff00ff"}})})]}),M.jsxs("div",{className:"metric-row",children:[M.jsx("span",{className:"metric-label",children:"Network"}),M.jsxs("span",{className:"metric-value",children:[g.network.toFixed(0)," MB/s"]}),M.jsx("div",{className:"metric-bar",children:M.jsx("div",{className:"metric-fill",style:{width:`${Math.min(g.network/10,100)}%`,backgroundColor:"#00ff41"}})})]})]})})}),M.jsx(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.9},children:M.jsx(Rt,{title:"Agent Operations",className:"info",children:M.jsxs("div",{className:"metrics-display",children:[M.jsxs("div",{className:"metric",children:[M.jsx("span",{className:"metric-value",children:u.active_sessions}),M.jsx("span",{className:"metric-label",children:"Active Agents"})]}),M.jsxs("div",{className:"metric",children:[M.jsx("span",{className:"metric-value",children:g.errors}),M.jsx("span",{className:"metric-label",children:"Error Count"})]})]})})}),M.jsx(Ee.div,{initial:{opacity:0,rotate:-10},animate:{opacity:1,rotate:0},transition:{duration:.6,delay:1},children:M.jsx(Rt,{title:"API Performance",className:"info",children:M.jsxs("div",{className:"metrics-display",children:[M.jsxs("div",{className:"metric",children:[M.jsx("span",{className:"metric-value",children:u.api_calls_today.toLocaleString()}),M.jsx("span",{className:"metric-label",children:"API Calls Today"})]}),M.jsxs("div",{className:"metric",children:[M.jsxs("span",{className:"metric-value",children:[u.uptime_hours,"h"]}),M.jsx("span",{className:"metric-label",children:"System Uptime"})]})]})})}),M.jsx(Ee.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,delay:1.1},children:M.jsx(Rt,{title:"Empire Command Status",className:"success",children:M.jsx("div",{className:"empire-status",children:M.jsxs(Ee.div,{className:"empire-indicator",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:[M.jsx("div",{className:"empire-icon",children:"👑"}),M.jsxs("div",{className:"empire-text",children:[M.jsx("h4",{children:"ROYAL EQUIPS EMPIRE"}),M.jsx("p",{children:b==="operational"?"All systems operational":"Systems monitoring"}),M.jsx("p",{children:"Ready for elite operations"})]})]})})})})]})]}),M.jsx(Ee.div,{className:"overview-assistant",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.7},children:M.jsx(O0,{compact:!0})})]})]})]})};export{q0 as Overview};
//# sourceMappingURL=Overview-96zumzyd.js.map
