# Skip hooks when explicitly requested, on CI, or with skip flags
if [ -n "$SKIP_HUSKY" ] || [ -n "$CI" ] || [ -n "$SKIP_CHECKS" ] || [ -n "$SKIP_PUSH_CHECKS" ]; then
  echo "Husky pre-push skipped"; exit 0
fi

# Optional checks before push - all non-blocking
if command -v pnpm >/dev/null 2>&1; then
  echo "🔧 Running optional TypeScript type checking..."
  pnpm typecheck || echo "⚠️ Type issues found. Run 'pnpm typecheck' to fix or use SKIP_CHECKS=1 git push to skip."
  
  echo "🧪 Running optional unit tests..."
  pnpm test || echo "⚠️ Test issues found. Run 'pnpm test' to fix or use SKIP_CHECKS=1 git push to skip."
  
  echo "✅ Pre-push checks completed (all non-blocking)"
fi