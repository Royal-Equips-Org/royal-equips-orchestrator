# Skip hooks when explicitly requested or on CI
if [ -n "$SKIP_HUSKY" ] || [ -n "$CI" ]; then
  echo "Husky skipped"; exit 0
fi

# Type check and run tests before push
if command -v pnpm >/dev/null 2>&1; then
  echo "ğŸ”§ Running TypeScript type checking..."
  pnpm typecheck || {
    echo "âŒ TypeScript type checking failed. Fix type errors before pushing."
    exit 1
  }
  echo "âœ… Type checking passed"
  
  echo "ğŸ§ª Running unit tests..."
  pnpm test || {
    echo "âŒ Unit tests failed. Fix failing tests before pushing."
    exit 1
  }
  echo "âœ… All tests passed"
fi