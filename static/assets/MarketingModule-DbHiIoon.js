import{f as re,r as t,q as Y,j as e,R as ee,h as P,Z as D,c as ce,C as ie,n as le,D as oe,E as de,s as me,U as te,H as xe,k as ue}from"./index-DGVu5RhP.js";import{C as y,a as $,b as _,c as v,B as ae}from"./Badge-BDNklIKN.js";import{T as he,a as pe,b as O,c as L}from"./Tabs-BXgm6cwm.js";import{z as I}from"./index-B1g217iS.js";import{M as se}from"./mail-Bey7-USK.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=re("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=re("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function je(){const[r,g]=t.useState(!1),[E,x]=t.useState(null),i=t.useCallback(async(h,u={})=>{const[j,w]=t.useState(!0),[N,n]=t.useState(null),[a,c]=t.useState(null);try{g(!0),x(null),w(!0),n(null);const{method:l="GET",headers:p={},body:o}=u,R={"Content-Type":"application/json",...p},b={method:l,headers:R};o&&l!=="GET"&&(b.body=typeof o=="string"?o:JSON.stringify(o));const m=await fetch(h,b);if(!m.ok)throw new Error(`API Error: ${m.status} ${m.statusText}`);const f=await m.json();return c(f),{data:f,loading:!1,error:null}}catch(l){const p=l instanceof Error?l.message:"Unknown API error";return n(p),x(p),{data:null,loading:!1,error:p}}finally{w(!1),g(!1)}},[]),S=t.useCallback((h,u)=>i(h,{method:"GET",headers:u}),[i]),C=t.useCallback((h,u,j)=>i(h,{method:"POST",body:u,headers:j}),[i]),T=t.useCallback((h,u,j)=>i(h,{method:"PUT",body:u,headers:j}),[i]),M=t.useCallback((h,u,j)=>i(h,{method:"PATCH",body:u,headers:j}),[i]),k=t.useCallback((h,u)=>i(h,{method:"DELETE",headers:u}),[i]);return{request:i,get:S,post:C,put:T,patch:M,delete:k,loading:r,error:E,clearError:()=>x(null)}}function ne(r){const{endpoint:g,pollInterval:E=5e3,enabled:x=!0,onData:i,onError:S}=r,[C,T]=t.useState(null),[M,k]=t.useState(!0),[h,u]=t.useState(null),[j,w]=t.useState(!1),[N,n]=t.useState(null),a=t.useRef(null),c=t.useRef(!0),l=t.useCallback(async()=>{if(!(!x||!c.current))try{u(null);const m=await fetch(g);if(!m.ok)throw new Error(`HTTP ${m.status}: ${m.statusText}`);const f=await m.json();c.current&&(T(f),w(!0),n(new Date),k(!1),i==null||i(f))}catch(m){const f=m instanceof Error?m.message:"Failed to fetch real-time data";c.current&&(u(f),w(!1),k(!1),S==null||S(f)),console.error("Real-time data fetch error:",m)}},[g,x,i,S]),p=t.useCallback(()=>{x&&(a.current&&clearInterval(a.current),l(),a.current=setInterval(l,E))},[l,E,x]),o=t.useCallback(()=>{a.current&&(clearInterval(a.current),a.current=null),w(!1)},[]),R=t.useCallback(()=>{o(),u(null),k(!0),p()},[p,o]),b=t.useCallback(async()=>{k(!0),await l()},[l]);return t.useEffect(()=>(x?p():o(),()=>{o()}),[x,p,o]),t.useEffect(()=>()=>{c.current=!1,o()},[o]),{data:C,loading:M,error:h,connected:j,lastUpdate:N,refresh:b,reconnect:R}}function Ne(){const[r,g]=t.useState([]),[E,x]=t.useState(0),i=t.useCallback((n,a,c={})=>{const{type:l="info",persistent:p=!1,duration:o=4e3,action:R}=c,b={id:`${Date.now()}-${Math.random()}`,type:l,title:n,message:a,timestamp:new Date,read:!1,persistent:p,action:R};g(f=>[b,...f]),x(f=>f+1);const m={duration:p?1/0:o,position:"top-right"};switch(l){case"success":I.success(`${n}${a?`: ${a}`:""}`,m);break;case"error":I.error(`${n}${a?`: ${a}`:""}`,m);break;case"warning":I(`⚠️ ${n}${a?`: ${a}`:""}`,m);break;default:I(`ℹ️ ${n}${a?`: ${a}`:""}`,m)}return b.id},[]),S=t.useCallback((n,a,c)=>i(n,a,{...c,type:"success"}),[i]),C=t.useCallback((n,a,c)=>i(n,a,{...c,type:"error"}),[i]),T=t.useCallback((n,a,c)=>i(n,a,{...c,type:"warning"}),[i]),M=t.useCallback((n,a,c)=>i(n,a,{...c,type:"info"}),[i]),k=t.useCallback(n=>{g(a=>a.map(c=>c.id===n?{...c,read:!0}:c)),x(a=>Math.max(0,a-1))},[]),h=t.useCallback(()=>{g(n=>n.map(a=>({...a,read:!0}))),x(0)},[]),u=t.useCallback(n=>{g(a=>{const c=a.find(l=>l.id===n);return c&&!c.read&&x(l=>Math.max(0,l-1)),a.filter(l=>l.id!==n)}),I.dismiss(n)},[]),j=t.useCallback(()=>{g([]),x(0),I.dismiss()},[]),w=t.useCallback(n=>r.filter(a=>a.type===n),[r]),N=t.useCallback(()=>r.filter(n=>!n.read),[r]);return t.useEffect(()=>{const n=setInterval(()=>{const a=new Date(Date.now()-864e5);g(c=>{const l=c.filter(o=>o.persistent||o.timestamp>a),p=c.filter(o=>!o.read&&!o.persistent&&o.timestamp<=a).length;return p>0&&x(o=>Math.max(0,o-p)),l})},6e4);return()=>clearInterval(n)},[]),{notifications:r,unreadCount:E,addNotification:i,markAsRead:k,markAllAsRead:h,removeNotification:u,clearAll:j,success:S,error:C,warning:T,info:M,getByType:w,getUnread:N}}const we=()=>{var f,z,B,H,J,q,Z,K,V,Q,W,X;const[r,g]=t.useState(null),[E,x]=t.useState([]),[i,S]=t.useState(null),[C,T]=t.useState(null),[M,k]=t.useState(!0),[h,u]=t.useState(null),[j,w]=t.useState([]),{get:N}=je(),{addNotification:n}=Ne(),a=ne({endpoint:"/api/marketing/metrics"}),c=ne({endpoint:"/api/marketing/campaigns"});t.useEffect(()=>{a.data&&g(a.data)},[a]),t.useEffect(()=>{c.data&&w(s=>[...s,c.data])},[c]);const l=t.useCallback(async()=>{var s;k(!0);try{const[d,A,G,U,F]=await Promise.all([N("/api/marketing/metrics/real-time"),N("/api/marketing/campaigns/recommendations"),N("/api/marketing/integrations/test"),N("/api/marketing/performance/analysis"),N("/api/marketing/campaigns/active")]);d.data&&!d.error&&g(d.data.metrics),A.data&&!A.error&&x(Y(A.data.recommendations)),G.data&&!G.error&&S(G.data.integrations),U.data&&!U.error&&T(U.data.performance_analysis),F.data&&!F.error&&w(Y((s=F.data.active_campaigns)==null?void 0:s.email))}catch(d){console.error("Failed to load marketing data:",d),n("Marketing Data Error","Failed to load marketing data",{type:"error",duration:5e3})}finally{k(!1)}},[N,n]);t.useEffect(()=>{l()},[l]);const p=async()=>{try{const s=await N("/api/marketing/execute",{method:"POST",body:JSON.stringify({trigger:"manual",context:"command_center"})});s.data&&!s.error&&(n("Automation Success","Marketing automation executed successfully",{type:"success",duration:3e3}),await l())}catch{n("Automation Error","Failed to execute marketing automation",{type:"error",duration:5e3})}},o=async(s,d)=>{try{const A=await N("/api/marketing/content/generate",{method:"POST",body:JSON.stringify({content_type:s,prompt:d,tone:"luxury",max_length:500})});A.data&&!A.error&&(u(A.data.content),n("Content Generated","Content generated successfully",{type:"success",duration:3e3}))}catch{n("Content Generation Error","Content generation failed",{type:"error",duration:5e3})}},R=async s=>{try{const d=await N("/api/marketing/campaigns/create",{method:"POST",body:JSON.stringify(s)});d.data&&!d.error&&(n("Campaign Created","Campaign created successfully",{type:"success",duration:3e3}),await l())}catch{n("Campaign Creation Error","Campaign creation failed",{type:"error",duration:5e3})}},b=s=>s>=1e6?`$${(s/1e6).toFixed(1)}M`:s>=1e3?`$${(s/1e3).toFixed(1)}K`:`$${s.toFixed(0)}`,m=s=>`${s.toFixed(1)}%`;return M?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 animate-spin text-accent-cyan"}),e.jsx("span",{className:"text-text-dim",children:"Loading marketing intelligence..."})]})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"Marketing Automation Command Center"}),e.jsx("p",{className:"text-text-dim",children:"AI-powered marketing automation with real-time performance tracking"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(P,{onClick:p,className:"bg-gradient-to-r from-accent-magenta to-accent-cyan",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Execute Automation"]}),e.jsxs(P,{variant:"outline",onClick:l,className:"border-accent-cyan text-accent-cyan hover:bg-accent-cyan hover:text-bg",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsxs(y,{className:"bg-surface border-accent-cyan/20",children:[e.jsx($,{children:e.jsxs(_,{className:"flex items-center text-text-primary",children:[e.jsx(ce,{className:"h-5 w-5 mr-2 text-accent-cyan"}),"Integration Status"]})}),e.jsx(v,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i||{}).map(([s,d])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[d?e.jsx(ie,{className:"h-4 w-4 text-accent-green"}):e.jsx(le,{className:"h-4 w-4 text-accent-magenta"}),e.jsx("span",{className:`text-sm ${d?"text-accent-green":"text-accent-magenta"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(y,{className:"bg-surface border-accent-green/20",children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-dim",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-accent-green",children:b(((f=r==null?void 0:r.revenue)==null?void 0:f.total_attributed)||0)})]}),e.jsx(oe,{className:"h-8 w-8 text-accent-green"})]})})}),e.jsx(y,{className:"bg-surface border-accent-cyan/20",children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-dim",children:"Email Open Rate"}),e.jsx("p",{className:"text-2xl font-bold text-accent-cyan",children:m(((z=r==null?void 0:r.engagement)==null?void 0:z.email_open_rate)||0)})]}),e.jsx(de,{className:"h-8 w-8 text-accent-cyan"})]})})}),e.jsx(y,{className:"bg-surface border-accent-magenta/20",children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-dim",children:"Click Rate"}),e.jsx("p",{className:"text-2xl font-bold text-accent-magenta",children:m(((B=r==null?void 0:r.engagement)==null?void 0:B.email_click_rate)||0)})]}),e.jsx(ge,{className:"h-8 w-8 text-accent-magenta"})]})})}),e.jsx(y,{className:"bg-surface border-accent-green/20",children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-dim",children:"ROAS"}),e.jsxs("p",{className:"text-2xl font-bold text-accent-green",children:[(((H=r==null?void 0:r.performance)==null?void 0:H.roas)||0).toFixed(1),"x"]})]}),e.jsx(me,{className:"h-8 w-8 text-accent-green"})]})})})]}),e.jsxs(he,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(pe,{className:"grid w-full grid-cols-4 bg-surface",children:[e.jsx(O,{value:"overview",children:"Overview"}),e.jsx(O,{value:"campaigns",children:"Campaigns"}),e.jsx(O,{value:"content",children:"Content AI"}),e.jsx(O,{value:"analytics",children:"Analytics"})]}),e.jsxs(L,{value:"overview",className:"space-y-6",children:[e.jsxs(y,{className:"bg-surface border-accent-cyan/20",children:[e.jsx($,{children:e.jsx(_,{className:"text-text-primary",children:"Revenue Attribution"})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-cyan",children:b(((J=r==null?void 0:r.revenue)==null?void 0:J.email_attributed)||0)}),e.jsx("div",{className:"text-sm text-text-dim",children:"Email Marketing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-magenta",children:b(((q=r==null?void 0:r.revenue)==null?void 0:q.social_attributed)||0)}),e.jsx("div",{className:"text-sm text-text-dim",children:"Social Media"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-green",children:b(((Z=r==null?void 0:r.revenue)==null?void 0:Z.total_attributed)||0)}),e.jsx("div",{className:"text-sm text-text-dim",children:"Total Attributed"})]})]})})]}),e.jsxs(y,{className:"bg-surface border-accent-magenta/20",children:[e.jsx($,{children:e.jsxs(_,{className:"flex items-center text-text-primary",children:[e.jsx(D,{className:"h-5 w-5 mr-2 text-accent-magenta"}),"AI Campaign Recommendations"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:E.map((s,d)=>e.jsxs("div",{className:"p-4 border border-accent-cyan/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:s.name}),e.jsx(ae,{variant:"outline",className:"border-accent-cyan text-accent-cyan",children:s.type})]}),e.jsxs("p",{className:"text-sm text-text-dim mb-2",children:["Target: ",s.target_audience," | Budget: ",b(s.budget)]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-dim",children:s.timeline}),e.jsx(P,{size:"sm",onClick:()=>R(s),className:"bg-accent-magenta hover:bg-accent-magenta/80",children:"Create Campaign"})]})]},d))})})]})]}),e.jsxs(L,{value:"campaigns",className:"space-y-6",children:[e.jsxs(y,{className:"bg-surface border-accent-cyan/20",children:[e.jsx($,{children:e.jsxs(_,{className:"flex items-center text-text-primary",children:[e.jsx(se,{className:"h-5 w-5 mr-2 text-accent-cyan"}),"Active Campaigns (",j.length,")"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:j.length>0?j.map((s,d)=>e.jsx("div",{className:"p-4 border border-accent-green/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:s.name||`Campaign ${d+1}`}),e.jsxs("p",{className:"text-sm text-text-dim",children:["Status: ",s.status||"Active"]})]}),e.jsx(ae,{variant:"outline",className:"border-accent-green text-accent-green",children:"Running"})]})},d)):e.jsx("div",{className:"text-center py-8 text-text-dim",children:"No active campaigns found"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(y,{className:"bg-surface border-accent-cyan/20",children:e.jsxs(v,{className:"p-6 text-center",children:[e.jsx(fe,{className:"h-8 w-8 text-accent-cyan mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:((V=(K=r==null?void 0:r.campaigns)==null?void 0:K.total_sent)==null?void 0:V.toLocaleString())||0}),e.jsx("div",{className:"text-sm text-text-dim",children:"Emails Sent"})]})}),e.jsx(y,{className:"bg-surface border-accent-magenta/20",children:e.jsxs(v,{className:"p-6 text-center",children:[e.jsx(te,{className:"h-8 w-8 text-accent-magenta mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:((W=(Q=r==null?void 0:r.campaigns)==null?void 0:Q.social_impressions)==null?void 0:W.toLocaleString())||0}),e.jsx("div",{className:"text-sm text-text-dim",children:"Social Impressions"})]})}),e.jsx(y,{className:"bg-surface border-accent-green/20",children:e.jsxs(v,{className:"p-6 text-center",children:[e.jsx(xe,{className:"h-8 w-8 text-accent-green mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:m(((X=r==null?void 0:r.engagement)==null?void 0:X.social_engagement_rate)||0)}),e.jsx("div",{className:"text-sm text-text-dim",children:"Social Engagement"})]})})]})]}),e.jsx(L,{value:"content",className:"space-y-6",children:e.jsxs(y,{className:"bg-surface border-accent-magenta/20",children:[e.jsx($,{children:e.jsxs(_,{className:"flex items-center text-text-primary",children:[e.jsx(D,{className:"h-5 w-5 mr-2 text-accent-magenta"}),"AI Content Generation"]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(P,{onClick:()=>o("email_subject","Create compelling email subject lines for luxury products"),className:"bg-accent-cyan hover:bg-accent-cyan/80 p-6 h-auto flex-col",children:[e.jsx(se,{className:"h-6 w-6 mb-2"}),"Generate Email Subjects"]}),e.jsxs(P,{onClick:()=>o("social_post","Create engaging social media posts for product launch"),className:"bg-accent-magenta hover:bg-accent-magenta/80 p-6 h-auto flex-col",children:[e.jsx(te,{className:"h-6 w-6 mb-2"}),"Generate Social Posts"]})]}),h&&e.jsxs("div",{className:"mt-6 p-4 border border-accent-cyan/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:"Generated Content:"}),e.jsx("div",{className:"text-sm text-text-dim whitespace-pre-wrap",children:h.content})]})]})]})}),e.jsx(L,{value:"analytics",className:"space-y-6",children:e.jsxs(y,{className:"bg-surface border-accent-cyan/20",children:[e.jsx($,{children:e.jsxs(_,{className:"flex items-center text-text-primary",children:[e.jsx(ue,{className:"h-5 w-5 mr-2 text-accent-cyan"}),"Performance Analytics"]})}),e.jsx(v,{children:C?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Revenue Attribution"}),e.jsx("div",{className:"space-y-2",children:Object.entries(C.revenue_attribution||{}).map(([s,d])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-dim capitalize",children:s.replace("_"," ")}),e.jsx("span",{className:"text-text-primary font-semibold",children:b(d)})]},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Engagement Metrics"}),e.jsx("div",{className:"space-y-2",children:Object.entries(C.engagement_metrics||{}).map(([s,d])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-dim capitalize",children:s.replace("_"," ")}),e.jsx("span",{className:"text-text-primary font-semibold",children:m(d)})]},s))})]})]}),C.recommendations&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"AI Recommendations"}),e.jsx("div",{className:"space-y-2",children:C.recommendations.map((s,d)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(D,{className:"h-4 w-4 text-accent-magenta mt-0.5"}),e.jsx("span",{className:"text-text-dim text-sm",children:s})]},d))})]})]}):e.jsx("div",{className:"text-center py-8 text-text-dim",children:"Loading performance analytics..."})})]})})]})]})};export{we as MarketingAutomationModule,we as default};
//# sourceMappingURL=MarketingModule-DbHiIoon.js.map
